System.register(["./index-legacy-D9wwV_LM.js","./config-legacy-fr0nedpU.js","./QueryItem.vue_vue_type_script_setup_true_lang-legacy-PDwzg_qu.js","./ListMove.vue_vue_type_script_setup_true_lang-legacy-BpEzNAY3.js","./DialogForm.vue_vue_type_script_setup_true_lang-legacy-D1NFsLCO.js","./data-legacy-CsS4pjCL.js","./vuedraggable.umd-legacy-C8eeoMO6.js","./FieldItem.vue_vue_type_script_setup_true_lang-legacy-BMs5PfNW.js","./content-legacy-CWzKS2vh.js","./sortable.esm-legacy-bb6EEu-C.js","./Tinymce-legacy-Yaf_cwR6.js","./FileListUpload.vue_vue_type_style_index_0_scoped_8f839ee5_lang-legacy-DeinUbDj.js","./BaseUpload-legacy-C_w2Se7t.js","./BaseUpload.vue_vue_type_style_index_0_scoped_bf818630_lang-legacy-B9GsYx7d.js"],(function(e,l){"use strict";var a,d,t,o,u,i,m,n,p,r,s,c,b,f,y,v,V,g,h,_,$,w,k,U,x,T,S,q,M,C,I,H,F,j,z,L,O,K,E,W,A,B,J,N,D,R,Q,G,P,Y,X,Z,ee,le;return{setters:[e=>{a=e.d,d=e.r,t=e.b,o=e.e,u=e.f,i=e.w,m=e.i,n=e.I,p=e.aa,r=e.a9,s=e.j,c=e.l,b=e.t,f=e.p,y=e.u,v=e.v,V=e.h,g=e.k,h=e.m,_=e.a3,$=e.E,w=e.H,k=e.aq,U=e.ae,x=e.at,T=e._,S=e.ac,q=e.o,M=e.c,C=e.as,I=e.ak,H=e.ah,F=e.g,j=e.aJ,z=e.aK,L=e.aY},e=>{O=e.K,K=e.L,E=e.M,W=e.N,A=e.c,B=e.q,J=e.O},e=>{N=e.a,D=e._,R=e.b,Q=e.c},e=>{G=e._},e=>{P=e._},e=>{Y=e.g,X=e.m},e=>{Z=e.d},e=>{ee=e._},e=>{le=e.C},null,null,null,null,null],execute:function(){var l=document.createElement("style");l.textContent='.drag-component[data-v-e377323a]{position:relative;margin-top:.5rem;margin-right:.5rem;display:inline-block;width:7rem;cursor:move;border-radius:.125rem;border-width:1px;border-style:dashed;border-color:rgb(64 158 255 / var(--tw-border-opacity));--tw-border-opacity: 0;--tw-bg-opacity: 1;background-color:rgb(243 244 246 / var(--tw-bg-opacity));padding:.5rem;font-size:.75rem;line-height:1rem}.drag-component[data-v-e377323a]:hover{--tw-border-opacity: 1;--tw-text-opacity: 1;color:rgb(64 158 255 / var(--tw-text-opacity))}.drag-mask[data-v-e377323a]{position:absolute;top:0;left:0;z-index:10;height:100%;width:100%;cursor:move;--tw-bg-opacity: 1;background-color:rgb(160 207 255 / var(--tw-bg-opacity));opacity:0}.drag-mask-selected[data-v-e377323a]{border-radius:.125rem;border-width:1px;border-style:dashed;--tw-border-opacity: 1;border-color:rgb(64 158 255 / var(--tw-border-opacity));--tw-bg-opacity: 1;background-color:rgb(160 207 255 / var(--tw-bg-opacity));opacity:.3}.drag-close[data-v-e377323a]{position:absolute;top:-.125rem;right:0;z-index:10;cursor:pointer;opacity:.7}.dialog-full[data-v-e377323a] .el-dialog__body{padding-bottom:0}.right-panel[data-v-e377323a] .el-form-item{margin-bottom:14px}.drawing-board .sortable-ghost[data-v-e377323a]:before{content:" ";position:absolute;top:0;left:0;height:.25rem;width:100%;--tw-bg-opacity: 1;background-color:rgb(230 162 60 / var(--tw-bg-opacity))}.drawing-board .sortable-ghost .drag-mask[data-v-e377323a]{opacity:.1!important}.drawing-board .sortable-ghost.drag-component[data-v-e377323a]{margin-left:0;margin-right:0;width:100%}.drawing-board[data-v-e377323a] .el-scrollbar__view{height:100%}\n',document.head.appendChild(l);const ae=a({name:"ModelForm",__name:"ModelForm",props:{modelValue:{type:Boolean,required:!0},beanId:{type:String,default:null},beanIds:{type:Array,required:!0},modelType:{type:String,required:!0}},emits:{"update:modelValue":null,finished:null},setup(e){const l=d(),a=d({});return(d,f)=>{const y=t("el-input"),v=t("el-form-item"),V=t("el-radio"),g=t("el-radio-group"),h=t("el-option"),_=t("el-select");return o(),u(P,{values:a.value,"onUpdate:values":f[3]||(f[3]=e=>a.value=e),name:d.$t("menu.config.model"),"query-bean":s(O),"create-bean":s(K),"update-bean":s(E),"delete-bean":s(W),"bean-id":e.beanId,"bean-ids":e.beanIds,focus:l.value,"init-values":()=>({type:e.modelType,scope:0}),"to-values":e=>({...e}),"disable-delete":e=>e.id<=10,perms:"model","model-value":e.modelValue,"onUpdate:modelValue":f[4]||(f[4]=e=>d.$emit("update:modelValue",e)),onFinished:f[5]||(f[5]=()=>d.$emit("finished"))},{default:i((({})=>[m(v,{prop:"name",label:d.$t("model.name"),rules:{required:!0,message:()=>d.$t("v.required")}},{default:i((()=>[m(y,{ref_key:"focus",ref:l,modelValue:a.value.name,"onUpdate:modelValue":f[0]||(f[0]=e=>a.value.name=e),maxlength:"50"},null,8,["modelValue"])])),_:1},8,["label","rules"]),m(v,{prop:"scope",label:d.$t("model.scope"),rules:{required:!0,message:()=>d.$t("v.required")}},{default:i((()=>[m(g,{modelValue:a.value.scope,"onUpdate:modelValue":f[1]||(f[1]=e=>a.value.scope=e),disabled:a.value.id<10},{default:i((()=>[(o(),n(r,null,p([0,2],(e=>m(V,{key:e,value:e},{default:i((()=>[c(b(d.$t(`model.scope.${e}`)),1)])),_:2},1032,["value"]))),64))])),_:1},8,["modelValue","disabled"])])),_:1},8,["label","rules"]),m(v,{prop:"type",label:d.$t("model.type")},{default:i((()=>[m(_,{modelValue:a.value.type,"onUpdate:modelValue":f[2]||(f[2]=e=>a.value.type=e),disabled:""},{default:i((()=>[m(h,{value:e.modelType,label:d.$t(`model.type.${e.modelType}`)},null,8,["value","label"])])),_:1},8,["modelValue"])])),_:1},8,["label"])])),_:1},8,["values","name","query-bean","create-bean","update-bean","delete-bean","bean-id","bean-ids","focus","init-values","to-values","disable-delete","model-value"])}}}),de={class:"mt-3"},te=a({name:"ModelSystemFields",__name:"ModelSystemFields",props:{modelValue:{type:Boolean,required:!0},beanId:{type:String,default:null}},emits:{"update:modelValue":null},setup(e,{emit:l}){const a=e,s=l,{beanId:w,modelValue:k}=f(a),{t:U}=y(),x=d({}),T=d(!1),S=d([]),q=d([]);v(k,(async()=>{if(k.value&&w.value){x.value=await O(w.value);const e=Y()[x.value.type];S.value=X(e.mains.filter((e=>_.epRank>=(e.epRank??0))),x.value.mains,x.value.type),e.asides?.length>0&&(q.value=X(e.asides.filter((e=>_.epRank>=(e.epRank??0))),x.value.asides,x.value.type))}}));const M=async()=>{T.value=!0;try{S.value=S.value.map((e=>({...e,name:""===e.name?null:e.name}))),q.value=q.value.map((e=>({...e,name:""===e.name?null:e.name}))),await E({...x.value,mains:JSON.stringify(S.value),asides:JSON.stringify(q.value)}),$.success(U("success"))}finally{T.value=!1,s("update:modelValue",!1)}},C=()=>{const e=Y()[x.value.type];S.value=X(e.mains,null,x.value.type),e.asides?.length>0&&(q.value=X(e.asides,null,x.value.type))};return(l,a)=>{const d=t("el-table-column"),s=t("el-input"),f=t("el-switch"),y=t("el-option"),v=t("el-select"),_=t("el-checkbox"),$=t("el-table"),w=t("el-button"),k=t("el-form"),U=t("el-dialog");return o(),u(U,{title:l.$t("model.fun.systemFields"),"model-value":e.modelValue,top:"5vh",width:"1024px","onUpdate:modelValue":a[0]||(a[0]=e=>l.$emit("update:modelValue",e))},{default:i((()=>[m(k,null,{default:i((()=>[m($,{data:S.value},{default:i((()=>[m(d,{prop:"code",label:l.$t("model.field.code"),"min-width":"110"},null,8,["label"]),m(d,{prop:"name",label:l.$t("model.field.name"),"min-width":"140"},{default:i((({row:e})=>[m(s,{modelValue:e.name,"onUpdate:modelValue":l=>e.name=l,placeholder:l.$t(e.label),class:"w-11/12"},null,8,["modelValue","onUpdate:modelValue","placeholder"])])),_:1},8,["label"]),m(d,{prop:"show",label:l.$t("model.field.show")},{default:i((({row:e})=>[m(f,{modelValue:e.show,"onUpdate:modelValue":l=>e.show=l,disabled:e.must},null,8,["modelValue","onUpdate:modelValue","disabled"])])),_:1},8,["label"]),m(d,{prop:"double",label:l.$t("model.field.double")},{default:i((({row:e})=>[m(f,{modelValue:e.double,"onUpdate:modelValue":l=>e.double=l},null,8,["modelValue","onUpdate:modelValue"])])),_:1},8,["label"]),m(d,{prop:"required",label:l.$t("model.field.required")},{default:i((({row:e})=>[m(f,{modelValue:e.required,"onUpdate:modelValue":l=>e.required=l,disabled:e.must},null,8,["modelValue","onUpdate:modelValue","disabled"])])),_:1},8,["label"]),m(d,{label:l.$t("model.field.attribute"),"min-width":"180"},{default:i((({row:e})=>["image"===e.type?(o(),n(r,{key:0},[m(s,{modelValue:e.imageHeight,"onUpdate:modelValue":l=>e.imageHeight=l,modelModifiers:{number:!0}},{prepend:i((()=>[c(b(l.$t("model.field.imageHeight")),1)])),_:2},1032,["modelValue","onUpdate:modelValue"]),m(s,{modelValue:e.imageWidth,"onUpdate:modelValue":l=>e.imageWidth=l,modelModifiers:{number:!0}},{prepend:i((()=>[c(b(l.$t("model.field.imageWidth")),1)])),_:2},1032,["modelValue","onUpdate:modelValue"]),m(v,{modelValue:e.imageMode,"onUpdate:modelValue":l=>e.imageMode=l,placeholder:l.$t("model.field.imageMode"),class:"w-full"},{default:i((()=>[(o(),n(r,null,p(["manual","cut","resize","none"],(e=>m(y,{key:e,value:e,label:l.$t(`model.field.imageMode.${e}`)},null,8,["value","label"]))),64))])),_:2},1032,["modelValue","onUpdate:modelValue","placeholder"])],64)):"imageList"===e.type?(o(),n(r,{key:1},[m(s,{modelValue:e.imageMaxHeight,"onUpdate:modelValue":l=>e.imageMaxHeight=l,modelModifiers:{number:!0}},{prepend:i((()=>[c(b(l.$t("model.field.imageMaxHeight")),1)])),_:2},1032,["modelValue","onUpdate:modelValue"]),m(s,{modelValue:e.imageMaxWidth,"onUpdate:modelValue":l=>e.imageMaxWidth=l,modelModifiers:{number:!0}},{prepend:i((()=>[c(b(l.$t("model.field.imageMaxWidth")),1)])),_:2},1032,["modelValue","onUpdate:modelValue"]),m(v,{modelValue:e.imageListType,"onUpdate:modelValue":l=>e.imageListType=l,placeholder:l.$t("model.field.imageListType"),class:"w-full"},{default:i((()=>[(o(),n(r,null,p(["pictureCard","picture"],(e=>m(y,{key:e,value:e,label:l.$t(`model.field.imageListType.${e}`)},null,8,["value","label"]))),64))])),_:2},1032,["modelValue","onUpdate:modelValue","placeholder"])],64)):"editor"===e.type?(o(),n(r,{key:2},[m(v,{modelValue:e.editorType,"onUpdate:modelValue":l=>e.editorType=l,placeholder:l.$t("model.field.editorType"),class:"w-full"},{default:i((()=>[(o(),n(r,null,p([1,2],(e=>m(y,{key:e,value:e,label:l.$t(`model.field.editorType.${e}`)},null,8,["value","label"]))),64))])),_:2},1032,["modelValue","onUpdate:modelValue","placeholder"]),m(_,{modelValue:e.editorSwitch,"onUpdate:modelValue":l=>e.editorSwitch=l},{default:i((()=>[c(b(l.$t("model.field.editorSwitch")),1)])),_:2},1032,["modelValue","onUpdate:modelValue"])],64)):V("",!0)])),_:1},8,["label"])])),_:1},8,["data"]),q.value.length>0?(o(),u($,{key:0,data:q.value,class:"mt-5"},{default:i((()=>[m(d,{prop:"code",label:l.$t("model.field.code"),"min-width":"100"},null,8,["label"]),m(d,{prop:"name",label:l.$t("model.field.name"),"min-width":"120"},{default:i((({row:e})=>[m(s,{modelValue:e.name,"onUpdate:modelValue":l=>e.name=l,placeholder:l.$t(e.label),class:"w-11/12"},null,8,["modelValue","onUpdate:modelValue","placeholder"])])),_:1},8,["label"]),m(d,{prop:"show",label:l.$t("model.field.show")},{default:i((({row:e})=>[m(f,{modelValue:e.show,"onUpdate:modelValue":l=>e.show=l,disabled:e.must},null,8,["modelValue","onUpdate:modelValue","disabled"])])),_:1},8,["label"]),m(d,{prop:"required",label:l.$t("model.field.required")},{default:i((({row:e})=>[m(f,{modelValue:e.required,"onUpdate:modelValue":l=>e.required=l,disabled:e.must},null,8,["modelValue","onUpdate:modelValue","disabled"])])),_:1},8,["label"])])),_:1},8,["data"])):V("",!0),g("div",de,[m(w,{loading:T.value,type:"primary","native-type":"submit",onClick:h(M,["prevent"])},{default:i((()=>[c(b(l.$t("save")),1)])),_:1},8,["loading"]),m(w,{onClick:C},{default:i((()=>[c(b(l.$t("restoreInitialSettings")),1)])),_:1})])])),_:1})])),_:1},8,["title","model-value"])}}}),oe=a({__name:"FieldAttribute",props:{selected:{type:Object,required:!0}},setup(e){const l=e,{selected:a}=f(l),y=d([]),v=d([]);return w((async()=>{"date"!==a.value.type||a.value.dateType||(a.value.dateType="date"),"switch"!==a.value.type||a.value.inactiveValue||(a.value.inactiveValue="0"),"switch"!==a.value.type||a.value.activeValue||(a.value.activeValue="1"),["radio","checkbox"].includes(a.value.type)&&!a.value.checkStyle&&(a.value.checkStyle="default"),["checkbox","multipleSelect"].includes(a.value.type)&&!a.value.defaultValue&&(a.value.defaultValue=[]),["checkbox","multipleSelect"].includes(a.value.type)&&(a.value.multiple=!0),["radio","checkbox","select","multipleSelect"].includes(a.value.type)&&(y.value=await A())})),w((async()=>{null!=a.value.dictTypeId&&(v.value=await le({typeId:a.value.dictTypeId}))})),(e,l)=>{const d=t("el-input"),f=t("el-form-item"),g=t("el-switch"),h=t("el-input-number"),_=t("el-option"),$=t("el-select"),w=t("el-color-picker"),U=t("el-radio-button"),x=t("el-radio-group");return o(),n(r,null,[m(f,{prop:"code",label:e.$t("model.field.code"),rules:{required:!0,message:()=>e.$t("v.required")}},{default:i((()=>[m(d,{modelValue:s(a).code,"onUpdate:modelValue":l[0]||(l[0]=e=>s(a).code=e),maxlength:"50"},null,8,["modelValue"])])),_:1},8,["label","rules"]),m(f,{prop:"name",label:e.$t("model.field.name"),rules:{required:!0,message:()=>e.$t("v.required")}},{default:i((()=>[m(d,{modelValue:s(a).name,"onUpdate:modelValue":l[1]||(l[1]=e=>s(a).name=e),maxlength:"50"},null,8,["modelValue"])])),_:1},8,["label","rules"]),["tinyEditor","textarea"].includes(s(a).type)?(o(),u(f,{key:0,prop:"clob",label:e.$t("model.field.clob")},{label:i((()=>[m(k,{message:"model.field.clob",help:""})])),default:i((()=>[m(g,{modelValue:s(a).clob,"onUpdate:modelValue":l[2]||(l[2]=e=>s(a).clob=e)},null,8,["modelValue"])])),_:1},8,["label"])):V("",!0),m(f,{prop:"double",label:e.$t("model.field.double")},{default:i((()=>[m(g,{modelValue:s(a).double,"onUpdate:modelValue":l[3]||(l[3]=e=>s(a).double=e)},null,8,["modelValue"])])),_:1},8,["label"]),["text","textarea","number","date","color","slider","switch","radio","checkbox","select","multipleSelect"].includes(s(a).type)?(o(),u(f,{key:1,prop:"required",label:e.$t("model.field.showInList")},{default:i((()=>[m(g,{modelValue:s(a).showInList,"onUpdate:modelValue":l[4]||(l[4]=e=>s(a).showInList=e)},null,8,["modelValue"])])),_:1},8,["label"])):V("",!0),m(f,{prop:"required",label:e.$t("model.field.required")},{default:i((()=>[m(g,{modelValue:s(a).required,"onUpdate:modelValue":l[5]||(l[5]=e=>s(a).required=e)},null,8,["modelValue"])])),_:1},8,["label"]),["text","textarea","number","select","multipleSelect","videoUpload","audioUpload","fileUpload","tinyEditor"].includes(s(a).type)?(o(),u(f,{key:2,prop:"placeholder",label:e.$t("model.field.placeholder")},{default:i((()=>[m(d,{modelValue:s(a).placeholder,"onUpdate:modelValue":l[6]||(l[6]=e=>s(a).placeholder=e),maxlength:"100"},null,8,["modelValue"])])),_:1},8,["label"])):V("",!0),["text","textarea"].includes(s(a).type)?(o(),n(r,{key:3},[m(f,{prop:"defaultValue",label:e.$t("model.field.defaultValue")},{default:i((()=>[m(d,{modelValue:s(a).defaultValue,"onUpdate:modelValue":l[7]||(l[7]=e=>s(a).defaultValue=e),maxlength:"100"},null,8,["modelValue"])])),_:1},8,["label"]),m(f,{prop:"minlength",label:e.$t("model.field.minlength")},{default:i((()=>[m(h,{modelValue:s(a).minlength,"onUpdate:modelValue":l[8]||(l[8]=e=>s(a).minlength=e),min:1},null,8,["modelValue"])])),_:1},8,["label"]),m(f,{prop:"maxlength",label:e.$t("model.field.maxlength")},{default:i((()=>[m(h,{modelValue:s(a).maxlength,"onUpdate:modelValue":l[9]||(l[9]=e=>s(a).maxlength=e),min:1},null,8,["modelValue"])])),_:1},8,["label"])],64)):V("",!0),["textarea"].includes(s(a).type)?(o(),u(f,{key:4,prop:"rows",label:e.$t("model.field.rows")},{default:i((()=>[m(h,{modelValue:s(a).rows,"onUpdate:modelValue":l[10]||(l[10]=e=>s(a).rows=e)},null,8,["modelValue"])])),_:1},8,["label"])):V("",!0),["number","slider"].includes(s(a).type)?(o(),n(r,{key:5},[m(f,{prop:"defaultValue",label:e.$t("model.field.defaultValue")},{default:i((()=>[m(h,{modelValue:s(a).defaultValue,"onUpdate:modelValue":l[11]||(l[11]=e=>s(a).defaultValue=e),min:s(a).min,max:s(a).max},null,8,["modelValue","min","max"])])),_:1},8,["label"]),m(f,{prop:"min",label:e.$t("model.field.min")},{default:i((()=>[m(h,{modelValue:s(a).min,"onUpdate:modelValue":l[12]||(l[12]=e=>s(a).min=e)},null,8,["modelValue"])])),_:1},8,["label"]),m(f,{prop:"max",label:e.$t("model.field.max")},{default:i((()=>[m(h,{modelValue:s(a).max,"onUpdate:modelValue":l[13]||(l[13]=e=>s(a).max=e)},null,8,["modelValue"])])),_:1},8,["label"]),m(f,{prop:"step",label:e.$t("model.field.step")},{default:i((()=>[m(h,{modelValue:s(a).step,"onUpdate:modelValue":l[14]||(l[14]=e=>s(a).step=e)},null,8,["modelValue"])])),_:1},8,["label"])],64)):V("",!0),["number"].includes(s(a).type)?(o(),u(f,{key:6,prop:"precision",label:e.$t("model.field.precision")},{default:i((()=>[m(h,{modelValue:s(a).precision,"onUpdate:modelValue":l[15]||(l[15]=e=>s(a).precision=e),precision:0,min:0,max:4},null,8,["modelValue"])])),_:1},8,["label"])):V("",!0),["slider"].includes(s(a).type)?(o(),u(f,{key:7,prop:"showInput",label:e.$t("model.field.showInput")},{default:i((()=>[m(g,{modelValue:s(a).showInput,"onUpdate:modelValue":l[16]||(l[16]=e=>s(a).showInput=e)},null,8,["modelValue"])])),_:1},8,["label"])):V("",!0),["date"].includes(s(a).type)?(o(),u(f,{key:8,prop:"dateType",label:e.$t("model.field.dateType")},{default:i((()=>[m($,{modelValue:s(a).dateType,"onUpdate:modelValue":l[17]||(l[17]=e=>s(a).dateType=e)},{default:i((()=>[(o(),n(r,null,p(["date","datetime"],(l=>m(_,{key:l,label:e.$t(`model.field.dateType.${l}`),value:l},null,8,["label","value"]))),64))])),_:1},8,["modelValue"])])),_:1},8,["label"])):V("",!0),["color"].includes(s(a).type)?(o(),u(f,{key:9,prop:"defaultValue",label:e.$t("model.field.defaultValue")},{default:i((()=>[m(w,{modelValue:s(a).defaultValue,"onUpdate:modelValue":l[18]||(l[18]=e=>s(a).defaultValue=e)},null,8,["modelValue"])])),_:1},8,["label"])):V("",!0),["switch"].includes(s(a).type)?(o(),u(f,{key:10,prop:"defaultValue",label:e.$t("model.field.defaultValue")},{default:i((()=>[m(g,{modelValue:s(a).defaultValue,"onUpdate:modelValue":l[19]||(l[19]=e=>s(a).defaultValue=e)},null,8,["modelValue"])])),_:1},8,["label"])):V("",!0),["radio","checkbox"].includes(s(a).type)?(o(),u(f,{key:11,prop:"checkStyle",label:e.$t("model.field.checkStyle")},{default:i((()=>[m(x,{modelValue:s(a).checkStyle,"onUpdate:modelValue":l[20]||(l[20]=e=>s(a).checkStyle=e)},{default:i((()=>[(o(),n(r,null,p(["default","button"],(l=>m(U,{key:l,value:l},{default:i((()=>[c(b(e.$t(`model.field.checkStyle.${l}`)),1)])),_:2},1032,["value"]))),64))])),_:1},8,["modelValue"])])),_:1},8,["label"])):V("",!0),["select","multipleSelect"].includes(s(a).type)?(o(),u(f,{key:12,prop:"clearable",label:e.$t("model.field.clearable")},{default:i((()=>[m(g,{modelValue:s(a).clearable,"onUpdate:modelValue":l[21]||(l[21]=e=>s(a).clearable=e)},null,8,["modelValue"])])),_:1},8,["label"])):V("",!0),["radio","checkbox","select","multipleSelect"].includes(s(a).type)?(o(),n(r,{key:13},[m(f,{prop:"dictTypeId",label:e.$t("model.field.dictType"),rules:{required:!0,message:()=>e.$t("v.required")}},{default:i((()=>[m($,{modelValue:s(a).dictTypeId,"onUpdate:modelValue":l[22]||(l[22]=e=>s(a).dictTypeId=e),class:"w-full",onChange:l[23]||(l[23]=e=>(e=>{a.value.defaultValue=a.value.multiple?[]:void 0,a.value.defaultValueKey=a.value.multiple?[]:void 0,a.value.dataType=1===y.value.find((l=>l.id===e))?.dataType?"number":"string"})(e))},{default:i((()=>[(o(!0),n(r,null,p(y.value,(e=>(o(),u(_,{key:e.id,value:e.id,label:`${e.name}(${e.alias})`},null,8,["value","label"])))),128))])),_:1},8,["modelValue"])])),_:1},8,["label","rules"]),m(f,{prop:"dataType",label:e.$t("model.field.dataType")},{default:i((()=>[m($,{modelValue:s(a).dataType,"onUpdate:modelValue":l[24]||(l[24]=e=>s(a).dataType=e),class:"w-full",disabled:""},{default:i((()=>[(o(),n(r,null,p(["string","number"],(l=>m(_,{key:l,value:l,label:e.$t(`model.field.dataType.${l}`)},null,8,["value","label"]))),64))])),_:1},8,["modelValue"])])),_:1},8,["label"])],64)):V("",!0),["radio","select"].includes(s(a).type)?(o(),u(f,{key:14,prop:"defaultValue",label:e.$t("model.field.defaultValue")},{default:i((()=>[m($,{modelValue:s(a).defaultValueKey,"onUpdate:modelValue":l[25]||(l[25]=e=>s(a).defaultValueKey=e),clearable:"",class:"w-full",onChange:l[26]||(l[26]=e=>s(a).defaultValue=v.value.find((l=>l.value===e))?.name)},{default:i((()=>[(o(!0),n(r,null,p(v.value,(e=>(o(),u(_,{key:e.id,value:e.value,label:e.name},null,8,["value","label"])))),128))])),_:1},8,["modelValue"])])),_:1},8,["label"])):V("",!0),["checkbox","multipleSelect"].includes(s(a).type)?(o(),u(f,{key:15,prop:"defaultValue",label:e.$t("model.field.defaultValue")},{default:i((()=>[m($,{modelValue:s(a).defaultValueKey,"onUpdate:modelValue":l[27]||(l[27]=e=>s(a).defaultValueKey=e),clearable:"",class:"w-full",multiple:"",onChange:l[28]||(l[28]=e=>s(a).defaultValue=v.value.filter((l=>-1!==e.indexOf(l.value))).map((e=>e.name)))},{default:i((()=>[(o(!0),n(r,null,p(v.value,(e=>(o(),u(_,{key:e.id,value:e.value,label:e.name},null,8,["value","label"])))),128))])),_:1},8,["modelValue"])])),_:1},8,["label"])):V("",!0),["imageUpload"].includes(s(a).type)?(o(),n(r,{key:16},[m(f,{prop:"imageWidth",label:e.$t("model.field.imageWidth")},{default:i((()=>[m(h,{modelValue:s(a).imageWidth,"onUpdate:modelValue":l[29]||(l[29]=e=>s(a).imageWidth=e),min:1,max:65535},null,8,["modelValue"])])),_:1},8,["label"]),m(f,{prop:"imageHeight",label:e.$t("model.field.imageHeight")},{default:i((()=>[m(h,{modelValue:s(a).imageHeight,"onUpdate:modelValue":l[30]||(l[30]=e=>s(a).imageHeight=e),min:1,max:65535},null,8,["modelValue"])])),_:1},8,["label"]),m(f,{prop:"imageMode",label:e.$t("model.field.imageMode")},{default:i((()=>[m($,{modelValue:s(a).imageMode,"onUpdate:modelValue":l[31]||(l[31]=e=>s(a).imageMode=e),clearable:"",class:"w-full"},{default:i((()=>[(o(),n(r,null,p(["cut","resize","manual","none"],(l=>m(_,{key:l,value:l,label:e.$t(`model.field.imageMode.${l}`)},null,8,["value","label"]))),64))])),_:1},8,["modelValue"])])),_:1},8,["label"])],64)):V("",!0),["imageUpload","videoUpload","audioUpload","fileUpload"].includes(s(a).type)?(o(),n(r,{key:17},[m(f,{prop:"fileAccept"},{label:i((()=>[m(k,{message:"model.field.fileAccept",help:"","fix-width":!1})])),default:i((()=>[m(d,{modelValue:s(a).fileAccept,"onUpdate:modelValue":l[32]||(l[32]=e=>s(a).fileAccept=e),maxlength:"255"},null,8,["modelValue"])])),_:1}),m(f,{prop:"fileMaxSize",rules:{type:"number",min:0,max:65535,message:()=>e.$t("v.range",{min:0,max:65535})}},{label:i((()=>[m(k,{message:"model.field.fileMaxSize",help:"","fix-width":!1})])),default:i((()=>[m(d,{modelValue:s(a).fileMaxSize,"onUpdate:modelValue":l[33]||(l[33]=e=>s(a).fileMaxSize=e),modelModifiers:{number:!0},maxlength:"5"},null,8,["modelValue"])])),_:1},8,["rules"])],64)):V("",!0),["tinyEditor"].includes(s(a).type)?(o(),n(r,{key:18},[m(f,{prop:"minHeight",label:e.$t("model.field.minHeight")},{default:i((()=>[m(h,{modelValue:s(a).minHeight,"onUpdate:modelValue":l[34]||(l[34]=e=>s(a).minHeight=e),min:1,max:65535},null,8,["modelValue"])])),_:1},8,["label"]),m(f,{prop:"maxHeight",label:e.$t("model.field.maxHeight")},{default:i((()=>[m(h,{modelValue:s(a).maxHeight,"onUpdate:modelValue":l[35]||(l[35]=e=>s(a).maxHeight=e),min:1,max:65535},null,8,["modelValue"])])),_:1},8,["label"])],64)):V("",!0)],64)}}}),ue={class:"dialog-full"},ie={class:"drag-component"},me=["onClick"],ne=["onClick"],pe=a({name:"ModelCustomFields",__name:"ModelCustomFields",props:{modelValue:{type:Boolean,required:!0},beanId:{type:String,default:null}},emits:{"update:modelValue":null},setup(e,{emit:l}){const a=e,p=l,{beanId:r,modelValue:_}=f(a),{t:w}=y(),T=d({}),S=d({}),q=d(),M=d(!1),C=d(),I=d(),H=d("attribute"),F=d(!1),j=d([{label:w("model.fieldType.text"),type:"text"},{label:w("model.fieldType.textarea"),type:"textarea"},{label:w("model.fieldType.number"),type:"number"},{label:w("model.fieldType.slider"),type:"slider"},{label:w("model.fieldType.date"),type:"date"},{label:w("model.fieldType.color"),type:"color"},{label:w("model.fieldType.radio"),type:"radio"},{label:w("model.fieldType.checkbox"),type:"checkbox"},{label:w("model.fieldType.select"),type:"select"},{label:w("model.fieldType.multipleSelect"),type:"multipleSelect"},{label:w("model.fieldType.switch"),type:"switch"},{label:w("model.fieldType.imageUpload"),type:"imageUpload"},{label:w("model.fieldType.videoUpload"),type:"videoUpload"},{label:w("model.fieldType.audioUpload"),type:"audioUpload"},{label:w("model.fieldType.fileUpload"),type:"fileUpload"},{label:w("model.fieldType.tinyEditor"),type:"tinyEditor"}]),z=d([]);v(_,(async()=>{_.value&&null!=r?.value&&(T.value=await O(r.value),z.value=JSON.parse(T.value.customs||"[]"),z.value.length>0?[C.value]=z.value:C.value=void 0)}));const L=e=>{const l={code:`field${Date.now()}`,type:e.type,name:e.label,double:!1,dataType:-1!==["number","slider"].indexOf(e.type)?"number":"string",clob:-1!==["tinyEditor"].indexOf(e.type)};return I.value=l,l},K=e=>{e.from!==e.to&&(C.value=I.value)},W=async()=>{F.value=!0;try{z.value.length>0?q.value.validate((async e=>{e&&await E({...T.value,customs:JSON.stringify(z.value)})})):await E({...T.value,customs:JSON.stringify(z.value)}),$.success(w("success"))}finally{F.value=!1,p("update:modelValue",!1)}};return(l,a)=>{const d=t("el-scrollbar"),p=t("el-aside"),r=t("el-button"),f=t("el-header"),y=t("el-form-item"),v=t("el-icon"),_=t("el-col"),$=t("el-form"),w=t("el-main"),T=t("el-container"),I=t("el-tab-pane"),O=t("el-tabs"),E=t("el-dialog");return o(),n("div",ue,[m(E,{title:l.$t("model.fun.customFields"),"model-value":e.modelValue,"destroy-on-close":"",fullscreen:"","onUpdate:modelValue":a[3]||(a[3]=e=>l.$emit("update:modelValue",e))},{default:i((()=>[m(T,{class:"border-t",style:{height:"calc(100vh - 65px)"}},{default:i((()=>[m(p,{width:"240px"},{default:i((()=>[m(d,{class:"h-full"},{default:i((()=>[m(s(Z),{list:j.value,group:{name:"components",pull:"clone",put:!1},sort:!1,clone:L,"item-key":"label",onEnd:K},{item:i((({element:e})=>[g("div",ie,b(e.label),1)])),_:1},8,["list"])])),_:1})])),_:1}),m(T,{class:"border-l border-r"},{default:i((()=>[m(f,{height:"auto",class:"px-2 py-1"},{default:i((()=>[m(r,{loading:F.value,type:"primary",onClick:h(W,["prevent"])},{default:i((()=>[c(b(l.$t("save")),1)])),_:1},8,["loading"])])),_:1}),m(w,{class:"p-0 border-t"},{default:i((()=>[m(d,{class:"h-full p-2 drawing-board"},{default:i((()=>[m($,{model:S.value,"label-width":"150px",class:"h-full"},{default:i((()=>[m(s(Z),{list:z.value,class:"content-start min-h-full mx-0",tag:"el-row","component-data":{gutter:8},animation:250,group:"components","item-key":"code",onStart:a[0]||(a[0]=()=>M.value=!0),onEnd:a[1]||(a[1]=()=>M.value=!1)},{item:i((({element:e})=>[m(_,{span:e.double?12:24,class:"relative"},{default:i((()=>[m(y,{required:e.required,"show-message":!1,class:"py-3 mb-0"},{label:i((()=>[m(k,{label:e.name},null,8,["label"])])),default:i((()=>[m(ee,{modelValue:e.defaultValue,"onUpdate:modelValue":l=>e.defaultValue=l,"model-key":e.defaultValueKey,"onUpdate:modelKey":l=>e.defaultValueKey=l,field:e},null,8,["modelValue","onUpdate:modelValue","model-key","onUpdate:modelKey","field"])])),_:2},1032,["required"]),g("div",{class:U(["drag-mask",M.value||C.value===e?null:"hover:opacity-10",C.value===e?"drag-mask-selected":null]),onClick:()=>(async e=>{C.value?q.value.validate((l=>{l&&(C.value=e)})):C.value=e})(e)},null,10,me),g("div",{class:U(["drag-close",C.value!==e?"hidden":null]),onClick:()=>(e=>{const l=z.value.indexOf(e);z.value.splice(l,1);const{length:a}=z.value;C.value=a<=0?void 0:l<a?z.value[l]:z.value[a-1]})(e)},[m(v,{class:"text-danger"},{default:i((()=>[m(s(x))])),_:1})],10,ne)])),_:2},1032,["span"])])),_:1},8,["list"])])),_:1},8,["model"])])),_:1})])),_:1})])),_:1}),m(p,{class:"w-64 right-panel"},{default:i((()=>[m(d,{class:"h-full pt-0.5 pb-3"},{default:i((()=>[m(O,{modelValue:H.value,"onUpdate:modelValue":a[2]||(a[2]=e=>H.value=e),stretch:""},{default:i((()=>[m(I,{label:l.$t("model.attribute"),name:"attribute",class:"px-2"},{default:i((()=>[m($,{ref_key:"selectedForm",ref:q,model:C.value},{default:i((()=>[C.value?(o(),u(oe,{key:0,selected:C.value},null,8,["selected"])):V("",!0)])),_:1},8,["model"])])),_:1},8,["label"])])),_:1},8,["modelValue"])])),_:1})])),_:1})])),_:1})])),_:1},8,["title","model-value"])])}}}),re=T(pe,[["__scopeId","data-v-e377323a"]]),se={class:"mb-3"},ce={class:"app-block"};e("default",a({name:"ModelList",__name:"ModelList",setup(e){const{t:l}=y(),a=d({}),f=d("article"),v=d(),h=d(),_=d([]),w=d([]),k=d(!1),U=d(!1),x=d(!1),T=d(!1),O=d(),K=S((()=>_.value.map((e=>e.id)))),E=d(!1),A=async()=>{k.value=!0;try{_.value=await B({...j(a.value),type:f.value,Q_OrderBy:v.value}),E.value=Object.values(a.value).filter((e=>void 0!==e&&""!==e)).length>0||void 0!==v.value}finally{k.value=!1}};q(A);const P=({column:e,prop:l,order:a})=>{v.value=l&&a?(e.sortBy??l)+("descending"===a?"_desc":""):void 0,A()},Y=()=>A(),X=()=>{h.value.clearSort(),z(a.value),v.value=void 0,A()},Z=e=>{O.value=e,U.value=!0},ee=async e=>{await W(e),A(),$.success(l("success"))},le=e=>e.id>10;return(e,l)=>{const d=t("el-button"),y=t("el-popconfirm"),v=t("el-radio-button"),$=t("el-radio-group"),S=t("el-table-column"),q=t("el-tag"),j=t("el-table"),z=M("loading");return o(),n("div",null,[g("div",se,[m(s(D),{params:a.value,onSearch:Y,onReset:X},{default:i((()=>[m(s(N),{label:e.$t("model.name"),name:"Q_Contains_name"},null,8,["label"])])),_:1},8,["params"])]),g("div",null,[m(d,{type:"primary",disabled:s(C)("model:create"),icon:s(I),onClick:l[0]||(l[0]=()=>(O.value=void 0,void(U.value=!0)))},{default:i((()=>[c(b(e.$t("add")),1)])),_:1},8,["disabled","icon"]),m(y,{title:e.$t("confirmDelete"),onConfirm:l[1]||(l[1]=()=>ee(w.value.map((e=>e.id))))},{reference:i((()=>[m(d,{disabled:w.value.length<=0||s(C)("model:delete"),icon:s(H)},{default:i((()=>[c(b(e.$t("delete")),1)])),_:1},8,["disabled","icon"])])),_:1},8,["title"]),m(G,{disabled:w.value.length<=0||E.value||s(C)("org:update"),class:"ml-2",onMove:l[2]||(l[2]=e=>(async(e,l)=>{const a=L(e,_.value,l);await J(a.map((e=>e.id)))})(w.value,e))},null,8,["disabled"]),m(s(R),{name:"model",class:"ml-2"})]),m($,{modelValue:f.value,"onUpdate:modelValue":l[3]||(l[3]=e=>f.value=e),class:"mt-3",onChange:l[4]||(l[4]=()=>A())},{default:i((()=>[(o(),n(r,null,p(["article","channel","form","site","global"],(l=>m(v,{key:l,value:l},{default:i((()=>[c(b(e.$t(`model.type.${l}`)),1)])),_:2},1032,["value"]))),64))])),_:1},8,["modelValue"]),g("div",ce,[F((o(),u(j,{ref_key:"table",ref:h,data:_.value,onSelectionChange:l[5]||(l[5]=e=>w.value=e),onRowDblclick:l[6]||(l[6]=e=>Z(e.id)),onSortChange:P},{default:i((()=>[m(s(Q),{name:"model"},{default:i((()=>[m(S,{type:"selection",selectable:le,width:"45"}),m(S,{property:"id",label:"ID",width:"170",sortable:"custom"}),m(S,{property:"name",label:e.$t("model.name"),sortable:"custom","show-overflow-tooltip":""},null,8,["label"]),m(S,{property:"type",label:e.$t("model.type"),sortable:"custom",formatter:l=>e.$t(`model.type.${l.type}`)},null,8,["label","formatter"]),m(S,{property:"scope",label:e.$t("model.scope"),sortable:"custom"},{default:i((({row:l})=>[2===l.scope?(o(),u(q,{key:0,type:"success",size:"small"},{default:i((()=>[c(b(e.$t(`model.scope.${l.scope}`)),1)])),_:2},1024)):(o(),u(q,{key:1,type:"info",size:"small"},{default:i((()=>[c(b(e.$t(`model.scope.${l.scope}`)),1)])),_:2},1024))])),_:1},8,["label"]),m(S,{label:e.$t("table.action")},{default:i((({row:l})=>[m(d,{type:"primary",disabled:s(C)("model:update"),size:"small",link:"",onClick:()=>Z(l.id)},{default:i((()=>[c(b(e.$t("edit")),1)])),_:2},1032,["disabled","onClick"]),["form","global","site"].includes(l.type)?V("",!0):(o(),u(d,{key:0,type:"primary",disabled:s(C)("model:update"),size:"small",link:"",onClick:()=>{return e=l.id,O.value=e,void(x.value=!0);var e}},{default:i((()=>[c(b(e.$t("model.fun.systemFields")),1)])),_:2},1032,["disabled","onClick"])),m(d,{type:"primary",disabled:s(C)("model:update"),size:"small",link:"",onClick:()=>{return e=l.id,O.value=e,void(T.value=!0);var e}},{default:i((()=>[c(b(e.$t("model.fun.customFields")),1)])),_:2},1032,["disabled","onClick"]),le(l)?(o(),u(y,{key:1,title:e.$t("confirmDelete"),onConfirm:()=>ee([l.id])},{reference:i((()=>[m(d,{type:"primary",disabled:s(C)("model:delete"),size:"small",link:""},{default:i((()=>[c(b(e.$t("delete")),1)])),_:1},8,["disabled"])])),_:2},1032,["title","onConfirm"])):V("",!0)])),_:1},8,["label"])])),_:1})])),_:1},8,["data"])),[[z,k.value]])]),m(ae,{modelValue:U.value,"onUpdate:modelValue":l[7]||(l[7]=e=>U.value=e),"bean-id":O.value,"bean-ids":K.value,"model-type":f.value,onFinished:A},null,8,["modelValue","bean-id","bean-ids","model-type"]),m(te,{modelValue:x.value,"onUpdate:modelValue":l[8]||(l[8]=e=>x.value=e),"bean-id":O.value},null,8,["modelValue","bean-id"]),m(re,{modelValue:T.value,"onUpdate:modelValue":l[9]||(l[9]=e=>T.value=e),"bean-id":O.value},null,8,["modelValue","bean-id"])])}}}))}}}));
