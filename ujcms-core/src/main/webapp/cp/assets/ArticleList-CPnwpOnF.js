import{a4 as xa,a5 as ss,a6 as ls,d as $t,a7 as mn,a8 as Pn,p as Zn,U as yt,r as z,v as Nt,b as j,c as Ea,e as S,f as V,w as d,k as de,g as Si,I as Se,t as I,a9 as Ue,aa as Ze,i as p,l as O,j as T,h as ne,ab as us,_ as Ni,u as Jn,a as fr,ac as ct,ad as ka,ae as Yn,m as Rn,af as cs,ag as Sa,ah as Aa,ai as Ta,aj as Ca,ak as Ra,E as Ut,al as Da,am as ds,Y as ps,an as Ia,ao as fs,ap as ms,aq as nt,o as Na,ar as hs,as as Ce,at as $r,a3 as je,au as ys,av as vs,aw as gs,ax as bs,ay as _s,az as ws,aA as Vr,aB as xs,P as ci,C as Es,aC as ks,aD as Ss,aE as As,aF as Ts,aG as Cs,aH as Rs,aI as Ds,aJ as Is,aK as Ns,W as Ms}from"./index-CfDPjNFe.js";import{S as Ps}from"./sortable.esm-BmjBFecF.js";import{E as $s,x as Vs,h as Ls,D as Wi,f as Lr,T as Bs}from"./TuiEditor-0Llayt93.js";import{t as Qn,d as Os,a as Us,b as Br}from"./tree-VGRVvCJj.js";import{i as Fs,f as qs,q as Ma,a as js}from"./config-CI2h6Abn.js";import{j as zs,d as Ws,e as Hs,f as Pa,g as Or,u as Ys,h as $a,i as Ks,k as Gs,l as Qs,m as mr,n as Xs,p as Zs,o as Js,t as el,r as tl,s as nl,v as Va,w as La,x as Ba,y as Oa,z as il,A as rl,B as al,C as ol,D as sl,E as ll,F as Ur,G as ul}from"./content-SKd4otdD.js";import{_ as cl,a as qe,b as dl,c as pl}from"./QueryItem.vue_vue_type_script_setup_true_lang-BiDqtMxm.js";import{d as fl}from"./duration-CxEVT5jV.js";import{q as ml,a as hl,v as yl,b as vl,c as gl,d as bl}from"./system-dDBNDH9Z.js";import{q as _l,a as wl,b as xl,c as El}from"./user-ClNn6o5G.js";import{a as Fr,m as qr,g as jr}from"./data-CtWb6y_Y.js";import{_ as zr}from"./FieldItem.vue_vue_type_script_setup_true_lang-r3AerHPx.js";import{_ as kl}from"./DialogForm.vue_vue_type_script_setup_true_lang-BMzG1_v9.js";import{T as Sl}from"./Tinymce-8guVwcgr.js";import{I as Al,a as Tl}from"./FileListUpload.vue_vue_type_style_index_0_scoped_8f839ee5_lang-CtpUrYuH.js";import{d as Cl}from"./vuedraggable.umd-BEqCtw-l.js";import{B as zn}from"./BaseUpload-fTr71bzQ.js";import{_ as Rl,a as Dl}from"./BlockItemForm.vue_vue_type_script_setup_true_lang-BcmgKcoo.js";import"./index-Uqvazc4q.js";/* empty css                                                                   */var ve;(function(e){e[e.Tab=9]="Tab",e[e.NewLine=10]="NewLine",e[e.FormFeed=12]="FormFeed",e[e.CarriageReturn=13]="CarriageReturn",e[e.Space=32]="Space",e[e.ExclamationMark=33]="ExclamationMark",e[e.Number=35]="Number",e[e.Amp=38]="Amp",e[e.SingleQuote=39]="SingleQuote",e[e.DoubleQuote=34]="DoubleQuote",e[e.Dash=45]="Dash",e[e.Slash=47]="Slash",e[e.Zero=48]="Zero",e[e.Nine=57]="Nine",e[e.Semi=59]="Semi",e[e.Lt=60]="Lt",e[e.Eq=61]="Eq",e[e.Gt=62]="Gt",e[e.Questionmark=63]="Questionmark",e[e.UpperA=65]="UpperA",e[e.LowerA=97]="LowerA",e[e.UpperF=70]="UpperF",e[e.LowerF=102]="LowerF",e[e.UpperZ=90]="UpperZ",e[e.LowerZ=122]="LowerZ",e[e.LowerX=120]="LowerX",e[e.OpeningSquareBracket=91]="OpeningSquareBracket"})(ve||(ve={}));var W;(function(e){e[e.Text=1]="Text",e[e.BeforeTagName=2]="BeforeTagName",e[e.InTagName=3]="InTagName",e[e.InSelfClosingTag=4]="InSelfClosingTag",e[e.BeforeClosingTagName=5]="BeforeClosingTagName",e[e.InClosingTagName=6]="InClosingTagName",e[e.AfterClosingTagName=7]="AfterClosingTagName",e[e.BeforeAttributeName=8]="BeforeAttributeName",e[e.InAttributeName=9]="InAttributeName",e[e.AfterAttributeName=10]="AfterAttributeName",e[e.BeforeAttributeValue=11]="BeforeAttributeValue",e[e.InAttributeValueDq=12]="InAttributeValueDq",e[e.InAttributeValueSq=13]="InAttributeValueSq",e[e.InAttributeValueNq=14]="InAttributeValueNq",e[e.BeforeDeclaration=15]="BeforeDeclaration",e[e.InDeclaration=16]="InDeclaration",e[e.InProcessingInstruction=17]="InProcessingInstruction",e[e.BeforeComment=18]="BeforeComment",e[e.CDATASequence=19]="CDATASequence",e[e.InSpecialComment=20]="InSpecialComment",e[e.InCommentLike=21]="InCommentLike",e[e.BeforeSpecialS=22]="BeforeSpecialS",e[e.BeforeSpecialT=23]="BeforeSpecialT",e[e.SpecialStartSequence=24]="SpecialStartSequence",e[e.InSpecialTag=25]="InSpecialTag",e[e.InEntity=26]="InEntity"})(W||(W={}));function Ht(e){return e===ve.Space||e===ve.NewLine||e===ve.Tab||e===ve.FormFeed||e===ve.CarriageReturn}function di(e){return e===ve.Slash||e===ve.Gt||Ht(e)}function Il(e){return e>=ve.LowerA&&e<=ve.LowerZ||e>=ve.UpperA&&e<=ve.UpperZ}var Ft;(function(e){e[e.NoValue=0]="NoValue",e[e.Unquoted=1]="Unquoted",e[e.Single=2]="Single",e[e.Double=3]="Double"})(Ft||(Ft={}));const rt={Cdata:new Uint8Array([67,68,65,84,65,91]),CdataEnd:new Uint8Array([93,93,62]),CommentEnd:new Uint8Array([45,45,62]),ScriptEnd:new Uint8Array([60,47,115,99,114,105,112,116]),StyleEnd:new Uint8Array([60,47,115,116,121,108,101]),TitleEnd:new Uint8Array([60,47,116,105,116,108,101]),TextareaEnd:new Uint8Array([60,47,116,101,120,116,97,114,101,97])};class Nl{constructor({xmlMode:t=!1,decodeEntities:n=!0},i){this.cbs=i,this.state=W.Text,this.buffer="",this.sectionStart=0,this.index=0,this.entityStart=0,this.baseState=W.Text,this.isSpecial=!1,this.running=!0,this.offset=0,this.currentSequence=void 0,this.sequenceIndex=0,this.xmlMode=t,this.decodeEntities=n,this.entityDecoder=new $s(t?Vs:Ls,(r,a)=>this.emitCodePoint(r,a))}reset(){this.state=W.Text,this.buffer="",this.sectionStart=0,this.index=0,this.baseState=W.Text,this.currentSequence=void 0,this.running=!0,this.offset=0}write(t){this.offset+=this.buffer.length,this.buffer=t,this.parse()}end(){this.running&&this.finish()}pause(){this.running=!1}resume(){this.running=!0,this.index<this.buffer.length+this.offset&&this.parse()}stateText(t){t===ve.Lt||!this.decodeEntities&&this.fastForwardTo(ve.Lt)?(this.index>this.sectionStart&&this.cbs.ontext(this.sectionStart,this.index),this.state=W.BeforeTagName,this.sectionStart=this.index):this.decodeEntities&&t===ve.Amp&&this.startEntity()}stateSpecialStartSequence(t){const n=this.sequenceIndex===this.currentSequence.length;if(!(n?di(t):(t|32)===this.currentSequence[this.sequenceIndex]))this.isSpecial=!1;else if(!n){this.sequenceIndex++;return}this.sequenceIndex=0,this.state=W.InTagName,this.stateInTagName(t)}stateInSpecialTag(t){if(this.sequenceIndex===this.currentSequence.length){if(t===ve.Gt||Ht(t)){const n=this.index-this.currentSequence.length;if(this.sectionStart<n){const i=this.index;this.index=n,this.cbs.ontext(this.sectionStart,n),this.index=i}this.isSpecial=!1,this.sectionStart=n+2,this.stateInClosingTagName(t);return}this.sequenceIndex=0}(t|32)===this.currentSequence[this.sequenceIndex]?this.sequenceIndex+=1:this.sequenceIndex===0?this.currentSequence===rt.TitleEnd?this.decodeEntities&&t===ve.Amp&&this.startEntity():this.fastForwardTo(ve.Lt)&&(this.sequenceIndex=1):this.sequenceIndex=+(t===ve.Lt)}stateCDATASequence(t){t===rt.Cdata[this.sequenceIndex]?++this.sequenceIndex===rt.Cdata.length&&(this.state=W.InCommentLike,this.currentSequence=rt.CdataEnd,this.sequenceIndex=0,this.sectionStart=this.index+1):(this.sequenceIndex=0,this.state=W.InDeclaration,this.stateInDeclaration(t))}fastForwardTo(t){for(;++this.index<this.buffer.length+this.offset;)if(this.buffer.charCodeAt(this.index-this.offset)===t)return!0;return this.index=this.buffer.length+this.offset-1,!1}stateInCommentLike(t){t===this.currentSequence[this.sequenceIndex]?++this.sequenceIndex===this.currentSequence.length&&(this.currentSequence===rt.CdataEnd?this.cbs.oncdata(this.sectionStart,this.index,2):this.cbs.oncomment(this.sectionStart,this.index,2),this.sequenceIndex=0,this.sectionStart=this.index+1,this.state=W.Text):this.sequenceIndex===0?this.fastForwardTo(this.currentSequence[0])&&(this.sequenceIndex=1):t!==this.currentSequence[this.sequenceIndex-1]&&(this.sequenceIndex=0)}isTagStartChar(t){return this.xmlMode?!di(t):Il(t)}startSpecial(t,n){this.isSpecial=!0,this.currentSequence=t,this.sequenceIndex=n,this.state=W.SpecialStartSequence}stateBeforeTagName(t){if(t===ve.ExclamationMark)this.state=W.BeforeDeclaration,this.sectionStart=this.index+1;else if(t===ve.Questionmark)this.state=W.InProcessingInstruction,this.sectionStart=this.index+1;else if(this.isTagStartChar(t)){const n=t|32;this.sectionStart=this.index,this.xmlMode?this.state=W.InTagName:n===rt.ScriptEnd[2]?this.state=W.BeforeSpecialS:n===rt.TitleEnd[2]?this.state=W.BeforeSpecialT:this.state=W.InTagName}else t===ve.Slash?this.state=W.BeforeClosingTagName:(this.state=W.Text,this.stateText(t))}stateInTagName(t){di(t)&&(this.cbs.onopentagname(this.sectionStart,this.index),this.sectionStart=-1,this.state=W.BeforeAttributeName,this.stateBeforeAttributeName(t))}stateBeforeClosingTagName(t){Ht(t)||(t===ve.Gt?this.state=W.Text:(this.state=this.isTagStartChar(t)?W.InClosingTagName:W.InSpecialComment,this.sectionStart=this.index))}stateInClosingTagName(t){(t===ve.Gt||Ht(t))&&(this.cbs.onclosetag(this.sectionStart,this.index),this.sectionStart=-1,this.state=W.AfterClosingTagName,this.stateAfterClosingTagName(t))}stateAfterClosingTagName(t){(t===ve.Gt||this.fastForwardTo(ve.Gt))&&(this.state=W.Text,this.sectionStart=this.index+1)}stateBeforeAttributeName(t){t===ve.Gt?(this.cbs.onopentagend(this.index),this.isSpecial?(this.state=W.InSpecialTag,this.sequenceIndex=0):this.state=W.Text,this.sectionStart=this.index+1):t===ve.Slash?this.state=W.InSelfClosingTag:Ht(t)||(this.state=W.InAttributeName,this.sectionStart=this.index)}stateInSelfClosingTag(t){t===ve.Gt?(this.cbs.onselfclosingtag(this.index),this.state=W.Text,this.sectionStart=this.index+1,this.isSpecial=!1):Ht(t)||(this.state=W.BeforeAttributeName,this.stateBeforeAttributeName(t))}stateInAttributeName(t){(t===ve.Eq||di(t))&&(this.cbs.onattribname(this.sectionStart,this.index),this.sectionStart=this.index,this.state=W.AfterAttributeName,this.stateAfterAttributeName(t))}stateAfterAttributeName(t){t===ve.Eq?this.state=W.BeforeAttributeValue:t===ve.Slash||t===ve.Gt?(this.cbs.onattribend(Ft.NoValue,this.sectionStart),this.sectionStart=-1,this.state=W.BeforeAttributeName,this.stateBeforeAttributeName(t)):Ht(t)||(this.cbs.onattribend(Ft.NoValue,this.sectionStart),this.state=W.InAttributeName,this.sectionStart=this.index)}stateBeforeAttributeValue(t){t===ve.DoubleQuote?(this.state=W.InAttributeValueDq,this.sectionStart=this.index+1):t===ve.SingleQuote?(this.state=W.InAttributeValueSq,this.sectionStart=this.index+1):Ht(t)||(this.sectionStart=this.index,this.state=W.InAttributeValueNq,this.stateInAttributeValueNoQuotes(t))}handleInAttributeValue(t,n){t===n||!this.decodeEntities&&this.fastForwardTo(n)?(this.cbs.onattribdata(this.sectionStart,this.index),this.sectionStart=-1,this.cbs.onattribend(n===ve.DoubleQuote?Ft.Double:Ft.Single,this.index+1),this.state=W.BeforeAttributeName):this.decodeEntities&&t===ve.Amp&&this.startEntity()}stateInAttributeValueDoubleQuotes(t){this.handleInAttributeValue(t,ve.DoubleQuote)}stateInAttributeValueSingleQuotes(t){this.handleInAttributeValue(t,ve.SingleQuote)}stateInAttributeValueNoQuotes(t){Ht(t)||t===ve.Gt?(this.cbs.onattribdata(this.sectionStart,this.index),this.sectionStart=-1,this.cbs.onattribend(Ft.Unquoted,this.index),this.state=W.BeforeAttributeName,this.stateBeforeAttributeName(t)):this.decodeEntities&&t===ve.Amp&&this.startEntity()}stateBeforeDeclaration(t){t===ve.OpeningSquareBracket?(this.state=W.CDATASequence,this.sequenceIndex=0):this.state=t===ve.Dash?W.BeforeComment:W.InDeclaration}stateInDeclaration(t){(t===ve.Gt||this.fastForwardTo(ve.Gt))&&(this.cbs.ondeclaration(this.sectionStart,this.index),this.state=W.Text,this.sectionStart=this.index+1)}stateInProcessingInstruction(t){(t===ve.Gt||this.fastForwardTo(ve.Gt))&&(this.cbs.onprocessinginstruction(this.sectionStart,this.index),this.state=W.Text,this.sectionStart=this.index+1)}stateBeforeComment(t){t===ve.Dash?(this.state=W.InCommentLike,this.currentSequence=rt.CommentEnd,this.sequenceIndex=2,this.sectionStart=this.index+1):this.state=W.InDeclaration}stateInSpecialComment(t){(t===ve.Gt||this.fastForwardTo(ve.Gt))&&(this.cbs.oncomment(this.sectionStart,this.index,0),this.state=W.Text,this.sectionStart=this.index+1)}stateBeforeSpecialS(t){const n=t|32;n===rt.ScriptEnd[3]?this.startSpecial(rt.ScriptEnd,4):n===rt.StyleEnd[3]?this.startSpecial(rt.StyleEnd,4):(this.state=W.InTagName,this.stateInTagName(t))}stateBeforeSpecialT(t){const n=t|32;n===rt.TitleEnd[3]?this.startSpecial(rt.TitleEnd,4):n===rt.TextareaEnd[3]?this.startSpecial(rt.TextareaEnd,4):(this.state=W.InTagName,this.stateInTagName(t))}startEntity(){this.baseState=this.state,this.state=W.InEntity,this.entityStart=this.index,this.entityDecoder.startEntity(this.xmlMode?Wi.Strict:this.baseState===W.Text||this.baseState===W.InSpecialTag?Wi.Legacy:Wi.Attribute)}stateInEntity(){const t=this.entityDecoder.write(this.buffer,this.index-this.offset);t>=0?(this.state=this.baseState,t===0&&(this.index=this.entityStart)):this.index=this.offset+this.buffer.length-1}cleanup(){this.running&&this.sectionStart!==this.index&&(this.state===W.Text||this.state===W.InSpecialTag&&this.sequenceIndex===0?(this.cbs.ontext(this.sectionStart,this.index),this.sectionStart=this.index):(this.state===W.InAttributeValueDq||this.state===W.InAttributeValueSq||this.state===W.InAttributeValueNq)&&(this.cbs.onattribdata(this.sectionStart,this.index),this.sectionStart=this.index))}shouldContinue(){return this.index<this.buffer.length+this.offset&&this.running}parse(){for(;this.shouldContinue();){const t=this.buffer.charCodeAt(this.index-this.offset);switch(this.state){case W.Text:{this.stateText(t);break}case W.SpecialStartSequence:{this.stateSpecialStartSequence(t);break}case W.InSpecialTag:{this.stateInSpecialTag(t);break}case W.CDATASequence:{this.stateCDATASequence(t);break}case W.InAttributeValueDq:{this.stateInAttributeValueDoubleQuotes(t);break}case W.InAttributeName:{this.stateInAttributeName(t);break}case W.InCommentLike:{this.stateInCommentLike(t);break}case W.InSpecialComment:{this.stateInSpecialComment(t);break}case W.BeforeAttributeName:{this.stateBeforeAttributeName(t);break}case W.InTagName:{this.stateInTagName(t);break}case W.InClosingTagName:{this.stateInClosingTagName(t);break}case W.BeforeTagName:{this.stateBeforeTagName(t);break}case W.AfterAttributeName:{this.stateAfterAttributeName(t);break}case W.InAttributeValueSq:{this.stateInAttributeValueSingleQuotes(t);break}case W.BeforeAttributeValue:{this.stateBeforeAttributeValue(t);break}case W.BeforeClosingTagName:{this.stateBeforeClosingTagName(t);break}case W.AfterClosingTagName:{this.stateAfterClosingTagName(t);break}case W.BeforeSpecialS:{this.stateBeforeSpecialS(t);break}case W.BeforeSpecialT:{this.stateBeforeSpecialT(t);break}case W.InAttributeValueNq:{this.stateInAttributeValueNoQuotes(t);break}case W.InSelfClosingTag:{this.stateInSelfClosingTag(t);break}case W.InDeclaration:{this.stateInDeclaration(t);break}case W.BeforeDeclaration:{this.stateBeforeDeclaration(t);break}case W.BeforeComment:{this.stateBeforeComment(t);break}case W.InProcessingInstruction:{this.stateInProcessingInstruction(t);break}case W.InEntity:{this.stateInEntity();break}}this.index++}this.cleanup()}finish(){this.state===W.InEntity&&(this.entityDecoder.end(),this.state=this.baseState),this.handleTrailingData(),this.cbs.onend()}handleTrailingData(){const t=this.buffer.length+this.offset;this.sectionStart>=t||(this.state===W.InCommentLike?this.currentSequence===rt.CdataEnd?this.cbs.oncdata(this.sectionStart,t,0):this.cbs.oncomment(this.sectionStart,t,0):this.state===W.InTagName||this.state===W.BeforeAttributeName||this.state===W.BeforeAttributeValue||this.state===W.AfterAttributeName||this.state===W.InAttributeName||this.state===W.InAttributeValueSq||this.state===W.InAttributeValueDq||this.state===W.InAttributeValueNq||this.state===W.InClosingTagName||this.cbs.ontext(this.sectionStart,t))}emitCodePoint(t,n){this.baseState!==W.Text&&this.baseState!==W.InSpecialTag?(this.sectionStart<this.entityStart&&this.cbs.onattribdata(this.sectionStart,this.entityStart),this.sectionStart=this.entityStart+n,this.index=this.sectionStart-1,this.cbs.onattribentity(t)):(this.sectionStart<this.entityStart&&this.cbs.ontext(this.sectionStart,this.entityStart),this.sectionStart=this.entityStart+n,this.index=this.sectionStart-1,this.cbs.ontextentity(t,this.sectionStart))}}const Sn=new Set(["input","option","optgroup","select","button","datalist","textarea"]),Ve=new Set(["p"]),Wr=new Set(["thead","tbody"]),Hr=new Set(["dd","dt"]),Yr=new Set(["rt","rp"]),Ml=new Map([["tr",new Set(["tr","th","td"])],["th",new Set(["th"])],["td",new Set(["thead","th","td"])],["body",new Set(["head","link","script"])],["li",new Set(["li"])],["p",Ve],["h1",Ve],["h2",Ve],["h3",Ve],["h4",Ve],["h5",Ve],["h6",Ve],["select",Sn],["input",Sn],["output",Sn],["button",Sn],["datalist",Sn],["textarea",Sn],["option",new Set(["option"])],["optgroup",new Set(["optgroup","option"])],["dd",Hr],["dt",Hr],["address",Ve],["article",Ve],["aside",Ve],["blockquote",Ve],["details",Ve],["div",Ve],["dl",Ve],["fieldset",Ve],["figcaption",Ve],["figure",Ve],["footer",Ve],["form",Ve],["header",Ve],["hr",Ve],["main",Ve],["nav",Ve],["ol",Ve],["pre",Ve],["section",Ve],["table",Ve],["ul",Ve],["rt",Yr],["rp",Yr],["tbody",Wr],["tfoot",Wr]]),Pl=new Set(["area","base","basefont","br","col","command","embed","frame","hr","img","input","isindex","keygen","link","meta","param","source","track","wbr"]),Kr=new Set(["math","svg"]),Gr=new Set(["mi","mo","mn","ms","mtext","annotation-xml","foreignobject","desc","title"]),$l=/\s|\//;let Vl=class{constructor(t,n={}){var i,r,a,s,u,c;this.options=n,this.startIndex=0,this.endIndex=0,this.openTagStart=0,this.tagname="",this.attribname="",this.attribvalue="",this.attribs=null,this.stack=[],this.buffers=[],this.bufferOffset=0,this.writeIndex=0,this.ended=!1,this.cbs=t!=null?t:{},this.htmlMode=!this.options.xmlMode,this.lowerCaseTagNames=(i=n.lowerCaseTags)!==null&&i!==void 0?i:this.htmlMode,this.lowerCaseAttributeNames=(r=n.lowerCaseAttributeNames)!==null&&r!==void 0?r:this.htmlMode,this.recognizeSelfClosing=(a=n.recognizeSelfClosing)!==null&&a!==void 0?a:!this.htmlMode,this.tokenizer=new((s=n.Tokenizer)!==null&&s!==void 0?s:Nl)(this.options,this),this.foreignContext=[!this.htmlMode],(c=(u=this.cbs).onparserinit)===null||c===void 0||c.call(u,this)}ontext(t,n){var i,r;const a=this.getSlice(t,n);this.endIndex=n-1,(r=(i=this.cbs).ontext)===null||r===void 0||r.call(i,a),this.startIndex=n}ontextentity(t,n){var i,r;this.endIndex=n-1,(r=(i=this.cbs).ontext)===null||r===void 0||r.call(i,Lr(t)),this.startIndex=n}isVoidElement(t){return this.htmlMode&&Pl.has(t)}onopentagname(t,n){this.endIndex=n;let i=this.getSlice(t,n);this.lowerCaseTagNames&&(i=i.toLowerCase()),this.emitOpenTag(i)}emitOpenTag(t){var n,i,r,a;this.openTagStart=this.startIndex,this.tagname=t;const s=this.htmlMode&&Ml.get(t);if(s)for(;this.stack.length>0&&s.has(this.stack[0]);){const u=this.stack.shift();(i=(n=this.cbs).onclosetag)===null||i===void 0||i.call(n,u,!0)}this.isVoidElement(t)||(this.stack.unshift(t),this.htmlMode&&(Kr.has(t)?this.foreignContext.unshift(!0):Gr.has(t)&&this.foreignContext.unshift(!1))),(a=(r=this.cbs).onopentagname)===null||a===void 0||a.call(r,t),this.cbs.onopentag&&(this.attribs={})}endOpenTag(t){var n,i;this.startIndex=this.openTagStart,this.attribs&&((i=(n=this.cbs).onopentag)===null||i===void 0||i.call(n,this.tagname,this.attribs,t),this.attribs=null),this.cbs.onclosetag&&this.isVoidElement(this.tagname)&&this.cbs.onclosetag(this.tagname,!0),this.tagname=""}onopentagend(t){this.endIndex=t,this.endOpenTag(!1),this.startIndex=t+1}onclosetag(t,n){var i,r,a,s,u,c,b,v;this.endIndex=n;let x=this.getSlice(t,n);if(this.lowerCaseTagNames&&(x=x.toLowerCase()),this.htmlMode&&(Kr.has(x)||Gr.has(x))&&this.foreignContext.shift(),this.isVoidElement(x))this.htmlMode&&x==="br"&&((s=(a=this.cbs).onopentagname)===null||s===void 0||s.call(a,"br"),(c=(u=this.cbs).onopentag)===null||c===void 0||c.call(u,"br",{},!0),(v=(b=this.cbs).onclosetag)===null||v===void 0||v.call(b,"br",!1));else{const f=this.stack.indexOf(x);if(f!==-1)for(let U=0;U<=f;U++){const X=this.stack.shift();(r=(i=this.cbs).onclosetag)===null||r===void 0||r.call(i,X,U!==f)}else this.htmlMode&&x==="p"&&(this.emitOpenTag("p"),this.closeCurrentTag(!0))}this.startIndex=n+1}onselfclosingtag(t){this.endIndex=t,this.recognizeSelfClosing||this.foreignContext[0]?(this.closeCurrentTag(!1),this.startIndex=t+1):this.onopentagend(t)}closeCurrentTag(t){var n,i;const r=this.tagname;this.endOpenTag(t),this.stack[0]===r&&((i=(n=this.cbs).onclosetag)===null||i===void 0||i.call(n,r,!t),this.stack.shift())}onattribname(t,n){this.startIndex=t;const i=this.getSlice(t,n);this.attribname=this.lowerCaseAttributeNames?i.toLowerCase():i}onattribdata(t,n){this.attribvalue+=this.getSlice(t,n)}onattribentity(t){this.attribvalue+=Lr(t)}onattribend(t,n){var i,r;this.endIndex=n,(r=(i=this.cbs).onattribute)===null||r===void 0||r.call(i,this.attribname,this.attribvalue,t===Ft.Double?'"':t===Ft.Single?"'":t===Ft.NoValue?void 0:null),this.attribs&&!Object.prototype.hasOwnProperty.call(this.attribs,this.attribname)&&(this.attribs[this.attribname]=this.attribvalue),this.attribvalue=""}getInstructionName(t){const n=t.search($l);let i=n<0?t:t.substr(0,n);return this.lowerCaseTagNames&&(i=i.toLowerCase()),i}ondeclaration(t,n){this.endIndex=n;const i=this.getSlice(t,n);if(this.cbs.onprocessinginstruction){const r=this.getInstructionName(i);this.cbs.onprocessinginstruction("!".concat(r),"!".concat(i))}this.startIndex=n+1}onprocessinginstruction(t,n){this.endIndex=n;const i=this.getSlice(t,n);if(this.cbs.onprocessinginstruction){const r=this.getInstructionName(i);this.cbs.onprocessinginstruction("?".concat(r),"?".concat(i))}this.startIndex=n+1}oncomment(t,n,i){var r,a,s,u;this.endIndex=n,(a=(r=this.cbs).oncomment)===null||a===void 0||a.call(r,this.getSlice(t,n-i)),(u=(s=this.cbs).oncommentend)===null||u===void 0||u.call(s),this.startIndex=n+1}oncdata(t,n,i){var r,a,s,u,c,b,v,x,f,U;this.endIndex=n;const X=this.getSlice(t,n-i);!this.htmlMode||this.options.recognizeCDATA?((a=(r=this.cbs).oncdatastart)===null||a===void 0||a.call(r),(u=(s=this.cbs).ontext)===null||u===void 0||u.call(s,X),(b=(c=this.cbs).oncdataend)===null||b===void 0||b.call(c)):((x=(v=this.cbs).oncomment)===null||x===void 0||x.call(v,"[CDATA[".concat(X,"]]")),(U=(f=this.cbs).oncommentend)===null||U===void 0||U.call(f)),this.startIndex=n+1}onend(){var t,n;if(this.cbs.onclosetag){this.endIndex=this.startIndex;for(let i=0;i<this.stack.length;i++)this.cbs.onclosetag(this.stack[i],!0)}(n=(t=this.cbs).onend)===null||n===void 0||n.call(t)}reset(){var t,n,i,r;(n=(t=this.cbs).onreset)===null||n===void 0||n.call(t),this.tokenizer.reset(),this.tagname="",this.attribname="",this.attribs=null,this.stack.length=0,this.startIndex=0,this.endIndex=0,(r=(i=this.cbs).onparserinit)===null||r===void 0||r.call(i,this),this.buffers.length=0,this.foreignContext.length=0,this.foreignContext.unshift(!this.htmlMode),this.bufferOffset=0,this.writeIndex=0,this.ended=!1}parseComplete(t){this.reset(),this.end(t)}getSlice(t,n){for(;t-this.bufferOffset>=this.buffers[0].length;)this.shiftBuffer();let i=this.buffers[0].slice(t-this.bufferOffset,n-this.bufferOffset);for(;n-this.bufferOffset>this.buffers[0].length;)this.shiftBuffer(),i+=this.buffers[0].slice(0,n-this.bufferOffset);return i}shiftBuffer(){this.bufferOffset+=this.buffers[0].length,this.writeIndex--,this.buffers.shift()}write(t){var n,i;if(this.ended){(i=(n=this.cbs).onerror)===null||i===void 0||i.call(n,new Error(".write() after done!"));return}this.buffers.push(t),this.tokenizer.running&&(this.tokenizer.write(t),this.writeIndex++)}end(t){var n,i;if(this.ended){(i=(n=this.cbs).onerror)===null||i===void 0||i.call(n,new Error(".end() after done!"));return}t&&this.write(t),this.ended=!0,this.tokenizer.end()}pause(){this.tokenizer.pause()}resume(){for(this.tokenizer.resume();this.tokenizer.running&&this.writeIndex<this.buffers.length;)this.tokenizer.write(this.buffers[this.writeIndex++]);this.ended&&this.tokenizer.end()}parseChunk(t){this.write(t)}done(t){this.end(t)}};var Ie;(function(e){e.Root="root",e.Text="text",e.Directive="directive",e.Comment="comment",e.Script="script",e.Style="style",e.Tag="tag",e.CDATA="cdata",e.Doctype="doctype"})(Ie||(Ie={}));function Ll(e){return e.type===Ie.Tag||e.type===Ie.Script||e.type===Ie.Style}Ie.Root;Ie.Text;Ie.Directive;Ie.Comment;Ie.Script;Ie.Style;Ie.Tag;Ie.CDATA;Ie.Doctype;class Ua{constructor(){this.parent=null,this.prev=null,this.next=null,this.startIndex=null,this.endIndex=null}get parentNode(){return this.parent}set parentNode(t){this.parent=t}get previousSibling(){return this.prev}set previousSibling(t){this.prev=t}get nextSibling(){return this.next}set nextSibling(t){this.next=t}cloneNode(t=!1){return Wa(this,t)}}class hr extends Ua{constructor(t){super(),this.data=t}get nodeValue(){return this.data}set nodeValue(t){this.data=t}}let Zi=class extends hr{constructor(){super(...arguments),this.type=Ie.Text}get nodeType(){return 3}};class Fa extends hr{constructor(){super(...arguments),this.type=Ie.Comment}get nodeType(){return 8}}class qa extends hr{constructor(t,n){super(n),this.name=t,this.type=Ie.Directive}get nodeType(){return 1}}class yr extends Ua{constructor(t){super(),this.children=t}get firstChild(){var t;return(t=this.children[0])!==null&&t!==void 0?t:null}get lastChild(){return this.children.length>0?this.children[this.children.length-1]:null}get childNodes(){return this.children}set childNodes(t){this.children=t}}class ja extends yr{constructor(){super(...arguments),this.type=Ie.CDATA}get nodeType(){return 4}}class Ji extends yr{constructor(){super(...arguments),this.type=Ie.Root}get nodeType(){return 9}}class za extends yr{constructor(t,n,i=[],r=t==="script"?Ie.Script:t==="style"?Ie.Style:Ie.Tag){super(i),this.name=t,this.attribs=n,this.type=r}get nodeType(){return 1}get tagName(){return this.name}set tagName(t){this.name=t}get attributes(){return Object.keys(this.attribs).map(t=>{var n,i;return{name:t,value:this.attribs[t],namespace:(n=this["x-attribsNamespace"])===null||n===void 0?void 0:n[t],prefix:(i=this["x-attribsPrefix"])===null||i===void 0?void 0:i[t]}})}}function bi(e){return Ll(e)}function Bl(e){return e.type===Ie.CDATA}function er(e){return e.type===Ie.Text}function Ol(e){return e.type===Ie.Comment}function Ul(e){return e.type===Ie.Directive}function Fl(e){return e.type===Ie.Root}function ql(e){return Object.prototype.hasOwnProperty.call(e,"children")}function Wa(e,t=!1){let n;if(er(e))n=new Zi(e.data);else if(Ol(e))n=new Fa(e.data);else if(bi(e)){const i=t?Hi(e.children):[],r=new za(e.name,{...e.attribs},i);i.forEach(a=>a.parent=r),e.namespace!=null&&(r.namespace=e.namespace),e["x-attribsNamespace"]&&(r["x-attribsNamespace"]={...e["x-attribsNamespace"]}),e["x-attribsPrefix"]&&(r["x-attribsPrefix"]={...e["x-attribsPrefix"]}),n=r}else if(Bl(e)){const i=t?Hi(e.children):[],r=new ja(i);i.forEach(a=>a.parent=r),n=r}else if(Fl(e)){const i=t?Hi(e.children):[],r=new Ji(i);i.forEach(a=>a.parent=r),e["x-mode"]&&(r["x-mode"]=e["x-mode"]),n=r}else if(Ul(e)){const i=new qa(e.name,e.data);e["x-name"]!=null&&(i["x-name"]=e["x-name"],i["x-publicId"]=e["x-publicId"],i["x-systemId"]=e["x-systemId"]),n=i}else throw new Error("Not implemented yet: ".concat(e.type));return n.startIndex=e.startIndex,n.endIndex=e.endIndex,e.sourceCodeLocation!=null&&(n.sourceCodeLocation=e.sourceCodeLocation),n}function Hi(e){const t=e.map(n=>Wa(n,!0));for(let n=1;n<t.length;n++)t[n].prev=t[n-1],t[n-1].next=t[n];return t}const Qr={withStartIndices:!1,withEndIndices:!1,xmlMode:!1};class jl{constructor(t,n,i){this.dom=[],this.root=new Ji(this.dom),this.done=!1,this.tagStack=[this.root],this.lastNode=null,this.parser=null,typeof n=="function"&&(i=n,n=Qr),typeof t=="object"&&(n=t,t=void 0),this.callback=t!=null?t:null,this.options=n!=null?n:Qr,this.elementCB=i!=null?i:null}onparserinit(t){this.parser=t}onreset(){this.dom=[],this.root=new Ji(this.dom),this.done=!1,this.tagStack=[this.root],this.lastNode=null,this.parser=null}onend(){this.done||(this.done=!0,this.parser=null,this.handleCallback(null))}onerror(t){this.handleCallback(t)}onclosetag(){this.lastNode=null;const t=this.tagStack.pop();this.options.withEndIndices&&(t.endIndex=this.parser.endIndex),this.elementCB&&this.elementCB(t)}onopentag(t,n){const i=this.options.xmlMode?Ie.Tag:void 0,r=new za(t,n,void 0,i);this.addNode(r),this.tagStack.push(r)}ontext(t){const{lastNode:n}=this;if(n&&n.type===Ie.Text)n.data+=t,this.options.withEndIndices&&(n.endIndex=this.parser.endIndex);else{const i=new Zi(t);this.addNode(i),this.lastNode=i}}oncomment(t){if(this.lastNode&&this.lastNode.type===Ie.Comment){this.lastNode.data+=t;return}const n=new Fa(t);this.addNode(n),this.lastNode=n}oncommentend(){this.lastNode=null}oncdatastart(){const t=new Zi(""),n=new ja([t]);this.addNode(n),t.parent=n,this.lastNode=t}oncdataend(){this.lastNode=null}onprocessinginstruction(t,n){const i=new qa(t,n);this.addNode(i)}handleCallback(t){if(typeof this.callback=="function")this.callback(t,this.dom);else if(t)throw t}addNode(t){const n=this.tagStack[this.tagStack.length-1],i=n.children[n.children.length-1];this.options.withStartIndices&&(t.startIndex=this.parser.startIndex),this.options.withEndIndices&&(t.endIndex=this.parser.endIndex),n.children.push(t),i&&(t.prev=i,i.next=t),t.parent=n,this.lastNode=null}}function Ha(e,t){var n;return(n=e.attribs)===null||n===void 0?void 0:n[t]}function zl(e,t,n=!0,i=1/0){return Wl(e,Array.isArray(t)?t:[t],n,i)}function Wl(e,t,n,i){const r=[],a=[t],s=[0];for(;;){if(s[0]>=a[0].length){if(s.length===1)return r;a.shift(),s.shift();continue}const u=a[0][s[0]++];if(e(u)&&(r.push(u),--i<=0))return r;n&&ql(u)&&u.children.length>0&&(s.unshift(0),a.unshift(u.children))}}const Hl={tag_name(e){return typeof e=="function"?t=>bi(t)&&e(t.name):e==="*"?bi:t=>bi(t)&&t.name===e},tag_type(e){return typeof e=="function"?t=>e(t.type):t=>t.type===e},tag_contains(e){return typeof e=="function"?t=>er(t)&&e(t.data):t=>er(t)&&t.data===e}};function Ya(e,t,n=!0,i=1/0){return zl(Hl.tag_name(e),t,n,i)}function Ka(e,t){const n=new jl(void 0,t);return new Vl(n,t).end(e),n.root}var Ga={exports:{}};(function(e,t){(function(n,i){e.exports=i()})(xa,function(){return function(n,i,r){n=n||{};var a=i.prototype,s={future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"};function u(b,v,x,f){return a.fromToBase(b,v,x,f)}r.en.relativeTime=s,a.fromToBase=function(b,v,x,f,U){for(var X,J,ee,D=x.$locale().relativeTime||s,K=n.thresholds||[{l:"s",r:44,d:"second"},{l:"m",r:89},{l:"mm",r:44,d:"minute"},{l:"h",r:89},{l:"hh",r:21,d:"hour"},{l:"d",r:35},{l:"dd",r:25,d:"day"},{l:"M",r:45},{l:"MM",r:10,d:"month"},{l:"y",r:17},{l:"yy",d:"year"}],B=K.length,C=0;C<B;C+=1){var A=K[C];A.d&&(X=f?r(b).diff(x,A.d,!0):x.diff(b,A.d,!0));var N=(n.rounding||Math.round)(Math.abs(X));if(ee=X>0,N<=A.r||!A.r){N<=1&&C>0&&(A=K[C-1]);var g=D[A.l];U&&(N=U(""+N)),J=typeof g=="string"?g.replace("%d",N):g(N,v,A.l,ee);break}}if(v)return J;var R=ee?D.future:D.past;return typeof R=="function"?R(J):R.replace("%s",J)},a.to=function(b,v){return u(b,v,this,!0)},a.from=function(b,v){return u(b,v,this)};var c=function(b){return b.$u?r.utc():r()};a.toNow=function(b){return this.to(c(this),b)},a.fromNow=function(b){return this.from(c(this),b)}}})})(Ga);var Yl=Ga.exports;const Kl=ss(Yl);var Gl={exports:{}};(function(e,t){(function(n,i){e.exports=i(ls)})(xa,function(n){function i(s){return s&&typeof s=="object"&&"default"in s?s:{default:s}}var r=i(n),a={name:"zh-cn",weekdays:"星期日_星期一_星期二_星期三_星期四_星期五_星期六".split("_"),weekdaysShort:"周日_周一_周二_周三_周四_周五_周六".split("_"),weekdaysMin:"日_一_二_三_四_五_六".split("_"),months:"一月_二月_三月_四月_五月_六月_七月_八月_九月_十月_十一月_十二月".split("_"),monthsShort:"1月_2月_3月_4月_5月_6月_7月_8月_9月_10月_11月_12月".split("_"),ordinal:function(s,u){return u==="W"?s+"周":s+"日"},weekStart:1,yearStart:4,formats:{LT:"HH:mm",LTS:"HH:mm:ss",L:"YYYY/MM/DD",LL:"YYYY年M月D日",LLL:"YYYY年M月D日Ah点mm分",LLLL:"YYYY年M月D日ddddAh点mm分",l:"YYYY/M/D",ll:"YYYY年M月D日",lll:"YYYY年M月D日 HH:mm",llll:"YYYY年M月D日dddd HH:mm"},relativeTime:{future:"%s内",past:"%s前",s:"几秒",m:"1 分钟",mm:"%d 分钟",h:"1 小时",hh:"%d 小时",d:"1 天",dd:"%d 天",M:"1 个月",MM:"%d 个月",y:"1 年",yy:"%d 年"},meridiem:function(s,u){var c=100*s+u;return c<600?"凌晨":c<900?"早上":c<1100?"上午":c<1300?"中午":c<1800?"下午":"晚上"}};return r.default.locale(a,null,!0),a})})(Gl);function zt(e,t){t&&(e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}))}const ei=Object.prototype.toString,Ql=Object.prototype.hasOwnProperty;function tr(e){return e===void 0}function Cn(e){return e!==void 0}function Xl(e){return e==null}function Mt(e){return ei.call(e)==="[object Array]"}function hn(e){return ei.call(e)==="[object Object]"}function tn(e){return ei.call(e)==="[object Number]"}function en(e){const t=ei.call(e);return t==="[object Function]"||t==="[object AsyncFunction]"||t==="[object GeneratorFunction]"||t==="[object AsyncGeneratorFunction]"||t==="[object Proxy]"}function qt(e){return ei.call(e)==="[object String]"}function $n(e,t){return Ql.call(e,t)}function Pt(e,t){const n=vr(t);let i;return ae(e,function(r,a){if(n(r,a))return i=r,!1}),i}function Zl(e,t){const n=vr(t);let i=Mt(e)?-1:void 0;return ae(e,function(r,a){if(n(r,a))return i=a,!1}),i}function Dn(e,t){const n=vr(t);let i=[];return ae(e,function(r,a){n(r,a)&&i.push(r)}),i}function ae(e,t){let n,i;if(tr(e))return;const r=Mt(e)?tu:eu;for(let a in e)if($n(e,a)&&(n=e[a],i=t(n,r(a)),i===!1))return n}function In(e,t,n){return ae(e,function(i,r){n=t(n,i,r)}),n}function Qa(e,t){return!!In(e,function(n,i,r){return n&&t(i,r)},!0)}function Xa(e,t){return!!Pt(e,t)}function Jl(e,t){let n=[];return ae(e,function(i,r){n.push(t(i,r))}),n}function Xr(e){return function(t){return Qa(e,function(n,i){return t[i]===n})}}function vr(e){return en(e)?e:t=>t===e}function eu(e){return e}function tu(e){return Number(e)}function nu(e,t){let n,i,r,a;function s(x){let f=Date.now(),U=x?0:a+t-f;if(U>0)return u(U);e.apply(r,i),c()}function u(x){n=setTimeout(s,x)}function c(){n&&clearTimeout(n),n=a=i=r=void 0}function b(){n&&s(!0),c()}function v(...x){a=Date.now(),i=x,r=this,n||u(t)}return v.flush=b,v.cancel=c,v}function nn(e,t){return e.bind(t)}function me(e,...t){return Object.assign(e,...t)}function iu(e,t,n){let i=e;return ae(t,function(r,a){if(typeof r!="number"&&typeof r!="string")throw new Error("illegal key type: "+typeof r+". Key should be of type number or string.");if(r==="constructor")throw new Error("illegal key: constructor");if(r==="__proto__")throw new Error("illegal key: __proto__");let s=t[a+1],u=i[r];Cn(s)&&Xl(u)&&(u=i[r]=isNaN(+s)?{}:[]),tr(s)?tr(n)?delete i[r]:i[r]=n:i=u}),e}function ru(e,t){let n={},i=Object(e);return ae(t,function(r){r in i&&(n[r]=e[r])}),n}function au(e,t){let n={},i=Object(e);return ae(i,function(r,a){t.indexOf(a)===-1&&(n[a]=r)}),n}var ou=1e3;function Gt(e,t){var n=this;t=t||ou,e.on(["render.shape","render.connection"],t,function(i,r){var a=i.type,s=r.element,u=r.gfx,c=r.attrs;if(n.canRender(s))return a==="render.shape"?n.drawShape(u,s,c):n.drawConnection(u,s,c)}),e.on(["render.getShapePath","render.getConnectionPath"],t,function(i,r){if(n.canRender(r))return i.type==="render.getShapePath"?n.getShapePath(r):n.getConnectionPath(r)})}Gt.prototype.canRender=function(e){};Gt.prototype.drawShape=function(e,t){};Gt.prototype.drawConnection=function(e,t){};Gt.prototype.getShapePath=function(e){};Gt.prototype.getConnectionPath=function(e){};function ce(e,t){var n=We(e);return n&&typeof n.$instanceOf=="function"&&n.$instanceOf(t)}function su(e,t){return Xa(t,function(n){return ce(e,n)})}function We(e){return e&&e.businessObject||e}function yn(e){return e&&e.di}function fn(e,t){return ce(e,"bpmn:CallActivity")?!1:ce(e,"bpmn:SubProcess")?(t=t||yn(e),t&&ce(t,"bpmndi:BPMNPlane")?!0:t&&!!t.isExpanded):ce(e,"bpmn:Participant")?!!We(e).processRef:!0}function Zr(e){if(!(!ce(e,"bpmn:Participant")&&!ce(e,"bpmn:Lane"))){var t=yn(e).isHorizontal;return t===void 0?!0:t}}function lu(e){return e&&!!We(e).triggeredByEvent}function uu(e){return hn(e)&&$n(e,"waypoints")}var Ai={width:90,height:20},Jr=15;function cu(e){return ce(e,"bpmn:Event")||ce(e,"bpmn:Gateway")||ce(e,"bpmn:DataStoreReference")||ce(e,"bpmn:DataObjectReference")||ce(e,"bpmn:DataInput")||ce(e,"bpmn:DataOutput")||ce(e,"bpmn:SequenceFlow")||ce(e,"bpmn:MessageFlow")||ce(e,"bpmn:Group")}function du(e){var t=e.length/2-1,n=e[Math.floor(t)],i=e[Math.ceil(t+.01)],r=pu(e),a=Math.atan((i.y-n.y)/(i.x-n.x)),s=r.x,u=r.y;return Math.abs(a)<Math.PI/2?u-=Jr:s+=Jr,{x:s,y:u}}function pu(e){var t=e.length/2-1,n=e[Math.floor(t)],i=e[Math.ceil(t+.01)];return{x:n.x+(i.x-n.x)/2,y:n.y+(i.y-n.y)/2}}function fu(e){return e.waypoints?du(e.waypoints):ce(e,"bpmn:Group")?{x:e.x+e.width/2,y:e.y+Ai.height/2}:{x:e.x+e.width/2,y:e.y+e.height+Ai.height/2}}function mu(e,t){var n,i,r,a=e.label;return a&&a.bounds?(r=a.bounds,i={width:Math.max(Ai.width,r.width),height:r.height},n={x:r.x+r.width/2,y:r.y+r.height/2}):(n=fu(t),i=Ai),me({x:n.x-i.width/2,y:n.y-i.height/2},i)}function hu(e){if(ce(e,"bpmn:FlowElement")||ce(e,"bpmn:Participant")||ce(e,"bpmn:Lane")||ce(e,"bpmn:SequenceFlow")||ce(e,"bpmn:MessageFlow")||ce(e,"bpmn:DataInput")||ce(e,"bpmn:DataOutput"))return"name";if(ce(e,"bpmn:TextAnnotation"))return"text";if(ce(e,"bpmn:Group"))return"categoryValueRef"}function yu(e){var t=e.categoryValueRef;return t&&t.value||""}function Ti(e){var t=e.businessObject,n=hu(t);if(n)return n==="categoryValueRef"?yu(t):t[n]||""}function vu(e,t){if(e.ownerDocument!==t.ownerDocument)try{return t.ownerDocument.importNode(e,!0)}catch(n){}return e}function Za(e,t){return t.appendChild(vu(e,t))}function He(e,t){return Za(t,e),e}var nr=2,Ja={"alignment-baseline":1,"baseline-shift":1,clip:1,"clip-path":1,"clip-rule":1,color:1,"color-interpolation":1,"color-interpolation-filters":1,"color-profile":1,"color-rendering":1,cursor:1,direction:1,display:1,"dominant-baseline":1,"enable-background":1,fill:1,"fill-opacity":1,"fill-rule":1,filter:1,"flood-color":1,"flood-opacity":1,font:1,"font-family":1,"font-size":nr,"font-size-adjust":1,"font-stretch":1,"font-style":1,"font-variant":1,"font-weight":1,"glyph-orientation-horizontal":1,"glyph-orientation-vertical":1,"image-rendering":1,kerning:1,"letter-spacing":1,"lighting-color":1,marker:1,"marker-end":1,"marker-mid":1,"marker-start":1,mask:1,opacity:1,overflow:1,"pointer-events":1,"shape-rendering":1,"stop-color":1,"stop-opacity":1,stroke:1,"stroke-dasharray":1,"stroke-dashoffset":1,"stroke-linecap":1,"stroke-linejoin":1,"stroke-miterlimit":1,"stroke-opacity":1,"stroke-width":nr,"text-anchor":1,"text-decoration":1,"text-rendering":1,"unicode-bidi":1,visibility:1,"word-spacing":1,"writing-mode":1};function gu(e,t){return Ja[t]?e.style[t]:e.getAttributeNS(null,t)}function eo(e,t,n){var i=t.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase(),r=Ja[i];r?(r===nr&&typeof n=="number"&&(n=String(n)+"px"),e.style[i]=n):e.setAttributeNS(null,t,n)}function bu(e,t){var n=Object.keys(t),i,r;for(i=0,r;r=n[i];i++)eo(e,r,t[r])}function Re(e,t,n){if(typeof t=="string")if(n!==void 0)eo(e,t,n);else return gu(e,t);else bu(e,t);return e}const _u=Object.prototype.toString;function wt(e){return new rn(e)}function rn(e){if(!e||!e.nodeType)throw new Error("A DOM element reference is required");this.el=e,this.list=e.classList}rn.prototype.add=function(e){return this.list.add(e),this};rn.prototype.remove=function(e){return _u.call(e)=="[object RegExp]"?this.removeMatching(e):(this.list.remove(e),this)};rn.prototype.removeMatching=function(e){const t=this.array();for(let n=0;n<t.length;n++)e.test(t[n])&&this.remove(t[n]);return this};rn.prototype.toggle=function(e,t){return typeof t<"u"?t!==this.list.toggle(e,t)&&this.list.toggle(e):this.list.toggle(e),this};rn.prototype.array=function(){return Array.from(this.list)};rn.prototype.has=rn.prototype.contains=function(e){return this.list.contains(e)};function Vn(e){var t=e.parentNode;return t&&t.removeChild(e),e}function to(e){for(var t;t=e.firstChild;)Vn(t);return e}var gr={svg:"http://www.w3.org/2000/svg"},ea='<svg xmlns="'+gr.svg+'"';function no(e){var t=!1;e.substring(0,4)==="<svg"?e.indexOf(gr.svg)===-1&&(e=ea+e.substring(4)):(e=ea+">"+e+"</svg>",t=!0);var n=wu(e);if(!t)return n;for(var i=document.createDocumentFragment(),r=n.firstChild;r.firstChild;)i.appendChild(r.firstChild);return i}function wu(e){var t;return t=new DOMParser,t.async=!1,t.parseFromString(e,"text/xml")}function $e(e,t){var n;return e.charAt(0)==="<"?(n=no(e).firstChild,n=document.importNode(n,!0)):n=document.createElementNS(gr.svg,e),t&&Re(n,t),n}var Yi=null;function ir(){return Yi===null&&(Yi=$e("svg")),Yi}function ta(e,t){var n,i,r=Object.keys(t);for(n=0;i=r[n];n++)e[i]=t[i];return e}function xu(e,t,n,i,r,a){var s=ir().createSVGMatrix();switch(arguments.length){case 0:return s;case 1:return ta(s,e);case 6:return ta(s,{a:e,b:t,c:n,d:i,e:r,f:a})}}function Kn(e){return e?ir().createSVGTransformFromMatrix(e):ir().createSVGTransform()}var na=/([&<>]{1})/g,Eu=/([\n\r"]{1})/g,ku={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"'"};function Ki(e,t){function n(i,r){return ku[r]||r}return e.replace(t,n)}function io(e,t){var n,i,r,a,s;switch(e.nodeType){case 3:t.push(Ki(e.textContent,na));break;case 1:if(t.push("<",e.tagName),e.hasAttributes())for(r=e.attributes,n=0,i=r.length;n<i;++n)a=r.item(n),t.push(" ",a.name,'="',Ki(a.value,Eu),'"');if(e.hasChildNodes()){for(t.push(">"),s=e.childNodes,n=0,i=s.length;n<i;++n)io(s.item(n),t);t.push("</",e.tagName,">")}else t.push("/>");break;case 8:t.push("<!--",Ki(e.nodeValue,na),"-->");break;case 4:t.push("<![CDATA[",e.nodeValue,"]]>");break;default:throw new Error("unable to handle node "+e.nodeType)}return t}function Su(e,t){var n=no(t);if(to(e),!!t){Tu(n)||(n=n.documentElement);for(var i=Cu(n.childNodes),r=0;r<i.length;r++)Za(i[r],e)}}function Au(e){for(var t=e.firstChild,n=[];t;)io(t,n),t=t.nextSibling;return n.join("")}function Tu(e){return e.nodeName==="#document-fragment"}function ia(e,t){if(t!==void 0){try{Su(e,t)}catch(n){throw new Error("error parsing SVG: "+n.message)}return e}else return Au(e)}function Cu(e){return Array.prototype.slice.call(e)}function Ru(e,t){return t instanceof SVGMatrix?e.createSVGTransformFromMatrix(t):t}function Du(e,t){var n,i;for(e.clear(),n=0;i=t[n];n++)e.appendItem(Ru(e,i))}function Xn(e,t){var n=e.transform.baseVal;return t&&(Array.isArray(t)||(t=[t]),Du(n,t)),n.consolidate()}function bn(e){return e.flat().join(",").replace(/,?([A-z]),?/g,"$1")}function Iu(e){return["M",e.x,e.y]}function Gi(e){return["L",e.x,e.y]}function Nu(e,t,n){return["C",e.x,e.y,t.x,t.y,n.x,n.y]}function Mu(e,t){const n=e.length,i=[Iu(e[0])];for(let r=1;r<n;r++){const a=e[r-1],s=e[r],u=e[r+1];if(!u||!t){i.push(Gi(s));continue}const c=Math.min(t,rr(s.x-a.x,s.y-a.y),rr(u.x-s.x,u.y-s.y));if(!c){i.push(Gi(s));continue}const b=pi(s,a,c),v=pi(s,a,c*.5),x=pi(s,u,c),f=pi(s,u,c*.5);i.push(Gi(b)),i.push(Nu(v,f,x))}return i}function pi(e,t,n){const i=t.x-e.x,r=t.y-e.y,a=rr(i,r),s=n/a;return{x:e.x+i*s,y:e.y+r*s}}function rr(e,t){return Math.sqrt(Math.pow(e,2)+Math.pow(t,2))}function br(e,t,n){tn(t)&&(n=t,t=null),t||(t={});const i=$e("path",t);return tn(n)&&(i.dataset.cornerRadius=String(n)),ro(i,e)}function ro(e,t){const n=parseInt(e.dataset.cornerRadius,10)||0;return Re(e,{d:bn(Mu(t,n))}),e}var ar="hsl(225, 10%, 15%)",Pu="white";function Bt(e,t){return Xa(e.eventDefinitions,function(n){return n.$type===t})}function $u(e){return e.$type==="bpmn:IntermediateThrowEvent"||e.$type==="bpmn:EndEvent"}function Vu(e){var t=e.dataObjectRef;return e.isCollection||t&&t.isCollection}function be(e,t,n){var i=yn(e);return n||i.get("color:background-color")||i.get("bioc:fill")||t||Pu}function Z(e,t,n){var i=yn(e);return n||i.get("color:border-color")||i.get("bioc:stroke")||t||ar}function Wn(e,t,n,i){var r=yn(e),a=r.get("label");return i||a&&a.get("color:color")||t||Z(e,n)}function Lu(e){var t=e.x+e.width/2,n=e.y+e.height/2,i=e.width/2,r=[["M",t,n],["m",0,-i],["a",i,i,0,1,1,0,2*i],["a",i,i,0,1,1,0,-2*i],["z"]];return bn(r)}function Bu(e,t){var n=e.x,i=e.y,r=e.width,a=e.height,s=[["M",n+t,i],["l",r-t*2,0],["a",t,t,0,0,1,t,t],["l",0,a-t*2],["a",t,t,0,0,1,-t,t],["l",t*2-r,0],["a",t,t,0,0,1,-t,-t],["l",0,t*2-a],["a",t,t,0,0,1,t,-t],["z"]];return bn(s)}function Ou(e){var t=e.width,n=e.height,i=e.x,r=e.y,a=t/2,s=n/2,u=[["M",i+a,r],["l",a,s],["l",-a,s],["l",-a,-s],["z"]];return bn(u)}function Uu(e){var t=e.x,n=e.y,i=e.width,r=e.height,a=[["M",t,n],["l",i,0],["l",0,r],["l",-i,0],["z"]];return bn(a)}function Hn(e,t={}){return{width:Tt(e,t),height:ht(e,t)}}function Tt(e,t={}){return $n(t,"width")?t.width:e.width}function ht(e,t={}){return $n(t,"height")?t.height:e.height}function Fu(e,t){return t.forEach(function(n){n&&typeof n!="string"&&!Array.isArray(n)&&Object.keys(n).forEach(function(i){if(i!=="default"&&!(i in e)){var r=Object.getOwnPropertyDescriptor(n,i);Object.defineProperty(e,i,r.get?r:{enumerable:!0,get:function(){return n[i]}})}})}),Object.freeze(e)}const qu=Object.prototype.toString,ju=Object.prototype.hasOwnProperty;function zu(e){return e===void 0}function Wu(e){return qu.call(e)==="[object Array]"}function Hu(e,t){return ju.call(e,t)}function ra(e,t){let n,i;if(zu(e))return;const r=Wu(e)?Ku:Yu;for(let a in e)if(Hu(e,a)&&(n=e[a],i=t(n,r(a)),i===!1))return n}function Yu(e){return e}function Ku(e){return Number(e)}function vt(e,...t){const n=e.style;return ra(t,function(i){i&&ra(i,function(r,a){n[a]=r})}),e}function Gu(e,t,n){return arguments.length==2?e.getAttribute(t):n===null?e.removeAttribute(t):(e.setAttribute(t,n),e)}const Qu=Object.prototype.toString;function Mi(e){return new an(e)}function an(e){if(!e||!e.nodeType)throw new Error("A DOM element reference is required");this.el=e,this.list=e.classList}an.prototype.add=function(e){return this.list.add(e),this};an.prototype.remove=function(e){return Qu.call(e)=="[object RegExp]"?this.removeMatching(e):(this.list.remove(e),this)};an.prototype.removeMatching=function(e){const t=this.array();for(let n=0;n<t.length;n++)e.test(t[n])&&this.remove(t[n]);return this};an.prototype.toggle=function(e,t){return typeof t<"u"?t!==this.list.toggle(e,t)&&this.list.toggle(e):this.list.toggle(e),this};an.prototype.array=function(){return Array.from(this.list)};an.prototype.has=an.prototype.contains=function(e){return this.list.contains(e)};function ao(e){for(var t;e.childNodes.length;)t=e.childNodes[0],e.removeChild(t);return e}function aa(e,t){return e&&typeof e.matches=="function"&&e.matches(t)}function Xu(e,t,n){for(var i=n?e:e.parentNode;i&&i.nodeType!==document.DOCUMENT_NODE&&i.nodeType!==document.DOCUMENT_FRAGMENT_NODE;){if(aa(i,t))return i;i=i.parentNode}return aa(i,t)?i:null}var Ci={},Ri,or,_r;function oo(){Ri=window.addEventListener?"addEventListener":"attachEvent",or=window.removeEventListener?"removeEventListener":"detachEvent",_r=Ri!=="addEventListener"?"on":""}var Zu=Ci.bind=function(e,t,n,i){return Ri||oo(),e[Ri](_r+t,n,i||!1),n},Ju=Ci.unbind=function(e,t,n,i){return or||oo(),e[or](_r+t,n,i||!1),n},wr=Fu({__proto__:null,bind:Zu,unbind:Ju,default:Ci},[Ci]),so=["focus","blur"];function ec(e,t,n,i,r){return so.indexOf(n)!==-1&&(r=!0),wr.bind(e,n,function(a){var s=a.target||a.srcElement;a.delegateTarget=Xu(s,t,!0),a.delegateTarget&&i.call(e,a)},r)}function tc(e,t,n,i){return so.indexOf(t)!==-1&&(i=!0),wr.unbind(e,t,n,i)}var sr={bind:ec,unbind:tc},nc=ic,lo=!1,fi;typeof document<"u"&&(fi=document.createElement("div"),fi.innerHTML='  <link/><table></table><a href="/a">a</a><input type="checkbox"/>',lo=!fi.getElementsByTagName("link").length,fi=void 0);var Ge={legend:[1,"<fieldset>","</fieldset>"],tr:[2,"<table><tbody>","</tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],_default:lo?[1,"X<div>","</div>"]:[0,"",""]};Ge.td=Ge.th=[3,"<table><tbody><tr>","</tr></tbody></table>"];Ge.option=Ge.optgroup=[1,'<select multiple="multiple">',"</select>"];Ge.thead=Ge.tbody=Ge.colgroup=Ge.caption=Ge.tfoot=[1,"<table>","</table>"];Ge.polyline=Ge.ellipse=Ge.polygon=Ge.circle=Ge.text=Ge.line=Ge.path=Ge.rect=Ge.g=[1,'<svg xmlns="http://www.w3.org/2000/svg" version="1.1">',"</svg>"];function ic(e,t){if(typeof e!="string")throw new TypeError("String expected");t||(t=document);var n=/<([\w:]+)/.exec(e);if(!n)return t.createTextNode(e);e=e.replace(/^\s+|\s+$/g,"");var i=n[1];if(i=="body"){var c=t.createElement("html");return c.innerHTML=e,c.removeChild(c.lastChild)}var r=Object.prototype.hasOwnProperty.call(Ge,i)?Ge[i]:Ge._default,a=r[0],s=r[1],u=r[2],c=t.createElement("div");for(c.innerHTML=s+e+u;a--;)c=c.lastChild;if(c.firstChild==c.lastChild)return c.removeChild(c.firstChild);for(var b=t.createDocumentFragment();c.firstChild;)b.appendChild(c.removeChild(c.firstChild));return b}var jt=nc;function It(e,t){return t=t||document,t.querySelector(e)}function rc(e,t){return t=t||document,t.querySelectorAll(e)}function Di(e){e.parentNode&&e.parentNode.removeChild(e)}function Qi(e,t,n,i,r){var a=Kn();a.setTranslate(t,n);var s=Kn();s.setRotate(i||0,0,0);var u=Kn();u.setScale(r||1,r||1),Xn(e,[a,s,u])}function uo(e,t,n){var i=Kn();i.setTranslate(t,n),Xn(e,i)}function ac(e,t){var n=Kn();n.setRotate(t,0,0),Xn(e,n)}function oc(e,t){return t={exports:{}},e(t,t.exports),t.exports}var sc=oc(function(e){var t=e.exports=function(n,i){if(i||(i=16),n===void 0&&(n=128),n<=0)return"0";for(var r=Math.log(Math.pow(2,n))/Math.log(i),a=2;r===1/0;a*=2)r=Math.log(Math.pow(2,n/a))/Math.log(i)*a;for(var s=r-Math.floor(r),u="",a=0;a<Math.floor(r);a++){var c=Math.floor(Math.random()*i).toString(i);u=c+u}if(s){var b=Math.pow(i,s),c=Math.floor(Math.random()*b).toString(i);u=c+u}var v=parseInt(u,i);return v!==1/0&&v>=Math.pow(2,n)?t(n,i):u};t.rack=function(n,i,r){var a=function(u){var c=0;do{if(c++>10)if(r)n+=r;else throw new Error("too many ID collisions, use more bits");var b=t(n,i)}while(Object.hasOwnProperty.call(s,b));return s[b]=u,b},s=a.hats={};return a.get=function(u){return a.hats[u]},a.set=function(u,c){return a.hats[u]=c,a},a.bits=n||128,a.base=i||16,a}});function Kt(e){if(!(this instanceof Kt))return new Kt(e);e=e||[128,36,1],this._seed=e.length?sc.rack(e[0],e[1],e[2]):e}Kt.prototype.next=function(e){return this._seed(e||!0)};Kt.prototype.nextPrefixed=function(e,t){var n;do n=e+this.next(!0);while(this.assigned(n));return this.claim(n,t),n};Kt.prototype.claim=function(e,t){this._seed.set(e,t||!0)};Kt.prototype.assigned=function(e){return this._seed.get(e)||!1};Kt.prototype.unclaim=function(e){delete this._seed.hats[e]};Kt.prototype.clear=function(){var e=this._seed.hats,t;for(t in e)this.unclaim(t)};var lc=new Kt,uc=10,mi=3,cc=1.5,_i=10,An=.95,dc=1,pc=.25;function _n(e,t,n,i,r,a,s){Gt.call(this,t,s);var u=e&&e.defaultFillColor,c=e&&e.defaultStrokeColor,b=e&&e.defaultLabelColor,v=lc.next(),x={};function f(m){return n.computeStyle(m,{strokeLinecap:"round",strokeLinejoin:"round",stroke:ar,strokeWidth:2,fill:"white"})}function U(m){return n.computeStyle(m,["no-fill"],{strokeLinecap:"round",strokeLinejoin:"round",stroke:ar,strokeWidth:2})}function X(m,o){var{ref:l={x:0,y:0},scale:y=1,element:w}=o,$=$e("marker",{id:m,viewBox:"0 0 20 20",refX:l.x,refY:l.y,markerWidth:20*y,markerHeight:20*y,orient:"auto"});He($,w);var se=It("defs",r._svg);se||(se=$e("defs"),He(r._svg,se)),He(se,$),x[m]=$}function J(m){return m.replace(/[^0-9a-zA-Z]+/g,"_")}function ee(m,o,l){var y=m+"-"+J(o)+"-"+J(l)+"-"+v;return x[y]||D(y,m,o,l),"url(#"+y+")"}function D(m,o,l,y){if(o==="sequenceflow-end"){var w=$e("path",{d:"M 1 5 L 11 10 L 1 15 Z",...f({fill:y,stroke:y,strokeWidth:1})});X(m,{element:w,ref:{x:11,y:10},scale:.5})}if(o==="messageflow-start"){var $=$e("circle",{cx:6,cy:6,r:3.5,...f({fill:l,stroke:y,strokeWidth:1,strokeDasharray:[1e4,1]})});X(m,{element:$,ref:{x:6,y:6}})}if(o==="messageflow-end"){var se=$e("path",{d:"m 1 5 l 0 -3 l 7 3 l -7 3 z",...f({fill:l,stroke:y,strokeWidth:1,strokeDasharray:[1e4,1]})});X(m,{element:se,ref:{x:8.5,y:5}})}if(o==="association-start"){var xe=$e("path",{d:"M 11 5 L 1 10 L 11 15",...U({fill:"none",stroke:y,strokeWidth:1.5,strokeDasharray:[1e4,1]})});X(m,{element:xe,ref:{x:1,y:10},scale:.5})}if(o==="association-end"){var _e=$e("path",{d:"M 1 5 L 11 10 L 1 15",...U({fill:"none",stroke:y,strokeWidth:1.5,strokeDasharray:[1e4,1]})});X(m,{element:_e,ref:{x:11,y:10},scale:.5})}if(o==="conditional-flow-marker"){var we=$e("path",{d:"M 0 10 L 8 6 L 16 10 L 8 14 Z",...f({fill:l,stroke:y})});X(m,{element:we,ref:{x:-1,y:10},scale:.5})}if(o==="conditional-default-flow-marker"){var Be=$e("path",{d:"M 6 4 L 10 16",...f({stroke:y})});X(m,{element:Be,ref:{x:0,y:10},scale:.5})}}function K(m,o,l,y,w={}){hn(y)&&(w=y,y=0),y=y||0,w=f(w);var $=o/2,se=l/2,xe=$e("circle",{cx:$,cy:se,r:Math.round((o+l)/4-y),...w});return He(m,xe),xe}function B(m,o,l,y,w,$){hn(w)&&($=w,w=0),w=w||0,$=f($);var se=$e("rect",{x:w,y:w,width:o-w*2,height:l-w*2,rx:y,ry:y,...$});return He(m,se),se}function C(m,o,l,y){var w=o/2,$=l/2,se=[{x:w,y:0},{x:o,y:$},{x:w,y:l},{x:0,y:$}],xe=se.map(function(we){return we.x+","+we.y}).join(" ");y=f(y);var _e=$e("polygon",{...y,points:xe});return He(m,_e),_e}function A(m,o,l,y){l=U(l);var w=br(o,l,y);return He(m,w),w}function N(m,o,l){return A(m,o,l,5)}function g(m,o,l){l=U(l);var y=$e("path",{...l,d:o});return He(m,y),y}function R(m,o,l,y){return g(o,l,me({"data-marker":m},y))}function L(m){return Ne[m]}function M(m){return function(o,l,y){return L(m)(o,l,y)}}var H={"bpmn:MessageEventDefinition":function(m,o,l={},y){var w=i.getScaledPath("EVENT_MESSAGE",{xScaleFactor:.9,yScaleFactor:.9,containerWidth:o.width,containerHeight:o.height,position:{mx:.235,my:.315}}),$=y?Z(o,c,l.stroke):be(o,u,l.fill),se=y?be(o,u,l.fill):Z(o,c,l.stroke),xe=g(m,w,{fill:$,stroke:se,strokeWidth:1});return xe},"bpmn:TimerEventDefinition":function(m,o,l={}){var y=K(m,o.width,o.height,.2*o.height,{fill:be(o,u,l.fill),stroke:Z(o,c,l.stroke),strokeWidth:2}),w=i.getScaledPath("EVENT_TIMER_WH",{xScaleFactor:.75,yScaleFactor:.75,containerWidth:o.width,containerHeight:o.height,position:{mx:.5,my:.5}});g(m,w,{stroke:Z(o,c,l.stroke),strokeWidth:2});for(var $=0;$<12;$++){var se=i.getScaledPath("EVENT_TIMER_LINE",{xScaleFactor:.75,yScaleFactor:.75,containerWidth:o.width,containerHeight:o.height,position:{mx:.5,my:.5}}),xe=o.width/2,_e=o.height/2;g(m,se,{strokeWidth:1,stroke:Z(o,c,l.stroke),transform:"rotate("+$*30+","+_e+","+xe+")"})}return y},"bpmn:EscalationEventDefinition":function(m,o,l={},y){var w=i.getScaledPath("EVENT_ESCALATION",{xScaleFactor:1,yScaleFactor:1,containerWidth:o.width,containerHeight:o.height,position:{mx:.5,my:.2}}),$=y?Z(o,c,l.stroke):be(o,u,l.fill);return g(m,w,{fill:$,stroke:Z(o,c,l.stroke),strokeWidth:1})},"bpmn:ConditionalEventDefinition":function(m,o,l={}){var y=i.getScaledPath("EVENT_CONDITIONAL",{xScaleFactor:1,yScaleFactor:1,containerWidth:o.width,containerHeight:o.height,position:{mx:.5,my:.222}});return g(m,y,{fill:be(o,u,l.fill),stroke:Z(o,c,l.stroke),strokeWidth:1})},"bpmn:LinkEventDefinition":function(m,o,l={},y){var w=i.getScaledPath("EVENT_LINK",{xScaleFactor:1,yScaleFactor:1,containerWidth:o.width,containerHeight:o.height,position:{mx:.57,my:.263}}),$=y?Z(o,c,l.stroke):be(o,u,l.fill);return g(m,w,{fill:$,stroke:Z(o,c,l.stroke),strokeWidth:1})},"bpmn:ErrorEventDefinition":function(m,o,l={},y){var w=i.getScaledPath("EVENT_ERROR",{xScaleFactor:1.1,yScaleFactor:1.1,containerWidth:o.width,containerHeight:o.height,position:{mx:.2,my:.722}}),$=y?Z(o,c,l.stroke):be(o,u,l.fill);return g(m,w,{fill:$,stroke:Z(o,c,l.stroke),strokeWidth:1})},"bpmn:CancelEventDefinition":function(m,o,l={},y){var w=i.getScaledPath("EVENT_CANCEL_45",{xScaleFactor:1,yScaleFactor:1,containerWidth:o.width,containerHeight:o.height,position:{mx:.638,my:-.055}}),$=y?Z(o,c,l.stroke):"none",se=g(m,w,{fill:$,stroke:Z(o,c,l.stroke),strokeWidth:1});return ac(se,45),se},"bpmn:CompensateEventDefinition":function(m,o,l={},y){var w=i.getScaledPath("EVENT_COMPENSATION",{xScaleFactor:1,yScaleFactor:1,containerWidth:o.width,containerHeight:o.height,position:{mx:.22,my:.5}}),$=y?Z(o,c,l.stroke):be(o,u,l.fill);return g(m,w,{fill:$,stroke:Z(o,c,l.stroke),strokeWidth:1})},"bpmn:SignalEventDefinition":function(m,o,l={},y){var w=i.getScaledPath("EVENT_SIGNAL",{xScaleFactor:.9,yScaleFactor:.9,containerWidth:o.width,containerHeight:o.height,position:{mx:.5,my:.2}}),$=y?Z(o,c,l.stroke):be(o,u,l.fill);return g(m,w,{strokeWidth:1,fill:$,stroke:Z(o,c,l.stroke)})},"bpmn:MultipleEventDefinition":function(m,o,l={},y){var w=i.getScaledPath("EVENT_MULTIPLE",{xScaleFactor:1.1,yScaleFactor:1.1,containerWidth:o.width,containerHeight:o.height,position:{mx:.222,my:.36}}),$=y?Z(o,c,l.stroke):be(o,u,l.fill);return g(m,w,{fill:$,strokeWidth:1})},"bpmn:ParallelMultipleEventDefinition":function(m,o,l={}){var y=i.getScaledPath("EVENT_PARALLEL_MULTIPLE",{xScaleFactor:1.2,yScaleFactor:1.2,containerWidth:o.width,containerHeight:o.height,position:{mx:.458,my:.194}});return g(m,y,{fill:be(o,u,l.fill),stroke:Z(o,c,l.stroke),strokeWidth:1})},"bpmn:TerminateEventDefinition":function(m,o,l={}){var y=K(m,o.width,o.height,8,{fill:Z(o,c,l.stroke),stroke:Z(o,c,l.stroke),strokeWidth:4});return y}};function G(m,o,l={}){var y=We(m),w=$u(y);return y.get("eventDefinitions")&&y.get("eventDefinitions").length>1?y.get("parallelMultiple")?H["bpmn:ParallelMultipleEventDefinition"](o,m,l,w):H["bpmn:MultipleEventDefinition"](o,m,l,w):Bt(y,"bpmn:MessageEventDefinition")?H["bpmn:MessageEventDefinition"](o,m,l,w):Bt(y,"bpmn:TimerEventDefinition")?H["bpmn:TimerEventDefinition"](o,m,l,w):Bt(y,"bpmn:ConditionalEventDefinition")?H["bpmn:ConditionalEventDefinition"](o,m,l,w):Bt(y,"bpmn:SignalEventDefinition")?H["bpmn:SignalEventDefinition"](o,m,l,w):Bt(y,"bpmn:EscalationEventDefinition")?H["bpmn:EscalationEventDefinition"](o,m,l,w):Bt(y,"bpmn:LinkEventDefinition")?H["bpmn:LinkEventDefinition"](o,m,l,w):Bt(y,"bpmn:ErrorEventDefinition")?H["bpmn:ErrorEventDefinition"](o,m,l,w):Bt(y,"bpmn:CancelEventDefinition")?H["bpmn:CancelEventDefinition"](o,m,l,w):Bt(y,"bpmn:CompensateEventDefinition")?H["bpmn:CompensateEventDefinition"](o,m,l,w):Bt(y,"bpmn:TerminateEventDefinition")?H["bpmn:TerminateEventDefinition"](o,m,l,w):null}var te={ParticipantMultiplicityMarker:function(m,o,l={}){var y=Tt(o,l),w=ht(o,l),$=i.getScaledPath("MARKER_PARALLEL",{xScaleFactor:1,yScaleFactor:1,containerWidth:y,containerHeight:w,position:{mx:(y/2-6)/y,my:(w-15)/w}});R("participant-multiplicity",m,$,{strokeWidth:2,fill:be(o,u,l.fill),stroke:Z(o,c,l.stroke)})},SubProcessMarker:function(m,o,l={}){var y=B(m,14,14,0,{strokeWidth:1,fill:be(o,u,l.fill),stroke:Z(o,c,l.stroke)});uo(y,o.width/2-7.5,o.height-20);var w=i.getScaledPath("MARKER_SUB_PROCESS",{xScaleFactor:1.5,yScaleFactor:1.5,containerWidth:o.width,containerHeight:o.height,position:{mx:(o.width/2-7.5)/o.width,my:(o.height-20)/o.height}});R("sub-process",m,w,{fill:be(o,u,l.fill),stroke:Z(o,c,l.stroke)})},ParallelMarker:function(m,o,l){var y=Tt(o,l),w=ht(o,l),$=i.getScaledPath("MARKER_PARALLEL",{xScaleFactor:1,yScaleFactor:1,containerWidth:y,containerHeight:w,position:{mx:(y/2+l.parallel)/y,my:(w-20)/w}});R("parallel",m,$,{fill:be(o,u,l.fill),stroke:Z(o,c,l.stroke)})},SequentialMarker:function(m,o,l){var y=i.getScaledPath("MARKER_SEQUENTIAL",{xScaleFactor:1,yScaleFactor:1,containerWidth:o.width,containerHeight:o.height,position:{mx:(o.width/2+l.seq)/o.width,my:(o.height-19)/o.height}});R("sequential",m,y,{fill:be(o,u,l.fill),stroke:Z(o,c,l.stroke)})},CompensationMarker:function(m,o,l){var y=i.getScaledPath("MARKER_COMPENSATION",{xScaleFactor:1,yScaleFactor:1,containerWidth:o.width,containerHeight:o.height,position:{mx:(o.width/2+l.compensation)/o.width,my:(o.height-13)/o.height}});R("compensation",m,y,{strokeWidth:1,fill:be(o,u,l.fill),stroke:Z(o,c,l.stroke)})},LoopMarker:function(m,o,l){var y=Tt(o,l),w=ht(o,l),$=i.getScaledPath("MARKER_LOOP",{xScaleFactor:1,yScaleFactor:1,containerWidth:y,containerHeight:w,position:{mx:(y/2+l.loop)/y,my:(w-7)/w}});R("loop",m,$,{strokeWidth:1.5,fill:"none",stroke:Z(o,c,l.stroke),strokeMiterlimit:.5})},AdhocMarker:function(m,o,l){var y=Tt(o,l),w=ht(o,l),$=i.getScaledPath("MARKER_ADHOC",{xScaleFactor:1,yScaleFactor:1,containerWidth:y,containerHeight:w,position:{mx:(y/2+l.adhoc)/y,my:(w-15)/w}});R("adhoc",m,$,{strokeWidth:1,fill:Z(o,c,l.stroke),stroke:Z(o,c,l.stroke)})}};function ue(m,o,l,y){te[m](o,l,y)}function fe(m,o,l,y={}){y={fill:y.fill,stroke:y.stroke,width:Tt(o,y),height:ht(o,y)};var w=We(o),$=l&&l.includes("SubProcessMarker");$?y={...y,seq:-21,parallel:-22,compensation:-42,loop:-18,adhoc:10}:y={...y,seq:-5,parallel:-6,compensation:-27,loop:0,adhoc:10},ae(l,function(_e){ue(_e,m,o,y)}),w.get("isForCompensation")&&ue("CompensationMarker",m,o,y),ce(w,"bpmn:AdHocSubProcess")&&ue("AdhocMarker",m,o,y);var se=w.get("loopCharacteristics"),xe=se&&se.get("isSequential");se&&(xe===void 0&&ue("LoopMarker",m,o,y),xe===!1&&ue("ParallelMarker",m,o,y),xe===!0&&ue("SequentialMarker",m,o,y))}function re(m,o,l={}){l=me({size:{width:100}},l);var y=a.createText(o||"",l);return wt(y).add("djs-label"),He(m,y),y}function ye(m,o,l,y={}){var w=We(o),$=Hn({x:o.x,y:o.y,width:o.width,height:o.height},y);return re(m,w.name,{align:l,box:$,padding:7,style:{fill:Wn(o,b,c,y.stroke)}})}function pt(m,o,l={}){var y={width:90,height:30,x:o.width/2+o.x,y:o.height/2+o.y};return re(m,Ti(o),{box:y,fitBox:!0,style:me({},a.getExternalStyle(),{fill:Wn(o,b,c,l.stroke)})})}function it(m,o,l,y={}){var w=Zr(l),$=re(m,o,{box:{height:30,width:w?ht(l,y):Tt(l,y)},align:"center-middle",style:{fill:Wn(l,b,c,y.stroke)}});if(w){var se=-1*ht(l,y);Qi($,0,-se,270)}}function Oe(m,o,l={}){var{width:y,height:w}=Hn(o,l);return B(m,y,w,_i,{...l,fill:be(o,u,l.fill),fillOpacity:An,stroke:Z(o,c,l.stroke)})}function bt(m,o,l={}){var y=We(o),w=be(o,u,l.fill),$=Z(o,c,l.stroke);return(y.get("associationDirection")==="One"||y.get("associationDirection")==="Both")&&(l.markerEnd=ee("association-end",w,$)),y.get("associationDirection")==="Both"&&(l.markerStart=ee("association-start",w,$)),l=ke(l,["markerStart","markerEnd"]),N(m,o.waypoints,{...l,stroke:$,strokeDasharray:"0, 5"})}function ot(m,o,l={}){var y=be(o,u,l.fill),w=Z(o,c,l.stroke),$=i.getScaledPath("DATA_OBJECT_PATH",{xScaleFactor:1,yScaleFactor:1,containerWidth:o.width,containerHeight:o.height,position:{mx:.474,my:.296}}),se=g(m,$,{fill:y,fillOpacity:An,stroke:w}),xe=We(o);if(Vu(xe)){var _e=i.getScaledPath("DATA_OBJECT_COLLECTION_PATH",{xScaleFactor:1,yScaleFactor:1,containerWidth:o.width,containerHeight:o.height,position:{mx:.33,my:(o.height-18)/o.height}});g(m,_e,{strokeWidth:2,fill:y,stroke:w})}return se}function P(m,o,l={}){return K(m,o.width,o.height,{fillOpacity:An,...l,fill:be(o,u,l.fill),stroke:Z(o,c,l.stroke)})}function q(m,o,l={}){return C(m,o.width,o.height,{fill:be(o,u,l.fill),fillOpacity:An,stroke:Z(o,c,l.stroke)})}function ie(m,o,l={}){var y=B(m,Tt(o,l),ht(o,l),0,{fill:be(o,u,l.fill),fillOpacity:l.fillOpacity||An,stroke:Z(o,c,l.stroke),strokeWidth:1.5}),w=We(o);if(ce(w,"bpmn:Lane")){var $=w.get("name");it(m,$,o,l)}return y}function Te(m,o,l={}){var y=Oe(m,o,l);lu(o)&&Re(y,{strokeDasharray:"0, 5.5",strokeWidth:2.5});var w=fn(o);return ye(m,o,w?"center-top":"center-middle",l),w?fe(m,o,void 0,l):fe(m,o,["SubProcessMarker"],l),y}function Ae(m,o,l={}){var y=Oe(m,o,l);return ye(m,o,"center-middle",l),fe(m,o,void 0,l),y}var Ne=this.handlers={"bpmn:AdHocSubProcess":function(m,o,l={}){return fn(o)?l=ke(l,["fill","stroke","width","height"]):l=ke(l,["fill","stroke"]),Te(m,o,l)},"bpmn:Association":function(m,o,l={}){return l=ke(l,["fill","stroke"]),bt(m,o,l)},"bpmn:BoundaryEvent":function(m,o,l={}){var{renderIcon:y=!0}=l;l=ke(l,["fill","stroke"]);var w=We(o),$=w.get("cancelActivity");l={strokeWidth:1.5,fill:be(o,u,l.fill),fillOpacity:dc,stroke:Z(o,c,l.stroke)},$||(l.strokeDasharray="6");var se=P(m,o,l);return K(m,o.width,o.height,mi,{...l,fill:"none"}),y&&G(o,m,l),se},"bpmn:BusinessRuleTask":function(m,o,l={}){l=ke(l,["fill","stroke"]);var y=Ae(m,o,l),w=i.getScaledPath("TASK_TYPE_BUSINESS_RULE_MAIN",{abspos:{x:8,y:8}}),$=g(m,w);Re($,{fill:be(o,u,l.fill),stroke:Z(o,c,l.stroke),strokeWidth:1});var se=i.getScaledPath("TASK_TYPE_BUSINESS_RULE_HEADER",{abspos:{x:8,y:8}}),xe=g(m,se);return Re(xe,{fill:Z(o,c,l.stroke),stroke:Z(o,c,l.stroke),strokeWidth:1}),y},"bpmn:CallActivity":function(m,o,l={}){return l=ke(l,["fill","stroke"]),Te(m,o,{strokeWidth:5,...l})},"bpmn:ComplexGateway":function(m,o,l={}){l=ke(l,["fill","stroke"]);var y=q(m,o,l),w=i.getScaledPath("GATEWAY_COMPLEX",{xScaleFactor:.5,yScaleFactor:.5,containerWidth:o.width,containerHeight:o.height,position:{mx:.46,my:.26}});return g(m,w,{fill:Z(o,c,l.stroke),stroke:Z(o,c,l.stroke),strokeWidth:1}),y},"bpmn:DataInput":function(m,o,l={}){l=ke(l,["fill","stroke"]);var y=i.getRawPath("DATA_ARROW"),w=ot(m,o,l);return g(m,y,{fill:"none",stroke:Z(o,c,l.stroke),strokeWidth:1}),w},"bpmn:DataInputAssociation":function(m,o,l={}){return l=ke(l,["fill","stroke"]),bt(m,o,{...l,markerEnd:ee("association-end",be(o,u,l.fill),Z(o,c,l.stroke))})},"bpmn:DataObject":function(m,o,l={}){return l=ke(l,["fill","stroke"]),ot(m,o,l)},"bpmn:DataObjectReference":M("bpmn:DataObject"),"bpmn:DataOutput":function(m,o,l={}){l=ke(l,["fill","stroke"]);var y=i.getRawPath("DATA_ARROW"),w=ot(m,o,l);return g(m,y,{strokeWidth:1,fill:be(o,u,l.fill),stroke:Z(o,c,l.stroke)}),w},"bpmn:DataOutputAssociation":function(m,o,l={}){return l=ke(l,["fill","stroke"]),bt(m,o,{...l,markerEnd:ee("association-end",be(o,u,l.fill),Z(o,c,l.stroke))})},"bpmn:DataStoreReference":function(m,o,l={}){l=ke(l,["fill","stroke"]);var y=i.getScaledPath("DATA_STORE",{xScaleFactor:1,yScaleFactor:1,containerWidth:o.width,containerHeight:o.height,position:{mx:0,my:.133}});return g(m,y,{fill:be(o,u,l.fill),fillOpacity:An,stroke:Z(o,c,l.stroke),strokeWidth:2})},"bpmn:EndEvent":function(m,o,l={}){var{renderIcon:y=!0}=l;l=ke(l,["fill","stroke"]);var w=P(m,o,{...l,strokeWidth:4});return y&&G(o,m,l),w},"bpmn:EventBasedGateway":function(m,o,l={}){l=ke(l,["fill","stroke"]);var y=We(o),w=q(m,o,l);K(m,o.width,o.height,o.height*.2,{fill:be(o,"none",l.fill),stroke:Z(o,c,l.stroke),strokeWidth:1});var $=y.get("eventGatewayType"),se=!!y.get("instantiate");function xe(){var we=i.getScaledPath("GATEWAY_EVENT_BASED",{xScaleFactor:.18,yScaleFactor:.18,containerWidth:o.width,containerHeight:o.height,position:{mx:.36,my:.44}});g(m,we,{fill:"none",stroke:Z(o,c,l.stroke),strokeWidth:2})}if($==="Parallel"){var _e=i.getScaledPath("GATEWAY_PARALLEL",{xScaleFactor:.4,yScaleFactor:.4,containerWidth:o.width,containerHeight:o.height,position:{mx:.474,my:.296}});g(m,_e,{fill:"none",stroke:Z(o,c,l.stroke),strokeWidth:1})}else $==="Exclusive"&&(se||K(m,o.width,o.height,o.height*.26,{fill:"none",stroke:Z(o,c,l.stroke),strokeWidth:1}),xe());return w},"bpmn:ExclusiveGateway":function(m,o,l={}){l=ke(l,["fill","stroke"]);var y=q(m,o,l),w=i.getScaledPath("GATEWAY_EXCLUSIVE",{xScaleFactor:.4,yScaleFactor:.4,containerWidth:o.width,containerHeight:o.height,position:{mx:.32,my:.3}}),$=yn(o);return $.get("isMarkerVisible")&&g(m,w,{fill:Z(o,c,l.stroke),stroke:Z(o,c,l.stroke),strokeWidth:1}),y},"bpmn:Gateway":function(m,o,l={}){return l=ke(l,["fill","stroke"]),q(m,o,l)},"bpmn:Group":function(m,o,l={}){return l=ke(l,["fill","stroke","width","height"]),B(m,o.width,o.height,_i,{stroke:Z(o,c,l.stroke),strokeWidth:1.5,strokeDasharray:"10, 6, 0, 6",fill:"none",pointerEvents:"none",width:Tt(o,l),height:ht(o,l)})},"bpmn:InclusiveGateway":function(m,o,l={}){l=ke(l,["fill","stroke"]);var y=q(m,o,l);return K(m,o.width,o.height,o.height*.24,{fill:be(o,u,l.fill),stroke:Z(o,c,l.stroke),strokeWidth:2.5}),y},"bpmn:IntermediateEvent":function(m,o,l={}){var{renderIcon:y=!0}=l;l=ke(l,["fill","stroke"]);var w=P(m,o,{...l,strokeWidth:1.5});return K(m,o.width,o.height,mi,{fill:"none",stroke:Z(o,c,l.stroke),strokeWidth:1.5}),y&&G(o,m,l),w},"bpmn:IntermediateCatchEvent":M("bpmn:IntermediateEvent"),"bpmn:IntermediateThrowEvent":M("bpmn:IntermediateEvent"),"bpmn:Lane":function(m,o,l={}){return l=ke(l,["fill","stroke","width","height"]),ie(m,o,{...l,fillOpacity:pc})},"bpmn:ManualTask":function(m,o,l={}){l=ke(l,["fill","stroke"]);var y=Ae(m,o,l),w=i.getScaledPath("TASK_TYPE_MANUAL",{abspos:{x:17,y:15}});return g(m,w,{fill:be(o,u,l.fill),stroke:Z(o,c,l.stroke),strokeWidth:.5}),y},"bpmn:MessageFlow":function(m,o,l={}){l=ke(l,["fill","stroke"]);var y=We(o),w=yn(o),$=be(o,u,l.fill),se=Z(o,c,l.stroke),xe=N(m,o.waypoints,{markerEnd:ee("messageflow-end",$,se),markerStart:ee("messageflow-start",$,se),stroke:se,strokeDasharray:"10, 11",strokeWidth:1.5});if(y.get("messageRef")){var _e=xe.getPointAtLength(xe.getTotalLength()/2),we=i.getScaledPath("MESSAGE_FLOW_MARKER",{abspos:{x:_e.x,y:_e.y}}),Be={strokeWidth:1};w.get("messageVisibleKind")==="initiating"?(Be.fill=$,Be.stroke=se):(Be.fill=se,Be.stroke=$);var Ee=g(m,we,Be),St=y.get("messageRef"),Vt=St.get("name"),Qe=re(m,Vt,{align:"center-top",fitBox:!0,style:{fill:se}}),oe=Ee.getBBox(),h=Qe.getBBox(),_=_e.x-h.width/2,De=_e.y+oe.height/2+uc;Qi(Qe,_,De,0)}return xe},"bpmn:ParallelGateway":function(m,o,l={}){l=ke(l,["fill","stroke"]);var y=q(m,o,l),w=i.getScaledPath("GATEWAY_PARALLEL",{xScaleFactor:.6,yScaleFactor:.6,containerWidth:o.width,containerHeight:o.height,position:{mx:.46,my:.2}});return g(m,w,{fill:Z(o,c,l.stroke),stroke:Z(o,c,l.stroke),strokeWidth:1}),y},"bpmn:Participant":function(m,o,l={}){l=ke(l,["fill","stroke","width","height"]);var y=ie(m,o,l),w=fn(o),$=Zr(o),se=We(o),xe=se.get("name");if(w){var _e=$?[{x:30,y:0},{x:30,y:ht(o,l)}]:[{x:0,y:30},{x:Tt(o,l),y:30}];A(m,_e,{stroke:Z(o,c,l.stroke),strokeWidth:cc}),it(m,xe,o,l)}else{var we=Hn(o,l);$||(we.height=Tt(o,l),we.width=ht(o,l));var Be=re(m,xe,{box:we,align:"center-middle",style:{fill:Wn(o,b,c,l.stroke)}});if(!$){var Ee=-1*ht(o,l);Qi(Be,0,-Ee,270)}}return se.get("participantMultiplicity")&&ue("ParticipantMultiplicityMarker",m,o,l),y},"bpmn:ReceiveTask":function(m,o,l={}){l=ke(l,["fill","stroke"]);var y=We(o),w=Ae(m,o,l),$;return y.get("instantiate")?(K(m,28,28,20*.22,{fill:be(o,u,l.fill),stroke:Z(o,c,l.stroke),strokeWidth:1}),$=i.getScaledPath("TASK_TYPE_INSTANTIATING_SEND",{abspos:{x:7.77,y:9.52}})):$=i.getScaledPath("TASK_TYPE_SEND",{xScaleFactor:.9,yScaleFactor:.9,containerWidth:21,containerHeight:14,position:{mx:.3,my:.4}}),g(m,$,{fill:be(o,u,l.fill),stroke:Z(o,c,l.stroke),strokeWidth:1}),w},"bpmn:ScriptTask":function(m,o,l={}){l=ke(l,["fill","stroke"]);var y=Ae(m,o,l),w=i.getScaledPath("TASK_TYPE_SCRIPT",{abspos:{x:15,y:20}});return g(m,w,{fill:be(o,u,l.fill),stroke:Z(o,c,l.stroke),strokeWidth:1}),y},"bpmn:SendTask":function(m,o,l={}){l=ke(l,["fill","stroke"]);var y=Ae(m,o,l),w=i.getScaledPath("TASK_TYPE_SEND",{xScaleFactor:1,yScaleFactor:1,containerWidth:21,containerHeight:14,position:{mx:.285,my:.357}});return g(m,w,{fill:Z(o,c,l.stroke),stroke:be(o,u,l.fill),strokeWidth:1}),y},"bpmn:SequenceFlow":function(m,o,l={}){l=ke(l,["fill","stroke"]);var y=be(o,u,l.fill),w=Z(o,c,l.stroke),$=N(m,o.waypoints,{markerEnd:ee("sequenceflow-end",y,w),stroke:w}),se=We(o),{source:xe}=o;if(xe){var _e=We(xe);se.get("conditionExpression")&&ce(_e,"bpmn:Activity")&&Re($,{markerStart:ee("conditional-flow-marker",y,w)}),_e.get("default")&&(ce(_e,"bpmn:Gateway")||ce(_e,"bpmn:Activity"))&&_e.get("default")===se&&Re($,{markerStart:ee("conditional-default-flow-marker",y,w)})}return $},"bpmn:ServiceTask":function(m,o,l={}){l=ke(l,["fill","stroke"]);var y=Ae(m,o,l);K(m,10,10,{fill:be(o,u,l.fill),stroke:"none",transform:"translate(6, 6)"});var w=i.getScaledPath("TASK_TYPE_SERVICE",{abspos:{x:12,y:18}});g(m,w,{fill:be(o,u,l.fill),stroke:Z(o,c,l.stroke),strokeWidth:1}),K(m,10,10,{fill:be(o,u,l.fill),stroke:"none",transform:"translate(11, 10)"});var $=i.getScaledPath("TASK_TYPE_SERVICE",{abspos:{x:17,y:22}});return g(m,$,{fill:be(o,u,l.fill),stroke:Z(o,c,l.stroke),strokeWidth:1}),y},"bpmn:StartEvent":function(m,o,l={}){var{renderIcon:y=!0}=l;l=ke(l,["fill","stroke"]);var w=We(o);w.get("isInterrupting")||(l={...l,strokeDasharray:"6"});var $=P(m,o,l);return y&&G(o,m,l),$},"bpmn:SubProcess":function(m,o,l={}){return fn(o)?l=ke(l,["fill","stroke","width","height"]):l=ke(l,["fill","stroke"]),Te(m,o,l)},"bpmn:Task":function(m,o,l={}){return l=ke(l,["fill","stroke"]),Ae(m,o,l)},"bpmn:TextAnnotation":function(m,o,l={}){l=ke(l,["fill","stroke","width","height"]);var{width:y,height:w}=Hn(o,l),$=B(m,y,w,0,0,{fill:"none",stroke:"none"}),se=i.getScaledPath("TEXT_ANNOTATION",{xScaleFactor:1,yScaleFactor:1,containerWidth:y,containerHeight:w,position:{mx:0,my:0}});g(m,se,{stroke:Z(o,c,l.stroke)});var xe=We(o),_e=xe.get("text")||"";return re(m,_e,{align:"left-top",box:Hn(o,l),padding:7,style:{fill:Wn(o,b,c,l.stroke)}}),$},"bpmn:Transaction":function(m,o,l={}){fn(o)?l=ke(l,["fill","stroke","width","height"]):l=ke(l,["fill","stroke"]);var y=Te(m,o,{strokeWidth:1.5,...l}),w=n.style(["no-fill","no-events"],{stroke:Z(o,c,l.stroke),strokeWidth:1.5}),$=fn(o);return $||(l={}),B(m,Tt(o,l),ht(o,l),_i-mi,mi,w),y},"bpmn:UserTask":function(m,o,l={}){l=ke(l,["fill","stroke"]);var y=Ae(m,o,l),w=15,$=12,se=i.getScaledPath("TASK_TYPE_USER_1",{abspos:{x:w,y:$}});g(m,se,{fill:be(o,u,l.fill),stroke:Z(o,c,l.stroke),strokeWidth:.5});var xe=i.getScaledPath("TASK_TYPE_USER_2",{abspos:{x:w,y:$}});g(m,xe,{fill:be(o,u,l.fill),stroke:Z(o,c,l.stroke),strokeWidth:.5});var _e=i.getScaledPath("TASK_TYPE_USER_3",{abspos:{x:w,y:$}});return g(m,_e,{fill:Z(o,c,l.stroke),stroke:Z(o,c,l.stroke),strokeWidth:.5}),y},label:function(m,o,l={}){return pt(m,o,l)}};this._drawPath=g,this._renderer=L}zt(_n,Gt);_n.$inject=["config.bpmnRenderer","eventBus","styles","pathMap","canvas","textRenderer"];_n.prototype.canRender=function(e){return ce(e,"bpmn:BaseElement")};_n.prototype.drawShape=function(e,t,n={}){var{type:i}=t,r=this._renderer(i);return r(e,t,n)};_n.prototype.drawConnection=function(e,t,n={}){var{type:i}=t,r=this._renderer(i);return r(e,t,n)};_n.prototype.getShapePath=function(e){return ce(e,"bpmn:Event")?Lu(e):ce(e,"bpmn:Activity")?Bu(e,_i):ce(e,"bpmn:Gateway")?Ou(e):Uu(e)};function ke(e,t=[]){return t.reduce((n,i)=>(e[i]&&(n[i]=e[i]),n),{})}var fc=0,mc={width:150,height:50};function hc(e){var t=e.split("-");return{horizontal:t[0]||"center",vertical:t[1]||"top"}}function yc(e){return hn(e)?me({top:0,left:0,right:0,bottom:0},e):{top:e,left:e,right:e,bottom:e}}function vc(e,t){t.textContent=e;var n;try{var i,r=e==="";return t.textContent=r?"dummy":e,n=t.getBBox(),i={width:n.width+n.x*2,height:n.height},r&&(i.width=0),i}catch(a){return{width:0,height:0}}}function gc(e,t,n){for(var i=e.shift(),r=i,a;;){if(a=vc(r,n),a.width=r?a.width:0,r===" "||r===""||a.width<Math.round(t)||r.length<2)return bc(e,r,i,a);r=wc(r,a.width,t)}}function bc(e,t,n,i){if(t.length<n.length){var r=n.slice(t.length).trim();e.unshift(r)}return{width:i.width,height:i.height,text:t}}var oa="­";function _c(e,t){var n=e.split(/(\s|-|\u00AD)/g),i,r=[],a=0;if(n.length>1)for(;i=n.shift();)if(i.length+a<t)r.push(i),a+=i.length;else{(i==="-"||i===oa)&&r.pop();break}var s=r[r.length-1];return s&&s===oa&&(r[r.length-1]="-"),r.join("")}function wc(e,t,n){var i=Math.max(e.length*(n/t),1),r=_c(e,i);return r||(r=e.slice(0,Math.max(Math.round(i-1),1))),r}function xc(){var e=document.getElementById("helper-svg");return e||(e=$e("svg"),Re(e,{id:"helper-svg"}),vt(e,{visibility:"hidden",position:"fixed",width:0,height:0}),document.body.appendChild(e)),e}function Pi(e){this._config=me({},{size:mc,padding:fc,style:{},align:"center-top"},e||{})}Pi.prototype.createText=function(e,t){return this.layoutText(e,t).element};Pi.prototype.getDimensions=function(e,t){return this.layoutText(e,t).dimensions};Pi.prototype.layoutText=function(e,t){var n=me({},this._config.size,t.box),i=me({},this._config.style,t.style),r=hc(t.align||this._config.align),a=yc(t.padding!==void 0?t.padding:this._config.padding),s=t.fitBox||!1,u=Ec(i),c=e.split(/\u00AD?\r?\n/),b=[],v=n.width-a.left-a.right,x=$e("text");Re(x,{x:0,y:0}),Re(x,i);var f=xc();for(He(f,x);c.length;)b.push(gc(c,v,x));r.vertical==="middle"&&(a.top=a.bottom=0);var U=In(b,function(K,B,C){return K+(u||B.height)},0)+a.top+a.bottom,X=In(b,function(K,B,C){return B.width>K?B.width:K},0),J=a.top;r.vertical==="middle"&&(J+=(n.height-U)/2),J-=(u||b[0].height)/4;var ee=$e("text");Re(ee,i),ae(b,function(K){var B;switch(J+=u||K.height,r.horizontal){case"left":B=a.left;break;case"right":B=(s?X:v)-a.right-K.width;break;default:B=Math.max(((s?X:v)-K.width)/2+a.left,0)}var C=$e("tspan");Re(C,{x:B,y:J}),C.textContent=K.text,He(ee,C)}),Vn(x);var D={width:X,height:U};return{dimensions:D,element:ee}};function Ec(e){if("fontSize"in e&&"lineHeight"in e)return e.lineHeight*parseInt(e.fontSize,10)}var kc=12,Sc=1.2,Ac=30;function co(e){var t=me({fontFamily:"Arial, sans-serif",fontSize:kc,fontWeight:"normal",lineHeight:Sc},e&&e.defaultStyle||{}),n=parseInt(t.fontSize,10)-1,i=me({},t,{fontSize:n},e&&e.externalStyle||{}),r=new Pi({style:t});this.getExternalLabelBounds=function(a,s){var u=r.getDimensions(s,{box:{width:90,height:30},style:i});return{x:Math.round(a.x+a.width/2-u.width/2),y:Math.round(a.y),width:Math.ceil(u.width),height:Math.ceil(u.height)}},this.getTextAnnotationBounds=function(a,s){var u=r.getDimensions(s,{box:a,style:t,align:"left-top",padding:5});return{x:a.x,y:a.y,width:a.width,height:Math.max(Ac,Math.round(u.height))}},this.createText=function(a,s){return r.createText(a,s||{})},this.getDefaultStyle=function(){return t},this.getExternalStyle=function(){return i}}co.$inject=["config.textRenderer"];function Tc(){this.pathMap={EVENT_MESSAGE:{d:"m {mx},{my} l 0,{e.y1} l {e.x1},0 l 0,-{e.y1} z l {e.x0},{e.y0} l {e.x0},-{e.y0}",height:36,width:36,heightElements:[6,14],widthElements:[10.5,21]},EVENT_SIGNAL:{d:"M {mx},{my} l {e.x0},{e.y0} l -{e.x1},0 Z",height:36,width:36,heightElements:[18],widthElements:[10,20]},EVENT_ESCALATION:{d:"M {mx},{my} l {e.x0},{e.y0} l -{e.x0},-{e.y1} l -{e.x0},{e.y1} Z",height:36,width:36,heightElements:[20,7],widthElements:[8]},EVENT_CONDITIONAL:{d:"M {e.x0},{e.y0} l {e.x1},0 l 0,{e.y2} l -{e.x1},0 Z M {e.x2},{e.y3} l {e.x0},0 M {e.x2},{e.y4} l {e.x0},0 M {e.x2},{e.y5} l {e.x0},0 M {e.x2},{e.y6} l {e.x0},0 M {e.x2},{e.y7} l {e.x0},0 M {e.x2},{e.y8} l {e.x0},0 ",height:36,width:36,heightElements:[8.5,14.5,18,11.5,14.5,17.5,20.5,23.5,26.5],widthElements:[10.5,14.5,12.5]},EVENT_LINK:{d:"m {mx},{my} 0,{e.y0} -{e.x1},0 0,{e.y1} {e.x1},0 0,{e.y0} {e.x0},-{e.y2} -{e.x0},-{e.y2} z",height:36,width:36,heightElements:[4.4375,6.75,7.8125],widthElements:[9.84375,13.5]},EVENT_ERROR:{d:"m {mx},{my} {e.x0},-{e.y0} {e.x1},-{e.y1} {e.x2},{e.y2} {e.x3},-{e.y3} -{e.x4},{e.y4} -{e.x5},-{e.y5} z",height:36,width:36,heightElements:[.023,8.737,8.151,16.564,10.591,8.714],widthElements:[.085,6.672,6.97,4.273,5.337,6.636]},EVENT_CANCEL_45:{d:"m {mx},{my} -{e.x1},0 0,{e.x0} {e.x1},0 0,{e.y1} {e.x0},0 0,-{e.y1} {e.x1},0 0,-{e.y0} -{e.x1},0 0,-{e.y1} -{e.x0},0 z",height:36,width:36,heightElements:[4.75,8.5],widthElements:[4.75,8.5]},EVENT_COMPENSATION:{d:"m {mx},{my} {e.x0},-{e.y0} 0,{e.y1} z m {e.x1},-{e.y2} {e.x2},-{e.y3} 0,{e.y1} -{e.x2},-{e.y3} z",height:36,width:36,heightElements:[6.5,13,.4,6.1],widthElements:[9,9.3,8.7]},EVENT_TIMER_WH:{d:"M {mx},{my} l {e.x0},-{e.y0} m -{e.x0},{e.y0} l {e.x1},{e.y1} ",height:36,width:36,heightElements:[10,2],widthElements:[3,7]},EVENT_TIMER_LINE:{d:"M {mx},{my} m {e.x0},{e.y0} l -{e.x1},{e.y1} ",height:36,width:36,heightElements:[10,3],widthElements:[0,0]},EVENT_MULTIPLE:{d:"m {mx},{my} {e.x1},-{e.y0} {e.x1},{e.y0} -{e.x0},{e.y1} -{e.x2},0 z",height:36,width:36,heightElements:[6.28099,12.56199],widthElements:[3.1405,9.42149,12.56198]},EVENT_PARALLEL_MULTIPLE:{d:"m {mx},{my} {e.x0},0 0,{e.y1} {e.x1},0 0,{e.y0} -{e.x1},0 0,{e.y1} -{e.x0},0 0,-{e.y1} -{e.x1},0 0,-{e.y0} {e.x1},0 z",height:36,width:36,heightElements:[2.56228,7.68683],widthElements:[2.56228,7.68683]},GATEWAY_EXCLUSIVE:{d:"m {mx},{my} {e.x0},{e.y0} {e.x1},{e.y0} {e.x2},0 {e.x4},{e.y2} {e.x4},{e.y1} {e.x2},0 {e.x1},{e.y3} {e.x0},{e.y3} {e.x3},0 {e.x5},{e.y1} {e.x5},{e.y2} {e.x3},0 z",height:17.5,width:17.5,heightElements:[8.5,6.5312,-6.5312,-8.5],widthElements:[6.5,-6.5,3,-3,5,-5]},GATEWAY_PARALLEL:{d:"m {mx},{my} 0,{e.y1} -{e.x1},0 0,{e.y0} {e.x1},0 0,{e.y1} {e.x0},0 0,-{e.y1} {e.x1},0 0,-{e.y0} -{e.x1},0 0,-{e.y1} -{e.x0},0 z",height:30,width:30,heightElements:[5,12.5],widthElements:[5,12.5]},GATEWAY_EVENT_BASED:{d:"m {mx},{my} {e.x0},{e.y0} {e.x0},{e.y1} {e.x1},{e.y2} {e.x2},0 z",height:11,width:11,heightElements:[-6,6,12,-12],widthElements:[9,-3,-12]},GATEWAY_COMPLEX:{d:"m {mx},{my} 0,{e.y0} -{e.x0},-{e.y1} -{e.x1},{e.y2} {e.x0},{e.y1} -{e.x2},0 0,{e.y3} {e.x2},0  -{e.x0},{e.y1} l {e.x1},{e.y2} {e.x0},-{e.y1} 0,{e.y0} {e.x3},0 0,-{e.y0} {e.x0},{e.y1} {e.x1},-{e.y2} -{e.x0},-{e.y1} {e.x2},0 0,-{e.y3} -{e.x2},0 {e.x0},-{e.y1} -{e.x1},-{e.y2} -{e.x0},{e.y1} 0,-{e.y0} -{e.x3},0 z",height:17.125,width:17.125,heightElements:[4.875,3.4375,2.125,3],widthElements:[3.4375,2.125,4.875,3]},DATA_OBJECT_PATH:{d:"m 0,0 {e.x1},0 {e.x0},{e.y0} 0,{e.y1} -{e.x2},0 0,-{e.y2} {e.x1},0 0,{e.y0} {e.x0},0",height:61,width:51,heightElements:[10,50,60],widthElements:[10,40,50,60]},DATA_OBJECT_COLLECTION_PATH:{d:"m{mx},{my} m 3,2 l 0,10 m 3,-10 l 0,10 m 3,-10 l 0,10",height:10,width:10,heightElements:[],widthElements:[]},DATA_ARROW:{d:"m 5,9 9,0 0,-3 5,5 -5,5 0,-3 -9,0 z",height:61,width:51,heightElements:[],widthElements:[]},DATA_STORE:{d:"m  {mx},{my} l  0,{e.y2} c  {e.x0},{e.y1} {e.x1},{e.y1}  {e.x2},0 l  0,-{e.y2} c -{e.x0},-{e.y1} -{e.x1},-{e.y1} -{e.x2},0c  {e.x0},{e.y1} {e.x1},{e.y1}  {e.x2},0 m  -{e.x2},{e.y0}c  {e.x0},{e.y1} {e.x1},{e.y1} {e.x2},0m  -{e.x2},{e.y0}c  {e.x0},{e.y1} {e.x1},{e.y1}  {e.x2},0",height:61,width:61,heightElements:[7,10,45],widthElements:[2,58,60]},TEXT_ANNOTATION:{d:"m {mx}, {my} m 10,0 l -10,0 l 0,{e.y0} l 10,0",height:30,width:10,heightElements:[30],widthElements:[10]},MARKER_SUB_PROCESS:{d:"m{mx},{my} m 7,2 l 0,10 m -5,-5 l 10,0",height:10,width:10,heightElements:[],widthElements:[]},MARKER_PARALLEL:{d:"m{mx},{my} m 3,2 l 0,10 m 3,-10 l 0,10 m 3,-10 l 0,10",height:10,width:10,heightElements:[],widthElements:[]},MARKER_SEQUENTIAL:{d:"m{mx},{my} m 0,3 l 10,0 m -10,3 l 10,0 m -10,3 l 10,0",height:10,width:10,heightElements:[],widthElements:[]},MARKER_COMPENSATION:{d:"m {mx},{my} 7,-5 0,10 z m 7.1,-0.3 6.9,-4.7 0,10 -6.9,-4.7 z",height:10,width:21,heightElements:[],widthElements:[]},MARKER_LOOP:{d:"m {mx},{my} c 3.526979,0 6.386161,-2.829858 6.386161,-6.320661 0,-3.490806 -2.859182,-6.320661 -6.386161,-6.320661 -3.526978,0 -6.38616,2.829855 -6.38616,6.320661 0,1.745402 0.714797,3.325567 1.870463,4.469381 0.577834,0.571908 1.265885,1.034728 2.029916,1.35457 l -0.718163,-3.909793 m 0.718163,3.909793 -3.885211,0.802902",height:13.9,width:13.7,heightElements:[],widthElements:[]},MARKER_ADHOC:{d:"m {mx},{my} m 0.84461,2.64411 c 1.05533,-1.23780996 2.64337,-2.07882 4.29653,-1.97997996 2.05163,0.0805 3.85579,1.15803 5.76082,1.79107 1.06385,0.34139996 2.24454,0.1438 3.18759,-0.43767 0.61743,-0.33642 1.2775,-0.64078 1.7542,-1.17511 0,0.56023 0,1.12046 0,1.6807 -0.98706,0.96237996 -2.29792,1.62393996 -3.6918,1.66181996 -1.24459,0.0927 -2.46671,-0.2491 -3.59505,-0.74812 -1.35789,-0.55965 -2.75133,-1.33436996 -4.27027,-1.18121996 -1.37741,0.14601 -2.41842,1.13685996 -3.44288,1.96782996 z",height:4,width:15,heightElements:[],widthElements:[]},TASK_TYPE_SEND:{d:"m {mx},{my} l 0,{e.y1} l {e.x1},0 l 0,-{e.y1} z l {e.x0},{e.y0} l {e.x0},-{e.y0}",height:14,width:21,heightElements:[6,14],widthElements:[10.5,21]},TASK_TYPE_SCRIPT:{d:"m {mx},{my} c 9.966553,-6.27276 -8.000926,-7.91932 2.968968,-14.938 l -8.802728,0 c -10.969894,7.01868 6.997585,8.66524 -2.968967,14.938 z m -7,-12 l 5,0 m -4.5,3 l 4.5,0 m -3,3 l 5,0m -4,3 l 5,0",height:15,width:12.6,heightElements:[6,14],widthElements:[10.5,21]},TASK_TYPE_USER_1:{d:"m {mx},{my} c 0.909,-0.845 1.594,-2.049 1.594,-3.385 0,-2.554 -1.805,-4.62199999 -4.357,-4.62199999 -2.55199998,0 -4.28799998,2.06799999 -4.28799998,4.62199999 0,1.348 0.974,2.562 1.89599998,3.405 -0.52899998,0.187 -5.669,2.097 -5.794,4.7560005 v 6.718 h 17 v -6.718 c 0,-2.2980005 -5.5279996,-4.5950005 -6.0509996,-4.7760005 zm -8,6 l 0,5.5 m 11,0 l 0,-5"},TASK_TYPE_USER_2:{d:"m {mx},{my} m 2.162,1.009 c 0,2.4470005 -2.158,4.4310005 -4.821,4.4310005 -2.66499998,0 -4.822,-1.981 -4.822,-4.4310005 "},TASK_TYPE_USER_3:{d:"m {mx},{my} m -6.9,-3.80 c 0,0 2.25099998,-2.358 4.27399998,-1.177 2.024,1.181 4.221,1.537 4.124,0.965 -0.098,-0.57 -0.117,-3.79099999 -4.191,-4.13599999 -3.57499998,0.001 -4.20799998,3.36699999 -4.20699998,4.34799999 z"},TASK_TYPE_MANUAL:{d:"m {mx},{my} c 0.234,-0.01 5.604,0.008 8.029,0.004 0.808,0 1.271,-0.172 1.417,-0.752 0.227,-0.898 -0.334,-1.314 -1.338,-1.316 -2.467,-0.01 -7.886,-0.004 -8.108,-0.004 -0.014,-0.079 0.016,-0.533 0,-0.61 0.195,-0.042 8.507,0.006 9.616,0.002 0.877,-0.007 1.35,-0.438 1.353,-1.208 0.003,-0.768 -0.479,-1.09 -1.35,-1.091 -2.968,-0.002 -9.619,-0.013 -9.619,-0.013 v -0.591 c 0,0 5.052,-0.016 7.225,-0.016 0.888,-0.002 1.354,-0.416 1.351,-1.193 -0.006,-0.761 -0.492,-1.196 -1.361,-1.196 -3.473,-0.005 -10.86,-0.003 -11.0829995,-0.003 -0.022,-0.047 -0.045,-0.094 -0.069,-0.139 0.3939995,-0.319 2.0409995,-1.626 2.4149995,-2.017 0.469,-0.4870005 0.519,-1.1650005 0.162,-1.6040005 -0.414,-0.511 -0.973,-0.5 -1.48,-0.236 -1.4609995,0.764 -6.5999995,3.6430005 -7.7329995,4.2710005 -0.9,0.499 -1.516,1.253 -1.882,2.19 -0.37000002,0.95 -0.17,2.01 -0.166,2.979 0.004,0.718 -0.27300002,1.345 -0.055,2.063 0.629,2.087 2.425,3.312 4.859,3.318 4.6179995,0.014 9.2379995,-0.139 13.8569995,-0.158 0.755,-0.004 1.171,-0.301 1.182,-1.033 0.012,-0.754 -0.423,-0.969 -1.183,-0.973 -1.778,-0.01 -5.824,-0.004 -6.04,-0.004 10e-4,-0.084 0.003,-0.586 10e-4,-0.67 z"},TASK_TYPE_INSTANTIATING_SEND:{d:"m {mx},{my} l 0,8.4 l 12.6,0 l 0,-8.4 z l 6.3,3.6 l 6.3,-3.6"},TASK_TYPE_SERVICE:{d:"m {mx},{my} v -1.71335 c 0.352326,-0.0705 0.703932,-0.17838 1.047628,-0.32133 0.344416,-0.14465 0.665822,-0.32133 0.966377,-0.52145 l 1.19431,1.18005 1.567487,-1.57688 -1.195028,-1.18014 c 0.403376,-0.61394 0.683079,-1.29908 0.825447,-2.01824 l 1.622133,-0.01 v -2.2196 l -1.636514,0.01 c -0.07333,-0.35153 -0.178319,-0.70024 -0.323564,-1.04372 -0.145244,-0.34406 -0.321407,-0.6644 -0.522735,-0.96217 l 1.131035,-1.13631 -1.583305,-1.56293 -1.129598,1.13589 c -0.614052,-0.40108 -1.302883,-0.68093 -2.022633,-0.82247 l 0.0093,-1.61852 h -2.241173 l 0.0042,1.63124 c -0.353763,0.0736 -0.705369,0.17977 -1.049785,0.32371 -0.344415,0.14437 -0.665102,0.32092 -0.9635006,0.52046 l -1.1698628,-1.15823 -1.5667691,1.5792 1.1684265,1.15669 c -0.4026573,0.61283 -0.68308,1.29797 -0.8247287,2.01713 l -1.6588041,0.003 v 2.22174 l 1.6724648,-0.006 c 0.073327,0.35077 0.1797598,0.70243 0.3242851,1.04472 0.1452428,0.34448 0.3214064,0.6644 0.5227339,0.96066 l -1.1993431,1.19723 1.5840256,1.56011 1.1964668,-1.19348 c 0.6140517,0.40346 1.3028827,0.68232 2.0233517,0.82331 l 7.19e-4,1.69892 h 2.226848 z m 0.221462,-3.9957 c -1.788948,0.7502 -3.8576,-0.0928 -4.6097055,-1.87438 -0.7521065,-1.78321 0.090598,-3.84627 1.8802645,-4.59604 1.78823,-0.74936 3.856881,0.0929 4.608987,1.87437 0.752106,1.78165 -0.0906,3.84612 -1.879546,4.59605 z"},TASK_TYPE_SERVICE_FILL:{d:"m {mx},{my} c -1.788948,0.7502 -3.8576,-0.0928 -4.6097055,-1.87438 -0.7521065,-1.78321 0.090598,-3.84627 1.8802645,-4.59604 1.78823,-0.74936 3.856881,0.0929 4.608987,1.87437 0.752106,1.78165 -0.0906,3.84612 -1.879546,4.59605 z"},TASK_TYPE_BUSINESS_RULE_HEADER:{d:"m {mx},{my} 0,4 20,0 0,-4 z"},TASK_TYPE_BUSINESS_RULE_MAIN:{d:"m {mx},{my} 0,12 20,0 0,-12 zm 0,8 l 20,0 m -13,-4 l 0,8"},MESSAGE_FLOW_MARKER:{d:"m {mx},{my} m -10.5 ,-7 l 0,14 l 21,0 l 0,-14 z l 10.5,6 l 10.5,-6"}},this.getRawPath=function(t){return this.pathMap[t].d},this.getScaledPath=function(t,n){var i=this.pathMap[t],r,a;n.abspos?(r=n.abspos.x,a=n.abspos.y):(r=n.containerWidth*n.position.mx,a=n.containerHeight*n.position.my);var s={};if(n.position){for(var u=n.containerHeight/i.height*n.yScaleFactor,c=n.containerWidth/i.width*n.xScaleFactor,b=0;b<i.heightElements.length;b++)s["y"+b]=i.heightElements[b]*u;for(var v=0;v<i.widthElements.length;v++)s["x"+v]=i.widthElements[v]*c}var x=Ic(i.d,{mx:r,my:a,e:s});return x}}var Cc=/\{([^{}]+)\}/g,Rc=/(?:(?:^|\.)(.+?)(?=\[|\.|$|\()|\[('|")(.+?)\2\])(\(\))?/g;function Dc(e,t,n){var i=n;return t.replace(Rc,function(r,a,s,u,c){a=a||u,i&&(a in i&&(i=i[a]),typeof i=="function"&&c&&(i=i()))}),i=(i==null||i==n?e:i)+"",i}function Ic(e,t){return String(e).replace(Cc,function(n,i){return Dc(n,i,t)})}const Nc={__init__:["bpmnRenderer"],bpmnRenderer:["type",_n],textRenderer:["type",co],pathMap:["type",Tc]};function Mc(e,t){return t=t||{},e.replace(/{([^}]+)}/g,function(n,i){return t[i]||"{"+i+"}"})}const po={translate:["value",Mc]};function Pc(e){return{x:Math.round(e.x),y:Math.round(e.y)}}function lr(e){return{top:e.y,right:e.x+(e.width||0),bottom:e.y+(e.height||0),left:e.x}}function $c(e){return{x:e.left,y:e.top,width:e.right-e.left,height:e.bottom-e.top}}function Vc(e){return Pc({x:e.x+(e.width||0)/2,y:e.y+(e.height||0)/2})}function Lc(e){for(var t=e.waypoints,n=t.reduce(function(b,v,x){var f=t[x-1];if(f){var U=b[b.length-1],X=U&&U.endLength||0,J=Bc(f,v);b.push({start:f,end:v,startLength:X,endLength:X+J,length:J})}return b},[]),i=n.reduce(function(b,v){return b+v.length},0),r=i/2,a=0,s=n[a];s.endLength<r;)s=n[++a];var u=(r-s.startLength)/s.length,c={x:s.start.x+(s.end.x-s.start.x)*u,y:s.start.y+(s.end.y-s.start.y)*u};return c}function ur(e){return uu(e)?Lc(e):Vc(e)}function Bc(e,t){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))}function at(e){return e?"<"+e.$type+(e.id?' id="'+e.id:"")+'" />':"<null>"}function wi(e,t,n){return me({id:e.id,type:e.$type,businessObject:e,di:t},n)}function Oc(e,t,n){var i=e.waypoint;return!i||i.length<2?[ur(t),ur(n)]:i.map(function(r){return{x:r.x,y:r.y}})}function fo(e,t,n,i){return new Error(e("element {element} referenced by {referenced}#{property} not yet drawn",{element:at(n),referenced:at(t),property:i}))}function Qt(e,t,n,i,r,a){this._eventBus=e,this._canvas=t,this._elementFactory=n,this._elementRegistry=i,this._translate=r,this._textRenderer=a}Qt.$inject=["eventBus","canvas","elementFactory","elementRegistry","translate","textRenderer"];Qt.prototype.add=function(e,t,n){var i,r=this._translate,a,s;if(ce(t,"bpmndi:BPMNPlane")){var u=ce(e,"bpmn:SubProcess")?{id:e.id+"_plane"}:{};i=this._elementFactory.createRoot(wi(e,t,u)),this._canvas.addRootElement(i)}else if(ce(t,"bpmndi:BPMNShape")){var c=!fn(e,t),b=Fc(e);a=n&&(n.hidden||n.collapsed);var v=t.bounds;i=this._elementFactory.createShape(wi(e,t,{collapsed:c,hidden:a,x:Math.round(v.x),y:Math.round(v.y),width:Math.round(v.width),height:Math.round(v.height),isFrame:b})),ce(e,"bpmn:BoundaryEvent")&&this._attachBoundary(e,i),ce(e,"bpmn:Lane")&&(s=0),ce(e,"bpmn:DataStoreReference")&&(Uc(n,ur(v))||(n=this._canvas.findRoot(n))),this._canvas.addShape(i,n,s)}else if(ce(t,"bpmndi:BPMNEdge")){var x=this._getSource(e),f=this._getTarget(e);a=n&&(n.hidden||n.collapsed),i=this._elementFactory.createConnection(wi(e,t,{hidden:a,source:x,target:f,waypoints:Oc(t,x,f)})),ce(e,"bpmn:DataAssociation")&&(n=this._canvas.findRoot(n)),this._canvas.addConnection(i,n,s)}else throw new Error(r("unknown di {di} for element {semantic}",{di:at(t),semantic:at(e)}));return cu(e)&&Ti(i)&&this.addLabel(e,t,i),this._eventBus.fire("bpmnElement.added",{element:i}),i};Qt.prototype._attachBoundary=function(e,t){var n=this._translate,i=e.attachedToRef;if(!i)throw new Error(n("missing {semantic}#attachedToRef",{semantic:at(e)}));var r=this._elementRegistry.get(i.id),a=r&&r.attachers;if(!r)throw fo(n,e,i,"attachedToRef");t.host=r,a||(r.attachers=a=[]),a.indexOf(t)===-1&&a.push(t)};Qt.prototype.addLabel=function(e,t,n){var i,r,a;return i=mu(t,n),r=Ti(n),r&&(i=this._textRenderer.getExternalLabelBounds(i,r)),a=this._elementFactory.createLabel(wi(e,t,{id:e.id+"_label",labelTarget:n,type:"label",hidden:n.hidden||!Ti(n),x:Math.round(i.x),y:Math.round(i.y),width:Math.round(i.width),height:Math.round(i.height)})),this._canvas.addShape(a,n.parent)};Qt.prototype._getConnectedElement=function(e,t){var n,i,r=e.$type,a=this._translate;if(i=e[t+"Ref"],t==="source"&&r==="bpmn:DataInputAssociation"&&(i=i&&i[0]),(t==="source"&&r==="bpmn:DataOutputAssociation"||t==="target"&&r==="bpmn:DataInputAssociation")&&(i=e.$parent),n=i&&this._getElement(i),n)return n;throw i?fo(a,e,i,t+"Ref"):new Error(a("{semantic}#{side} Ref not specified",{semantic:at(e),side:t}))};Qt.prototype._getSource=function(e){return this._getConnectedElement(e,"source")};Qt.prototype._getTarget=function(e){return this._getConnectedElement(e,"target")};Qt.prototype._getElement=function(e){return this._elementRegistry.get(e.id)};function Uc(e,t){var n=t.x,i=t.y;return n>=e.x&&n<=e.x+e.width&&i>=e.y&&i<=e.y+e.height}function Fc(e){return ce(e,"bpmn:Group")}const qc={__depends__:[po],bpmnImporter:["type",Qt]},jc={__depends__:[Nc,qc]};function mo(e){return e.originalEvent||e.srcEvent}function ho(e,t){return(mo(e)||e).button===t}function $i(e){return ho(e,0)}function zc(e){return ho(e,1)}function Wc(e){var t=mo(e)||e;return $i(e)&&t.shiftKey}function Hc(e){return!0}function hi(e){return $i(e)||zc(e)}var sa=500;function yo(e,t,n){var i=this;function r(R,L,M){if(!u(R,L)){var H,G,te;M?G=t.getGraphics(M):(H=L.delegateTarget||L.target,H&&(G=H,M=t.get(G))),!(!G||!M)&&(te=e.fire(R,{element:M,gfx:G,originalEvent:L}),te===!1&&(L.stopPropagation(),L.preventDefault()))}}var a={};function s(R){return a[R]}function u(R,L){var M=b[R]||$i;return!M(L)}var c={click:"element.click",contextmenu:"element.contextmenu",dblclick:"element.dblclick",mousedown:"element.mousedown",mousemove:"element.mousemove",mouseover:"element.hover",mouseout:"element.out",mouseup:"element.mouseup"},b={"element.contextmenu":Hc,"element.mousedown":hi,"element.mouseup":hi,"element.click":hi,"element.dblclick":hi};function v(R,L,M){var H=c[R];if(!H)throw new Error("unmapped DOM event name <"+R+">");return r(H,L,M)}var x="svg, .djs-element";function f(R,L,M,H){var G=a[M]=function(te){r(M,te)};H&&(b[M]=H),G.$delegate=sr.bind(R,x,L,G)}function U(R,L,M){var H=s(M);H&&sr.unbind(R,L,H.$delegate)}function X(R){ae(c,function(L,M){f(R,M,L)})}function J(R){ae(c,function(L,M){U(R,M,L)})}e.on("canvas.destroy",function(R){J(R.svg)}),e.on("canvas.init",function(R){X(R.svg)}),e.on(["shape.added","connection.added"],function(R){var L=R.element,M=R.gfx;e.fire("interactionEvents.createHit",{element:L,gfx:M})}),e.on(["shape.changed","connection.changed"],sa,function(R){var L=R.element,M=R.gfx;e.fire("interactionEvents.updateHit",{element:L,gfx:M})}),e.on("interactionEvents.createHit",sa,function(R){var L=R.element,M=R.gfx;i.createDefaultHit(L,M)}),e.on("interactionEvents.updateHit",function(R){var L=R.element,M=R.gfx;i.updateDefaultHit(L,M)});var ee=A("djs-hit djs-hit-stroke"),D=A("djs-hit djs-hit-click-stroke"),K=A("djs-hit djs-hit-all"),B=A("djs-hit djs-hit-no-move"),C={all:K,"click-stroke":D,stroke:ee,"no-move":B};function A(R,L){return L=me({stroke:"white",strokeWidth:15},L||{}),n.cls(R,["no-fill","no-border"],L)}function N(R,L){var M=C[L];if(!M)throw new Error("invalid hit type <"+L+">");return Re(R,M),R}function g(R,L){He(R,L)}this.removeHits=function(R){var L=rc(".djs-hit",R);ae(L,Vn)},this.createDefaultHit=function(R,L){var M=R.waypoints,H=R.isFrame,G;return M?this.createWaypointsHit(L,M):(G=H?"stroke":"all",this.createBoxHit(L,G,{width:R.width,height:R.height}))},this.createWaypointsHit=function(R,L){var M=br(L);return N(M,"stroke"),g(R,M),M},this.createBoxHit=function(R,L,M){M=me({x:0,y:0},M);var H=$e("rect");return N(H,L),Re(H,M),g(R,H),H},this.updateDefaultHit=function(R,L){var M=It(".djs-hit",L);if(M)return R.waypoints?ro(M,R.waypoints):Re(M,{width:R.width,height:R.height}),M},this.fire=r,this.triggerMouseEvent=v,this.mouseHandler=s,this.registerEvent=f,this.unregisterEvent=U}yo.$inject=["eventBus","elementRegistry","styles"];const Yc={__init__:["interactionEvents"],interactionEvents:["type",yo]};function vn(e,t){t=!!t,Mt(e)||(e=[e]);var n,i,r,a;return ae(e,function(s){var u=s;s.waypoints&&!t&&(u=vn(s.waypoints,!0));var c=u.x,b=u.y,v=u.height||0,x=u.width||0;(c<n||n===void 0)&&(n=c),(b<i||i===void 0)&&(i=b),(c+x>r||r===void 0)&&(r=c+x),(b+v>a||a===void 0)&&(a=b+v)}),{x:n,y:i,height:a-i,width:r-n}}function vo(e){return"waypoints"in e?"connection":"x"in e?"shape":"root"}function go(e){return!!(e&&e.isFrame)}var Kc=500,Gc=1e3;function wn(e,t){this._eventBus=e,this.offset=5;var n=t.cls("djs-outline",["no-fill"]),i=this;function r(a){var s=$e("rect");return Re(s,me({x:0,y:0,rx:4,width:100,height:100},n)),s}e.on(["shape.added","shape.changed"],Kc,function(a){var s=a.element,u=a.gfx,c=It(".djs-outline",u);c||(c=i.getOutline(s)||r(),He(u,c)),i.updateShapeOutline(c,s)}),e.on(["connection.added","connection.changed"],function(a){var s=a.element,u=a.gfx,c=It(".djs-outline",u);c||(c=r(),He(u,c)),i.updateConnectionOutline(c,s)})}wn.prototype.updateShapeOutline=function(e,t){var n=!1,i=this._getProviders();i.length&&ae(i,function(r){n=n||r.updateOutline(t,e)}),n||Re(e,{x:-this.offset,y:-this.offset,width:t.width+this.offset*2,height:t.height+this.offset*2})};wn.prototype.updateConnectionOutline=function(e,t){var n=vn(t);Re(e,{x:n.x-this.offset,y:n.y-this.offset,width:n.width+this.offset*2,height:n.height+this.offset*2})};wn.prototype.registerProvider=function(e,t){t||(t=e,e=Gc),this._eventBus.on("outline.getProviders",e,function(n){n.providers.push(t)})};wn.prototype._getProviders=function(){var e=this._eventBus.createEvent({type:"outline.getProviders",providers:[]});return this._eventBus.fire(e),e.providers};wn.prototype.getOutline=function(e){var t,n=this._getProviders();return ae(n,function(i){en(i.getOutline)&&(t=t||i.getOutline(e))}),t};wn.$inject=["eventBus","styles","elementRegistry"];const Qc={__init__:["outline"],outline:["type",wn]};function Ln(e,t){this._eventBus=e,this._canvas=t,this._selectedElements=[];var n=this;e.on(["shape.remove","connection.remove"],function(i){var r=i.element;n.deselect(r)}),e.on(["diagram.clear","root.set"],function(i){n.select(null)})}Ln.$inject=["eventBus","canvas"];Ln.prototype.deselect=function(e){var t=this._selectedElements,n=t.indexOf(e);if(n!==-1){var i=t.slice();t.splice(n,1),this._eventBus.fire("selection.changed",{oldSelection:i,newSelection:t})}};Ln.prototype.get=function(){return this._selectedElements};Ln.prototype.isSelected=function(e){return this._selectedElements.indexOf(e)!==-1};Ln.prototype.select=function(e,t){var n=this._selectedElements,i=n.slice();Mt(e)||(e=e?[e]:[]);var r=this._canvas,a=r.getRootElement();e=e.filter(function(s){var u=r.findRoot(s);return a===u}),t?ae(e,function(s){n.indexOf(s)===-1&&n.push(s)}):this._selectedElements=n=e.slice(),this._eventBus.fire("selection.changed",{oldSelection:i,newSelection:n})};var la="hover",ua="selected",yi=6;function xr(e,t,n){this._canvas=e;var i=this;this._multiSelectionBox=null;function r(s,u){e.addMarker(s,u)}function a(s,u){e.removeMarker(s,u)}t.on("element.hover",function(s){r(s.element,la)}),t.on("element.out",function(s){a(s.element,la)}),t.on("selection.changed",function(s){function u(x){a(x,ua)}function c(x){r(x,ua)}var b=s.oldSelection,v=s.newSelection;ae(b,function(x){v.indexOf(x)===-1&&u(x)}),ae(v,function(x){b.indexOf(x)===-1&&c(x)}),i._updateSelectionOutline(v)}),t.on("element.changed",function(s){n.isSelected(s.element)&&i._updateSelectionOutline(n.get())})}xr.$inject=["canvas","eventBus","selection"];xr.prototype._updateSelectionOutline=function(e){var t=this._canvas.getLayer("selectionOutline");to(t);var n=e.length>1,i=this._canvas.getContainer();if(wt(i)[n?"add":"remove"]("djs-multi-select"),!!n){var r=Xc(vn(e)),a=$e("rect");Re(a,me({rx:3},r)),wt(a).add("djs-selection-outline"),He(t,a)}};function Xc(e){return{x:e.x-yi,y:e.y-yi,width:e.width+yi*2,height:e.height+yi*2}}function bo(e,t,n,i){e.on("create.end",500,function(r){var a=r.context,s=a.canExecute,u=a.elements,c=a.hints||{},b=c.autoSelect;if(s){if(b===!1)return;Mt(b)?t.select(b):t.select(u.filter(Zc))}}),e.on("connect.end",500,function(r){var a=r.context,s=a.connection;s&&t.select(s)}),e.on("shape.move.end",500,function(r){var a=r.previousSelection||[],s=i.get(r.context.shape.id),u=Pt(a,function(c){return s.id===c.id});u||t.select(s)}),e.on("element.click",function(r){if($i(r)){var a=r.element;a===n.getRootElement()&&(a=null);var s=t.isSelected(a),u=t.get().length>1,c=Wc(r);if(s&&u)return c?t.deselect(a):t.select(a);s?t.deselect(a):t.select(a,c)}})}bo.$inject=["eventBus","selection","canvas","elementRegistry"];function Zc(e){return!e.hidden}const Jc={__init__:["selectionVisuals","selectionBehavior"],__depends__:[Yc,Qc],selection:["type",Ln],selectionVisuals:["type",xr],selectionBehavior:["type",bo]};function _o(e){this._counter=0,this._prefix=(e?e+"-":"")+Math.floor(Math.random()*1e9)+"-"}_o.prototype.next=function(){return this._prefix+ ++this._counter};var ed=new _o("ov"),td=500;function Je(e,t,n,i){this._eventBus=t,this._canvas=n,this._elementRegistry=i,this._ids=ed,this._overlayDefaults=me({show:null,scale:!0},e&&e.defaults),this._overlays={},this._overlayContainers=[],this._overlayRoot=nd(n.getContainer()),this._init()}Je.$inject=["config.overlays","eventBus","canvas","elementRegistry"];Je.prototype.get=function(e){if(qt(e)&&(e={id:e}),qt(e.element)&&(e.element=this._elementRegistry.get(e.element)),e.element){var t=this._getOverlayContainer(e.element,!0);return t?e.type?Dn(t.overlays,Xr({type:e.type})):t.overlays.slice():[]}else return e.type?Dn(this._overlays,Xr({type:e.type})):e.id?this._overlays[e.id]:null};Je.prototype.add=function(e,t,n){if(hn(t)&&(n=t,t=null),e.id||(e=this._elementRegistry.get(e)),!n.position)throw new Error("must specifiy overlay position");if(!n.html)throw new Error("must specifiy overlay html");if(!e)throw new Error("invalid element specified");var i=this._ids.next();return n=me({},this._overlayDefaults,n,{id:i,type:t,element:e,html:n.html}),this._addOverlay(n),i};Je.prototype.remove=function(e){var t=this.get(e)||[];Mt(t)||(t=[t]);var n=this;ae(t,function(i){var r=n._getOverlayContainer(i.element,!0);if(i&&(Di(i.html),Di(i.htmlContainer),delete i.htmlContainer,delete i.element,delete n._overlays[i.id]),r){var a=r.overlays.indexOf(i);a!==-1&&r.overlays.splice(a,1)}})};Je.prototype.isShown=function(){return this._overlayRoot.style.display!=="none"};Je.prototype.show=function(){Vi(this._overlayRoot)};Je.prototype.hide=function(){Vi(this._overlayRoot,!1)};Je.prototype.clear=function(){this._overlays={},this._overlayContainers=[],ao(this._overlayRoot)};Je.prototype._updateOverlayContainer=function(e){var t=e.element,n=e.html,i=t.x,r=t.y;if(t.waypoints){var a=vn(t);i=a.x,r=a.y}wo(n,i,r),Gu(e.html,"data-container-id",t.id)};Je.prototype._updateOverlay=function(e){var t=e.position,n=e.htmlContainer,i=e.element,r=t.left,a=t.top;if(t.right!==void 0){var s;i.waypoints?s=vn(i).width:s=i.width,r=t.right*-1+s}if(t.bottom!==void 0){var u;i.waypoints?u=vn(i).height:u=i.height,a=t.bottom*-1+u}wo(n,r||0,a||0),this._updateOverlayVisibilty(e,this._canvas.viewbox())};Je.prototype._createOverlayContainer=function(e){var t=jt('<div class="djs-overlays" />');vt(t,{position:"absolute"}),this._overlayRoot.appendChild(t);var n={html:t,element:e,overlays:[]};return this._updateOverlayContainer(n),this._overlayContainers.push(n),n};Je.prototype._updateRoot=function(e){var t=e.scale||1,n="matrix("+[t,0,0,t,-1*e.x*t,-1*e.y*t].join(",")+")";xo(this._overlayRoot,n)};Je.prototype._getOverlayContainer=function(e,t){var n=Pt(this._overlayContainers,function(i){return i.element===e});return!n&&!t?this._createOverlayContainer(e):n};Je.prototype._addOverlay=function(e){var t=e.id,n=e.element,i=e.html,r,a;i.get&&i.constructor.prototype.jquery&&(i=i.get(0)),qt(i)&&(i=jt(i)),a=this._getOverlayContainer(n),r=jt('<div class="djs-overlay" data-overlay-id="'+t+'">'),vt(r,{position:"absolute"}),r.appendChild(i),e.type&&Mi(r).add("djs-overlay-"+e.type);var s=this._canvas.findRoot(n),u=this._canvas.getRootElement();Vi(r,s===u),e.htmlContainer=r,a.overlays.push(e),a.html.appendChild(r),this._overlays[t]=e,this._updateOverlay(e),this._updateOverlayVisibilty(e,this._canvas.viewbox())};Je.prototype._updateOverlayVisibilty=function(e,t){var n=e.show,i=this._canvas.findRoot(e.element),r=n&&n.minZoom,a=n&&n.maxZoom,s=e.htmlContainer,u=this._canvas.getRootElement(),c=!0;(i!==u||n&&(Cn(r)&&r>t.scale||Cn(a)&&a<t.scale))&&(c=!1),Vi(s,c),this._updateOverlayScale(e,t)};Je.prototype._updateOverlayScale=function(e,t){var n=e.scale,i,r,a=e.htmlContainer,s,u="";n!==!0&&(n===!1?(i=1,r=1):(i=n.min,r=n.max),Cn(i)&&t.scale<i&&(s=(1/t.scale||1)*i),Cn(r)&&t.scale>r&&(s=(1/t.scale||1)*r)),Cn(s)&&(u="scale("+s+","+s+")"),xo(a,u)};Je.prototype._updateOverlaysVisibilty=function(e){var t=this;ae(this._overlays,function(n){t._updateOverlayVisibilty(n,e)})};Je.prototype._init=function(){var e=this._eventBus,t=this;function n(i){t._updateRoot(i),t._updateOverlaysVisibilty(i),t.show()}e.on("canvas.viewbox.changing",function(i){t.hide()}),e.on("canvas.viewbox.changed",function(i){n(i.viewbox)}),e.on(["shape.remove","connection.remove"],function(i){var r=i.element,a=t.get({element:r});ae(a,function(c){t.remove(c.id)});var s=t._getOverlayContainer(r);if(s){Di(s.html);var u=t._overlayContainers.indexOf(s);u!==-1&&t._overlayContainers.splice(u,1)}}),e.on("element.changed",td,function(i){var r=i.element,a=t._getOverlayContainer(r,!0);a&&(ae(a.overlays,function(s){t._updateOverlay(s)}),t._updateOverlayContainer(a))}),e.on("element.marker.update",function(i){var r=t._getOverlayContainer(i.element,!0);r&&Mi(r.html)[i.add?"add":"remove"](i.marker)}),e.on("root.set",function(){t._updateOverlaysVisibilty(t._canvas.viewbox())}),e.on("diagram.clear",this.clear,this)};function nd(e){var t=jt('<div class="djs-overlay-container" />');return vt(t,{position:"absolute",width:0,height:0}),e.insertBefore(t,e.firstChild),t}function wo(e,t,n){vt(e,{left:t+"px",top:n+"px"})}function Vi(e,t){e.style.display=t===!1?"none":""}function xo(e,t){e.style["transform-origin"]="top left",["","-ms-","-webkit-"].forEach(function(n){e.style[n+"transform"]=t})}const Eo={__init__:["overlays"],overlays:["type",Je]};function ko(e,t,n,i){e.on("element.changed",function(r){var a=r.element;(a.parent||a===t.getRootElement())&&(r.gfx=n.getGraphics(a)),r.gfx&&e.fire(vo(a)+".changed",r)}),e.on("elements.changed",function(r){var a=r.elements;a.forEach(function(s){e.fire("element.changed",{element:s})}),i.updateContainments(a)}),e.on("shape.changed",function(r){i.update("shape",r.element,r.gfx)}),e.on("connection.changed",function(r){i.update("connection",r.element,r.gfx)})}ko.$inject=["eventBus","canvas","elementRegistry","graphicsFactory"];const id={__init__:["changeSupport"],changeSupport:["type",ko]};var rd=1e3;function dt(e){this._eventBus=e}dt.$inject=["eventBus"];function ad(e,t){return function(n){return e.call(t||null,n.context,n.command,n)}}dt.prototype.on=function(e,t,n,i,r,a){if((en(t)||tn(t))&&(a=r,r=i,i=n,n=t,t=null),en(n)&&(a=r,r=i,i=n,n=rd),hn(r)&&(a=r,r=!1),!en(i))throw new Error("handlerFn must be a function");Mt(e)||(e=[e]);var s=this._eventBus;ae(e,function(u){var c=["commandStack",u,t].filter(function(b){return b}).join(".");s.on(c,n,r?ad(i,a):i,a)})};dt.prototype.canExecute=Xt("canExecute");dt.prototype.preExecute=Xt("preExecute");dt.prototype.preExecuted=Xt("preExecuted");dt.prototype.execute=Xt("execute");dt.prototype.executed=Xt("executed");dt.prototype.postExecute=Xt("postExecute");dt.prototype.postExecuted=Xt("postExecuted");dt.prototype.revert=Xt("revert");dt.prototype.reverted=Xt("reverted");function Xt(e){return function(n,i,r,a,s){(en(n)||tn(n))&&(s=a,a=r,r=i,i=n,n=null),this.on(n,e,i,r,a,s)}}function Er(e,t){t.invoke(dt,this),this.executed(function(n){var i=n.context;i.rootElement?e.setRootElement(i.rootElement):i.rootElement=e.getRootElement()}),this.revert(function(n){var i=n.context;i.rootElement&&e.setRootElement(i.rootElement)})}zt(Er,dt);Er.$inject=["canvas","injector"];const od={__init__:["rootElementsBehavior"],rootElementsBehavior:["type",Er]};var sd={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"};function ld(e){return e=""+e,e&&e.replace(/[&<>"']/g,function(t){return sd[t]})}var ud="_plane";function kr(e){var t=e.id;return ce(e,"bpmn:SubProcess")?cd(t):t}function cd(e){return e+ud}var dd="bjs-breadcrumbs-shown";function So(e,t,n){var i=jt('<ul class="bjs-breadcrumbs"></ul>'),r=n.getContainer(),a=Mi(r);r.appendChild(i);var s=[];e.on("element.changed",function(c){var b=c.element,v=We(b),x=Pt(s,function(f){return f===v});x&&u()});function u(c){c&&(s=pd(c));var b=s.map(function(x){var f=ld(x.name||x.id),U=jt('<li><span class="bjs-crumb"><a title="'+f+'">'+f+"</a></span></li>"),X=n.findRoot(kr(x))||n.findRoot(x.id);if(!X&&ce(x,"bpmn:Process")){var J=t.find(function(ee){var D=We(ee);return D&&D.get("processRef")&&D.get("processRef")===x});X=n.findRoot(J.id)}return U.addEventListener("click",function(){n.setRootElement(X)}),U});i.innerHTML="";var v=b.length>1;a.toggle(dd,v),b.forEach(function(x){i.appendChild(x)})}e.on("root.set",function(c){u(c.element)})}So.$inject=["eventBus","elementRegistry","canvas"];function pd(e){for(var t=We(e),n=[],i=t;i;i=i.$parent)(ce(i,"bpmn:SubProcess")||ce(i,"bpmn:Process"))&&n.push(i);return n.reverse()}function Ao(e,t){var n=null,i=new fd;e.on("root.set",function(r){var a=r.element,s=t.viewbox(),u=i.get(a);if(i.set(n,{x:s.x,y:s.y,zoom:s.scale}),n=a,!(ce(a,"bpmn:Collaboration")&&!u)){u=u||{x:0,y:0,zoom:1};var c=(s.x-u.x)*s.scale,b=(s.y-u.y)*s.scale;(c!==0||b!==0)&&t.scroll({dx:c,dy:b}),u.zoom!==s.scale&&t.zoom(u.zoom,{x:0,y:0})}}),e.on("diagram.clear",function(){i.clear(),n=null})}Ao.$inject=["eventBus","canvas"];function fd(){this._entries=[],this.set=function(e,t){var n=!1;for(var i in this._entries)if(this._entries[i][0]===e){this._entries[i][1]=t,n=!0;break}n||this._entries.push([e,t])},this.get=function(e){for(var t in this._entries)if(this._entries[t][0]===e)return this._entries[t][1];return null},this.clear=function(){this._entries.length=0},this.remove=function(e){var t=-1;for(var n in this._entries)if(this._entries[n][0]===e){t=n;break}t!==-1&&this._entries.splice(t,1)}}var ca={x:180,y:160};function xn(e,t){this._eventBus=e,this._moddle=t;var n=this;e.on("import.render.start",1500,function(i,r){n._handleImport(r.definitions)})}xn.prototype._handleImport=function(e){if(e.diagrams){var t=this;this._definitions=e,this._processToDiagramMap={},e.diagrams.forEach(function(i){!i.plane||!i.plane.bpmnElement||(t._processToDiagramMap[i.plane.bpmnElement.id]=i)});var n=[];e.diagrams.forEach(function(i){var r=t._createNewDiagrams(i.plane);Array.prototype.push.apply(n,r)}),n.forEach(function(i){t._movePlaneElementsToOrigin(i.plane)})}};xn.prototype._createNewDiagrams=function(e){var t=this,n=[],i=[];e.get("planeElement").forEach(function(a){var s=a.bpmnElement;if(s){var u=s.$parent;ce(s,"bpmn:SubProcess")&&!a.isExpanded&&n.push(s),hd(s,e)&&i.push({diElement:a,parent:u})}});var r=[];return n.forEach(function(a){if(!t._processToDiagramMap[a.id]){var s=t._createDiagram(a);t._processToDiagramMap[a.id]=s,r.push(s)}}),i.forEach(function(a){for(var s=a.diElement,u=a.parent;u&&n.indexOf(u)===-1;)u=u.$parent;if(u){var c=t._processToDiagramMap[u.id];t._moveToDiPlane(s,c.plane)}}),r};xn.prototype._movePlaneElementsToOrigin=function(e){var t=e.get("planeElement"),n=md(e),i={x:n.x-ca.x,y:n.y-ca.y};t.forEach(function(r){r.waypoint?r.waypoint.forEach(function(a){a.x=a.x-i.x,a.y=a.y-i.y}):r.bounds&&(r.bounds.x=r.bounds.x-i.x,r.bounds.y=r.bounds.y-i.y)})};xn.prototype._moveToDiPlane=function(e,t){var n=To(e),i=n.plane.get("planeElement");i.splice(i.indexOf(e),1),t.get("planeElement").push(e)};xn.prototype._createDiagram=function(e){var t=this._moddle.create("bpmndi:BPMNPlane",{bpmnElement:e}),n=this._moddle.create("bpmndi:BPMNDiagram",{plane:t});return t.$parent=n,t.bpmnElement=e,n.$parent=this._definitions,this._definitions.diagrams.push(n),n};xn.$inject=["eventBus","moddle"];function To(e){return ce(e,"bpmndi:BPMNDiagram")?e:To(e.$parent)}function md(e){var t={top:1/0,right:-1/0,bottom:-1/0,left:1/0};return e.planeElement.forEach(function(n){if(n.bounds){var i=lr(n.bounds);t.top=Math.min(i.top,t.top),t.left=Math.min(i.left,t.left)}}),$c(t)}function hd(e,t){var n=e.$parent;return!(!ce(n,"bpmn:SubProcess")||n===t.bpmnElement||su(e,["bpmn:DataInputAssociation","bpmn:DataOutputAssociation"]))}var vi=250,yd='<svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M4.81801948,3.50735931 L10.4996894,9.1896894 L10.5,4 L12,4 L12,12 L4,12 L4,10.5 L9.6896894,10.4996894 L3.75735931,4.56801948 C3.46446609,4.27512627 3.46446609,3.80025253 3.75735931,3.50735931 C4.05025253,3.21446609 4.52512627,3.21446609 4.81801948,3.50735931 Z"/></svg>',vd="bjs-drilldown-empty";function sn(e,t,n,i){dt.call(this,t),this._canvas=e,this._eventBus=t,this._elementRegistry=n,this._overlays=i;var r=this;this.executed("shape.toggleCollapse",vi,function(a){var s=a.shape;r._canDrillDown(s)?r._addOverlay(s):r._removeOverlay(s)},!0),this.reverted("shape.toggleCollapse",vi,function(a){var s=a.shape;r._canDrillDown(s)?r._addOverlay(s):r._removeOverlay(s)},!0),this.executed(["shape.create","shape.move","shape.delete"],vi,function(a){var s=a.oldParent,u=a.newParent||a.parent,c=a.shape;r._canDrillDown(c)&&r._addOverlay(c),r._updateDrilldownOverlay(s),r._updateDrilldownOverlay(u),r._updateDrilldownOverlay(c)},!0),this.reverted(["shape.create","shape.move","shape.delete"],vi,function(a){var s=a.oldParent,u=a.newParent||a.parent,c=a.shape;r._canDrillDown(c)&&r._addOverlay(c),r._updateDrilldownOverlay(s),r._updateDrilldownOverlay(u),r._updateDrilldownOverlay(c)},!0),t.on("import.render.complete",function(){n.filter(function(a){return r._canDrillDown(a)}).map(function(a){r._addOverlay(a)})})}zt(sn,dt);sn.prototype._updateDrilldownOverlay=function(e){var t=this._canvas;if(e){var n=t.findRoot(e);n&&this._updateOverlayVisibility(n)}};sn.prototype._canDrillDown=function(e){var t=this._canvas;return ce(e,"bpmn:SubProcess")&&t.findRoot(kr(e))};sn.prototype._updateOverlayVisibility=function(e){var t=this._overlays,n=We(e),i=t.get({element:n.id,type:"drilldown"})[0];if(i){var r=n&&n.get("flowElements")&&n.get("flowElements").length;Mi(i.html).toggle(vd,!r)}};sn.prototype._addOverlay=function(e){var t=this._canvas,n=this._overlays,i=n.get({element:e,type:"drilldown"});i.length&&this._removeOverlay(e);var r=jt('<button class="bjs-drilldown">'+yd+"</button>");r.addEventListener("click",function(){t.setRootElement(t.findRoot(kr(e)))}),n.add(e,"drilldown",{position:{bottom:-7,right:-8},html:r}),this._updateOverlayVisibility(e)};sn.prototype._removeOverlay=function(e){var t=this._overlays;t.remove({element:e,type:"drilldown"})};sn.$inject=["canvas","eventBus","elementRegistry","overlays"];const gd={__depends__:[Eo,id,od],__init__:["drilldownBreadcrumbs","drilldownOverlayBehavior","drilldownCentering","subprocessCompatibility"],drilldownBreadcrumbs:["type",So],drilldownCentering:["type",Ao],drilldownOverlayBehavior:["type",sn],subprocessCompatibility:["type",xn]},bd=/^class[ {]/;function _d(e){return bd.test(e.toString())}function Sr(e){return Array.isArray(e)}function Xi(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function xi(...e){e.length===1&&Sr(e[0])&&(e=e[0]),e=[...e];const t=e.pop();return t.$inject=e,t}const wd=/constructor\s*[^(]*\(\s*([^)]*)\)/m,xd=/^(?:async\s+)?(?:function\s*[^(]*)?(?:\(\s*([^)]*)\)|(\w+))/m,Ed=/\/\*([^*]*)\*\//m;function kd(e){if(typeof e!="function")throw new Error('Cannot annotate "'.concat(e,'". Expected a function!'));const t=e.toString().match(_d(e)?wd:xd);if(!t)return[];const n=t[1]||t[2];return n&&n.split(",").map(i=>{const r=i.match(Ed);return(r&&r[1]||i).trim()})||[]}function Co(e,t){const n=t||{get:function(B,C){if(i.push(B),C===!1)return null;throw u('No provider for "'.concat(B,'"!'))}},i=[],r=this._providers=Object.create(n._providers||null),a=this._instances=Object.create(null),s=a.injector=this,u=function(B){const C=i.join(" -> ");return i.length=0,new Error(C?"".concat(B," (Resolving: ").concat(C,")"):B)};function c(B,C){if(!r[B]&&B.includes(".")){const A=B.split(".");let N=c(A.shift());for(;A.length;)N=N[A.shift()];return N}if(Xi(a,B))return a[B];if(Xi(r,B)){if(i.indexOf(B)!==-1)throw i.push(B),u("Cannot resolve circular dependency!");return i.push(B),a[B]=r[B][0](r[B][1]),i.pop(),a[B]}return n.get(B,C)}function b(B,C){if(typeof C>"u"&&(C={}),typeof B!="function")if(Sr(B))B=xi(B.slice());else throw u('Cannot invoke "'.concat(B,'". Expected a function!'));const N=(B.$inject||kd(B)).map(g=>Xi(C,g)?C[g]:c(g));return{fn:B,dependencies:N}}function v(B){const{fn:C,dependencies:A}=b(B),N=Function.prototype.bind.call(C,null,...A);return new N}function x(B,C,A){const{fn:N,dependencies:g}=b(B,A);return N.apply(C,g)}function f(B){return xi(C=>B.get(C))}function U(B,C){if(C&&C.length){const A=Object.create(null),N=Object.create(null),g=[],R=[],L=[];let M,H,G,te;for(let ue in r)M=r[ue],C.indexOf(ue)!==-1&&(M[2]==="private"?(H=g.indexOf(M[3]),H===-1?(G=M[3].createChild([],C),te=f(G),g.push(M[3]),R.push(G),L.push(te),A[ue]=[te,ue,"private",G]):A[ue]=[L[H],ue,"private",R[H]]):A[ue]=[M[2],M[1]],N[ue]=!0),(M[2]==="factory"||M[2]==="type")&&M[1].$scope&&C.forEach(fe=>{M[1].$scope.indexOf(fe)!==-1&&(A[ue]=[M[2],M[1]],N[fe]=!0)});C.forEach(ue=>{if(!N[ue])throw new Error('No provider for "'+ue+'". Cannot use provider from the parent!')}),B.unshift(A)}return new Co(B,s)}const X={factory:x,type:v,value:function(B){return B}};function J(B,C){const A=B.__init__||[];return function(){A.forEach(N=>{typeof N=="string"?C.get(N):C.invoke(N)})}}function ee(B){const C=B.__exports__;if(C){const A=B.__modules__,N=Object.keys(B).reduce((H,G)=>(G!=="__exports__"&&G!=="__modules__"&&G!=="__init__"&&G!=="__depends__"&&(H[G]=B[G]),H),Object.create(null)),g=(A||[]).concat(N),R=U(g),L=xi(function(H){return R.get(H)});C.forEach(function(H){r[H]=[L,H,"private",R]});const M=(B.__init__||[]).slice();return M.unshift(function(){R.init()}),B=Object.assign({},B,{__init__:M}),J(B,R)}return Object.keys(B).forEach(function(A){if(A==="__init__"||A==="__depends__")return;const N=B[A];if(N[2]==="private"){r[A]=N;return}const g=N[0],R=N[1];r[A]=[X[g],Sd(g,R),g]}),J(B,s)}function D(B,C){return B.indexOf(C)!==-1||(B=(C.__depends__||[]).reduce(D,B),B.indexOf(C)!==-1)?B:B.concat(C)}function K(B){const C=B.reduce(D,[]).map(ee);let A=!1;return function(){A||(A=!0,C.forEach(N=>N()))}}this.get=c,this.invoke=x,this.instantiate=v,this.createChild=U,this.init=K(e)}function Sd(e,t){return e!=="value"&&Sr(t)&&(t=xi(t.slice())),t}var Ad=1;function ln(e,t){Gt.call(this,e,Ad),this.CONNECTION_STYLE=t.style(["no-fill"],{strokeWidth:5,stroke:"fuchsia"}),this.SHAPE_STYLE=t.style({fill:"white",stroke:"fuchsia",strokeWidth:2}),this.FRAME_STYLE=t.style(["no-fill"],{stroke:"fuchsia",strokeDasharray:4,strokeWidth:2})}zt(ln,Gt);ln.prototype.canRender=function(){return!0};ln.prototype.drawShape=function(t,n,i){var r=$e("rect");return Re(r,{x:0,y:0,width:n.width||0,height:n.height||0}),go(n)?Re(r,me({},this.FRAME_STYLE,i||{})):Re(r,me({},this.SHAPE_STYLE,i||{})),He(t,r),r};ln.prototype.drawConnection=function(t,n,i){var r=br(n.waypoints,me({},this.CONNECTION_STYLE,i||{}));return He(t,r),r};ln.prototype.getShapePath=function(t){var n=t.x,i=t.y,r=t.width,a=t.height,s=[["M",n,i],["l",r,0],["l",0,a],["l",-r,0],["z"]];return bn(s)};ln.prototype.getConnectionPath=function(t){var n=t.waypoints,i,r,a=[];for(i=0;r=n[i];i++)r=r.original||r,a.push([i===0?"M":"L",r.x,r.y]);return bn(a)};ln.$inject=["eventBus","styles"];function Td(){var e={"no-fill":{fill:"none"},"no-border":{strokeOpacity:0},"no-events":{pointerEvents:"none"}},t=this;this.cls=function(n,i,r){var a=this.style(i,r);return me(a,{class:n})},this.style=function(n,i){!Mt(n)&&!i&&(i=n,n=[]);var r=In(n,function(a,s){return me(a,e[s]||{})},{});return i?me(r,i):r},this.computeStyle=function(n,i,r){return Mt(i)||(r=i,i=[]),t.style(i||[],me({},r,n||{}))}}const Cd={__init__:["defaultRenderer"],defaultRenderer:["type",ln],styles:["type",Td]};function Rd(e,t){if(!e||!t)return-1;var n=e.indexOf(t);return n!==-1&&e.splice(n,1),n}function Dd(e,t,n){if(!(!e||!t)){typeof n!="number"&&(n=-1);var i=e.indexOf(t);if(i!==-1){if(i===n)return;if(n!==-1)e.splice(i,1);else return}n!==-1?e.splice(n,0,t):e.push(t)}}function Ei(e,t){return Math.round(e*t)/t}function da(e){return tn(e)?e+"px":e}function Id(e){for(;e.parent;)e=e.parent;return e}function Nd(e){e=me({},{width:"100%",height:"100%"},e);const t=e.container||document.body,n=document.createElement("div");return n.setAttribute("class","djs-container djs-parent"),vt(n,{position:"relative",overflow:"hidden",width:da(e.width),height:da(e.height)}),t.appendChild(n),n}function Ro(e,t,n){const i=$e("g");wt(i).add(t);const r=n!==void 0?n:e.childNodes.length-1;return e.insertBefore(i,e.childNodes[r]||null),i}const Md="base",Do=0,Pd=1,$d={shape:["x","y","width","height"],connection:["waypoints"]};function ge(e,t,n,i){this._eventBus=t,this._elementRegistry=i,this._graphicsFactory=n,this._rootsIdx=0,this._layers={},this._planes=[],this._rootElement=null,this._init(e||{})}ge.$inject=["config.canvas","eventBus","graphicsFactory","elementRegistry"];ge.prototype._init=function(e){const t=this._eventBus,n=this._container=Nd(e),i=this._svg=$e("svg");Re(i,{width:"100%",height:"100%"}),He(n,i);const r=this._viewport=Ro(i,"viewport");e.deferUpdate&&(this._viewboxChanged=nu(nn(this._viewboxChanged,this),300)),t.on("diagram.init",()=>{t.fire("canvas.init",{svg:i,viewport:r})}),t.on(["shape.added","connection.added","shape.removed","connection.removed","elements.changed","root.set"],()=>{delete this._cachedViewbox}),t.on("diagram.destroy",500,this._destroy,this),t.on("diagram.clear",500,this._clear,this)};ge.prototype._destroy=function(){this._eventBus.fire("canvas.destroy",{svg:this._svg,viewport:this._viewport});const e=this._container.parentNode;e&&e.removeChild(this._container),delete this._svg,delete this._container,delete this._layers,delete this._planes,delete this._rootElement,delete this._viewport};ge.prototype._clear=function(){this._elementRegistry.getAll().forEach(t=>{const n=vo(t);n==="root"?this.removeRootElement(t):this._removeElement(t,n)}),this._planes=[],this._rootElement=null,delete this._cachedViewbox};ge.prototype.getDefaultLayer=function(){return this.getLayer(Md,Do)};ge.prototype.getLayer=function(e,t){if(!e)throw new Error("must specify a name");let n=this._layers[e];if(n||(n=this._layers[e]=this._createLayer(e,t)),typeof t<"u"&&n.index!==t)throw new Error("layer <"+e+"> already created at index <"+t+">");return n.group};ge.prototype._getChildIndex=function(e){return In(this._layers,function(t,n){return n.visible&&e>=n.index&&t++,t},0)};ge.prototype._createLayer=function(e,t){typeof t>"u"&&(t=Pd);const n=this._getChildIndex(t);return{group:Ro(this._viewport,"layer-"+e,n),index:t,visible:!0}};ge.prototype.showLayer=function(e){if(!e)throw new Error("must specify a name");const t=this._layers[e];if(!t)throw new Error("layer <"+e+"> does not exist");const n=this._viewport,i=t.group,r=t.index;if(t.visible)return i;const a=this._getChildIndex(r);return n.insertBefore(i,n.childNodes[a]||null),t.visible=!0,i};ge.prototype.hideLayer=function(e){if(!e)throw new Error("must specify a name");const t=this._layers[e];if(!t)throw new Error("layer <"+e+"> does not exist");const n=t.group;return t.visible&&(Vn(n),t.visible=!1),n};ge.prototype._removeLayer=function(e){const t=this._layers[e];t&&(delete this._layers[e],Vn(t.group))};ge.prototype.getActiveLayer=function(){const e=this._findPlaneForRoot(this.getRootElement());return e?e.layer:null};ge.prototype.findRoot=function(e){return typeof e=="string"&&(e=this._elementRegistry.get(e)),e?(this._findPlaneForRoot(Id(e))||{}).rootElement:void 0};ge.prototype.getRootElements=function(){return this._planes.map(function(e){return e.rootElement})};ge.prototype._findPlaneForRoot=function(e){return Pt(this._planes,function(t){return t.rootElement===e})};ge.prototype.getContainer=function(){return this._container};ge.prototype._updateMarker=function(e,t,n){let i;e.id||(e=this._elementRegistry.get(e)),i=this._elementRegistry._elements[e.id],i&&(ae([i.gfx,i.secondaryGfx],function(r){r&&(n?wt(r).add(t):wt(r).remove(t))}),this._eventBus.fire("element.marker.update",{element:e,gfx:i.gfx,marker:t,add:!!n}))};ge.prototype.addMarker=function(e,t){this._updateMarker(e,t,!0)};ge.prototype.removeMarker=function(e,t){this._updateMarker(e,t,!1)};ge.prototype.hasMarker=function(e,t){e.id||(e=this._elementRegistry.get(e));const n=this.getGraphics(e);return wt(n).has(t)};ge.prototype.toggleMarker=function(e,t){this.hasMarker(e,t)?this.removeMarker(e,t):this.addMarker(e,t)};ge.prototype.getRootElement=function(){const e=this._rootElement;return e||this._planes.length?e:this.setRootElement(this.addRootElement(null))};ge.prototype.addRootElement=function(e){const t=this._rootsIdx++;e||(e={id:"__implicitroot_"+t,children:[],isImplicit:!0});const n=e.layer="root-"+t;this._ensureValid("root",e);const i=this.getLayer(n,Do);return this.hideLayer(n),this._addRoot(e,i),this._planes.push({rootElement:e,layer:i}),e};ge.prototype.removeRootElement=function(e){if(typeof e=="string"&&(e=this._elementRegistry.get(e)),!!this._findPlaneForRoot(e))return this._removeRoot(e),this._removeLayer(e.layer),this._planes=this._planes.filter(function(n){return n.rootElement!==e}),this._rootElement===e&&(this._rootElement=null),e};ge.prototype.setRootElement=function(e){if(e===this._rootElement)return e;let t;if(!e)throw new Error("rootElement required");return t=this._findPlaneForRoot(e),t||(e=this.addRootElement(e)),this._setRoot(e),e};ge.prototype._removeRoot=function(e){const t=this._elementRegistry,n=this._eventBus;n.fire("root.remove",{element:e}),n.fire("root.removed",{element:e}),t.remove(e)};ge.prototype._addRoot=function(e,t){const n=this._elementRegistry,i=this._eventBus;i.fire("root.add",{element:e}),n.add(e,t),i.fire("root.added",{element:e,gfx:t})};ge.prototype._setRoot=function(e,t){const n=this._rootElement;n&&(this._elementRegistry.updateGraphics(n,null,!0),this.hideLayer(n.layer)),e&&(t||(t=this._findPlaneForRoot(e).layer),this._elementRegistry.updateGraphics(e,this._svg,!0),this.showLayer(e.layer)),this._rootElement=e,this._eventBus.fire("root.set",{element:e})};ge.prototype._ensureValid=function(e,t){if(!t.id)throw new Error("element must have an id");if(this._elementRegistry.get(t.id))throw new Error("element <"+t.id+"> already exists");const n=$d[e];if(!Qa(n,function(r){return typeof t[r]<"u"}))throw new Error("must supply { "+n.join(", ")+" } with "+e)};ge.prototype._setParent=function(e,t,n){Dd(t.children,e,n),e.parent=t};ge.prototype._addElement=function(e,t,n,i){n=n||this.getRootElement();const r=this._eventBus,a=this._graphicsFactory;this._ensureValid(e,t),r.fire(e+".add",{element:t,parent:n}),this._setParent(t,n,i);const s=a.create(e,t,i);return this._elementRegistry.add(t,s),a.update(e,t,s),r.fire(e+".added",{element:t,gfx:s}),t};ge.prototype.addShape=function(e,t,n){return this._addElement("shape",e,t,n)};ge.prototype.addConnection=function(e,t,n){return this._addElement("connection",e,t,n)};ge.prototype._removeElement=function(e,t){const n=this._elementRegistry,i=this._graphicsFactory,r=this._eventBus;if(e=n.get(e.id||e),!!e)return r.fire(t+".remove",{element:e}),i.remove(e),Rd(e.parent&&e.parent.children,e),e.parent=null,r.fire(t+".removed",{element:e}),n.remove(e),e};ge.prototype.removeShape=function(e){return this._removeElement(e,"shape")};ge.prototype.removeConnection=function(e){return this._removeElement(e,"connection")};ge.prototype.getGraphics=function(e,t){return this._elementRegistry.getGraphics(e,t)};ge.prototype._changeViewbox=function(e){this._eventBus.fire("canvas.viewbox.changing"),e.apply(this),this._cachedViewbox=null,this._viewboxChanged()};ge.prototype._viewboxChanged=function(){this._eventBus.fire("canvas.viewbox.changed",{viewbox:this.viewbox()})};ge.prototype.viewbox=function(e){if(e===void 0&&this._cachedViewbox)return this._cachedViewbox;const t=this._viewport,n=this.getSize();let i,r,a,s,u,c,b;if(e)this._changeViewbox(function(){u=Math.min(n.width/e.width,n.height/e.height);const v=this._svg.createSVGMatrix().scale(u).translate(-e.x,-e.y);Xn(t,v)});else return a=this._rootElement?this.getActiveLayer():null,i=a&&a.getBBox()||{},s=Xn(t),r=s?s.matrix:xu(),u=Ei(r.a,1e3),c=Ei(-r.e||0,1e3),b=Ei(-r.f||0,1e3),e=this._cachedViewbox={x:c?c/u:0,y:b?b/u:0,width:n.width/u,height:n.height/u,scale:u,inner:{width:i.width||0,height:i.height||0,x:i.x||0,y:i.y||0},outer:n},e;return e};ge.prototype.scroll=function(e){const t=this._viewport;let n=t.getCTM();return e&&this._changeViewbox(function(){e=me({dx:0,dy:0},e||{}),n=this._svg.createSVGMatrix().translate(e.dx,e.dy).multiply(n),Io(t,n)}),{x:n.e,y:n.f}};ge.prototype.scrollToElement=function(e,t){let n=100;typeof e=="string"&&(e=this._elementRegistry.get(e));const i=this.findRoot(e);if(i!==this.getRootElement()&&this.setRootElement(i),i===e)return;t||(t={}),typeof t=="number"&&(n=t),t={top:t.top||n,right:t.right||n,bottom:t.bottom||n,left:t.left||n};const r=vn(e),a=lr(r),s=this.viewbox(),u=this.zoom();let c,b;s.y+=t.top/u,s.x+=t.left/u,s.width-=(t.right+t.left)/u,s.height-=(t.bottom+t.top)/u;const v=lr(s);if(!(r.width<s.width&&r.height<s.height))c=r.x-s.x,b=r.y-s.y;else{const f=Math.max(0,a.right-v.right),U=Math.min(0,a.left-v.left),X=Math.max(0,a.bottom-v.bottom),J=Math.min(0,a.top-v.top);c=f||U,b=X||J}this.scroll({dx:-c*u,dy:-b*u})};ge.prototype.zoom=function(e,t){if(!e)return this.viewbox(e).scale;if(e==="fit-viewport")return this._fitViewport(t);let n,i;return this._changeViewbox(function(){typeof t!="object"&&(n=this.viewbox().outer,t={x:n.width/2,y:n.height/2}),i=this._setZoom(e,t)}),Ei(i.a,1e3)};function Io(e,t){const n="matrix("+t.a+","+t.b+","+t.c+","+t.d+","+t.e+","+t.f+")";e.setAttribute("transform",n)}ge.prototype._fitViewport=function(e){const t=this.viewbox(),n=t.outer,i=t.inner;let r,a;return i.x>=0&&i.y>=0&&i.x+i.width<=n.width&&i.y+i.height<=n.height&&!e?a={x:0,y:0,width:Math.max(i.width+i.x,n.width),height:Math.max(i.height+i.y,n.height)}:(r=Math.min(1,n.width/i.width,n.height/i.height),a={x:i.x+(e?i.width/2-n.width/r/2:0),y:i.y+(e?i.height/2-n.height/r/2:0),width:n.width/r,height:n.height/r}),this.viewbox(a),this.viewbox(!1).scale};ge.prototype._setZoom=function(e,t){const n=this._svg,i=this._viewport,r=n.createSVGMatrix(),a=n.createSVGPoint();let s,u,c,b,v;c=i.getCTM();const x=c.a;return t?(s=me(a,t),u=s.matrixTransform(c.inverse()),b=r.translate(u.x,u.y).scale(1/x*e).translate(-u.x,-u.y),v=c.multiply(b)):v=r.scale(e),Io(this._viewport,v),v};ge.prototype.getSize=function(){return{width:this._container.clientWidth,height:this._container.clientHeight}};ge.prototype.getAbsoluteBBox=function(e){const t=this.viewbox();let n;e.waypoints?n=this.getGraphics(e).getBBox():n=e;const i=n.x*t.scale-t.x*t.scale,r=n.y*t.scale-t.y*t.scale,a=n.width*t.scale,s=n.height*t.scale;return{x:i,y:r,width:a,height:s}};ge.prototype.resized=function(){delete this._cachedViewbox,this._eventBus.fire("canvas.resized")};var Nn="data-element-id";function xt(e){this._elements={},this._eventBus=e}xt.$inject=["eventBus"];xt.prototype.add=function(e,t,n){var i=e.id;this._validateId(i),Re(t,Nn,i),n&&Re(n,Nn,i),this._elements[i]={element:e,gfx:t,secondaryGfx:n}};xt.prototype.remove=function(e){var t=this._elements,n=e.id||e,i=n&&t[n];i&&(Re(i.gfx,Nn,""),i.secondaryGfx&&Re(i.secondaryGfx,Nn,""),delete t[n])};xt.prototype.updateId=function(e,t){this._validateId(t),typeof e=="string"&&(e=this.get(e)),this._eventBus.fire("element.updateId",{element:e,newId:t});var n=this.getGraphics(e),i=this.getGraphics(e,!0);this.remove(e),e.id=t,this.add(e,n,i)};xt.prototype.updateGraphics=function(e,t,n){var i=e.id||e,r=this._elements[i];return n?r.secondaryGfx=t:r.gfx=t,t&&Re(t,Nn,i),t};xt.prototype.get=function(e){var t;typeof e=="string"?t=e:t=e&&Re(e,Nn);var n=this._elements[t];return n&&n.element};xt.prototype.filter=function(e){var t=[];return this.forEach(function(n,i){e(n,i)&&t.push(n)}),t};xt.prototype.find=function(e){for(var t=this._elements,n=Object.keys(t),i=0;i<n.length;i++){var r=n[i],a=t[r],s=a.element,u=a.gfx;if(e(s,u))return s}};xt.prototype.getAll=function(){return this.filter(function(e){return e})};xt.prototype.forEach=function(e){var t=this._elements;Object.keys(t).forEach(function(n){var i=t[n],r=i.element,a=i.gfx;return e(r,a)})};xt.prototype.getGraphics=function(e,t){var n=e.id||e,i=this._elements[n];return i&&(t?i.secondaryGfx:i.gfx)};xt.prototype._validateId=function(e){if(!e)throw new Error("element must have an id");if(this._elements[e])throw new Error("element with id "+e+" already added")};function Vd(e,t,n,i){var r=n.inverse;return Object.defineProperty(e,"remove",{value:function(a){var s=this.indexOf(a);return s!==-1&&(this.splice(s,1),t.unset(a,r,i)),a}}),Object.defineProperty(e,"contains",{value:function(a){return this.indexOf(a)!==-1}}),Object.defineProperty(e,"add",{value:function(a,s){var u=this.indexOf(a);if(typeof s>"u"){if(u!==-1)return;s=this.length}u!==-1&&this.splice(u,1),this.splice(s,0,a),u===-1&&t.set(a,r,i)}}),Object.defineProperty(e,"__refs_collection",{value:!0}),e}function Ld(e){return e.__refs_collection===!0}function Bd(e,t){return Object.prototype.hasOwnProperty.call(e,t.name||t)}function No(e,t,n){var i=Vd(n[t.name]||[],e,t,n);Object.defineProperty(n,t.name,{enumerable:t.enumerable,value:i}),i.length&&i.forEach(function(r){e.set(r,t.inverse,n)})}function Od(e,t,n){var i=t.inverse,r=n[t.name];Object.defineProperty(n,t.name,{configurable:t.configurable,enumerable:t.enumerable,get:function(){return r},set:function(a){if(a!==r){var s=r;r=null,s&&e.unset(s,i,n),r=a,e.set(r,i,n)}}})}function Ct(e,t){if(!(this instanceof Ct))return new Ct(e,t);e.inverse=t,t.inverse=e,this.props={},this.props[e.name]=e,this.props[t.name]=t}Ct.prototype.bind=function(e,t){if(typeof t=="string"){if(!this.props[t])throw new Error("no property <"+t+"> in ref");t=this.props[t]}t.collection?No(this,t,e):Od(this,t,e)};Ct.prototype.ensureRefsCollection=function(e,t){var n=e[t.name];return Ld(n)||No(this,t,e),n};Ct.prototype.ensureBound=function(e,t){Bd(e,t)||this.bind(e,t)};Ct.prototype.unset=function(e,t,n){e&&(this.ensureBound(e,t),t.collection?this.ensureRefsCollection(e,t).remove(n):e[t.name]=void 0)};Ct.prototype.set=function(e,t,n){e&&(this.ensureBound(e,t),t.collection?this.ensureRefsCollection(e,t).add(n):e[t.name]=n)};var Ar=new Ct({name:"children",enumerable:!0,collection:!0},{name:"parent"}),Mo=new Ct({name:"labels",enumerable:!0,collection:!0},{name:"labelTarget"}),pa=new Ct({name:"attachers",collection:!0},{name:"host"}),Po=new Ct({name:"outgoing",collection:!0},{name:"source"}),$o=new Ct({name:"incoming",collection:!0},{name:"target"});function ti(){Object.defineProperty(this,"businessObject",{writable:!0}),Object.defineProperty(this,"label",{get:function(){return this.labels[0]},set:function(e){var t=this.label,n=this.labels;!e&&t?n.remove(t):n.add(e,0)}}),Ar.bind(this,"parent"),Mo.bind(this,"labels"),Po.bind(this,"outgoing"),$o.bind(this,"incoming")}function ni(){ti.call(this),Ar.bind(this,"children"),pa.bind(this,"host"),pa.bind(this,"attachers")}zt(ni,ti);function Vo(){ti.call(this),Ar.bind(this,"children")}zt(Vo,ni);function Lo(){ni.call(this),Mo.bind(this,"labelTarget")}zt(Lo,ni);function Bo(){ti.call(this),Po.bind(this,"source"),$o.bind(this,"target")}zt(Bo,ti);var Ud={connection:Bo,shape:ni,label:Lo,root:Vo};function Fd(e,t){var n=Ud[e];if(!n)throw new Error("unknown type: <"+e+">");return me(new n,t)}function Bn(){this._uid=12}Bn.prototype.createRoot=function(e){return this.create("root",e)};Bn.prototype.createLabel=function(e){return this.create("label",e)};Bn.prototype.createShape=function(e){return this.create("shape",e)};Bn.prototype.createConnection=function(e){return this.create("connection",e)};Bn.prototype.create=function(e,t){return t=me({},t||{}),t.id||(t.id=e+"_"+this._uid++),Fd(e,t)};var Ii="__fn",Oo=1e3,qd=Array.prototype.slice;function gt(){this._listeners={},this.on("diagram.destroy",1,this._destroy,this)}gt.prototype.on=function(e,t,n,i){if(e=Mt(e)?e:[e],en(t)&&(i=n,n=t,t=Oo),!tn(t))throw new Error("priority must be a number");var r=n;i&&(r=nn(n,i),r[Ii]=n[Ii]||n);var a=this;e.forEach(function(s){a._addListener(s,{priority:t,callback:r,next:null})})};gt.prototype.once=function(e,t,n,i){var r=this;if(en(t)&&(i=n,n=t,t=Oo),!tn(t))throw new Error("priority must be a number");function a(){a.__isTomb=!0;var s=n.apply(i,arguments);return r.off(e,a),s}a[Ii]=n,this.on(e,t,a)};gt.prototype.off=function(e,t){e=Mt(e)?e:[e];var n=this;e.forEach(function(i){n._removeListener(i,t)})};gt.prototype.createEvent=function(e){var t=new ii;return t.init(e),t};gt.prototype.fire=function(e,t){var n,i,r,a;if(a=qd.call(arguments),typeof e=="object"&&(t=e,e=t.type),!e)throw new Error("no event type specified");if(i=this._listeners[e],!!i){t instanceof ii?n=t:n=this.createEvent(t),a[0]=n;var s=n.type;e!==s&&(n.type=e);try{r=this._invokeListeners(n,a,i)}finally{e!==s&&(n.type=s)}return r===void 0&&n.defaultPrevented&&(r=!1),r}};gt.prototype.handleError=function(e){return this.fire("error",{error:e})===!1};gt.prototype._destroy=function(){this._listeners={}};gt.prototype._invokeListeners=function(e,t,n){for(var i;n&&!e.cancelBubble;)i=this._invokeListener(e,t,n),n=n.next;return i};gt.prototype._invokeListener=function(e,t,n){var i;if(n.callback.__isTomb)return i;try{i=jd(n.callback,t),i!==void 0&&(e.returnValue=i,e.stopPropagation()),i===!1&&e.preventDefault()}catch(r){if(!this.handleError(r))throw console.error("unhandled error in event listener",r),r}return i};gt.prototype._addListener=function(e,t){var n=this._getListeners(e),i;if(!n){this._setListeners(e,t);return}for(;n;){if(n.priority<t.priority){t.next=n,i?i.next=t:this._setListeners(e,t);return}i=n,n=n.next}i.next=t};gt.prototype._getListeners=function(e){return this._listeners[e]};gt.prototype._setListeners=function(e,t){this._listeners[e]=t};gt.prototype._removeListener=function(e,t){var n=this._getListeners(e),i,r,a;if(!t){this._setListeners(e,null);return}for(;n;)i=n.next,a=n.callback,(a===t||a[Ii]===t)&&(r?r.next=i:this._setListeners(e,i)),r=n,n=i};function ii(){}ii.prototype.stopPropagation=function(){this.cancelBubble=!0};ii.prototype.preventDefault=function(){this.defaultPrevented=!0};ii.prototype.init=function(e){me(this,e||{})};function jd(e,t){return e.apply(null,t)}function zd(e){return e.childNodes[0]}function Wd(e){return e.parentNode.childNodes[1]}function Et(e,t){this._eventBus=e,this._elementRegistry=t}Et.$inject=["eventBus","elementRegistry"];Et.prototype._getChildrenContainer=function(e){var t=this._elementRegistry.getGraphics(e),n;return e.parent?(n=Wd(t),n||(n=$e("g"),wt(n).add("djs-children"),He(t.parentNode,n))):n=t,n};Et.prototype._clear=function(e){var t=zd(e);return ao(t),t};Et.prototype._createContainer=function(e,t,n,i){var r=$e("g");wt(r).add("djs-group"),typeof n<"u"?Uo(r,t,t.childNodes[n]):He(t,r);var a=$e("g");wt(a).add("djs-element"),wt(a).add("djs-"+e),i&&wt(a).add("djs-frame"),He(r,a);var s=$e("g");return wt(s).add("djs-visual"),He(a,s),a};Et.prototype.create=function(e,t,n){var i=this._getChildrenContainer(t.parent);return this._createContainer(e,i,n,go(t))};Et.prototype.updateContainments=function(e){var t=this,n=this._elementRegistry,i;i=In(e,function(r,a){return a.parent&&(r[a.parent.id]=a.parent),r},{}),ae(i,function(r){var a=r.children;if(a){var s=t._getChildrenContainer(r);ae(a.slice().reverse(),function(u){var c=n.getGraphics(u);Uo(c.parentNode,s)})}})};Et.prototype.drawShape=function(e,t,n={}){var i=this._eventBus;return i.fire("render.shape",{gfx:e,element:t,attrs:n})};Et.prototype.getShapePath=function(e){var t=this._eventBus;return t.fire("render.getShapePath",e)};Et.prototype.drawConnection=function(e,t,n={}){var i=this._eventBus;return i.fire("render.connection",{gfx:e,element:t,attrs:n})};Et.prototype.getConnectionPath=function(e){var t=this._eventBus;return t.fire("render.getConnectionPath",e)};Et.prototype.update=function(e,t,n){if(t.parent){var i=this._clear(n);if(e==="shape")this.drawShape(i,t),uo(n,t.x,t.y);else if(e==="connection")this.drawConnection(i,t);else throw new Error("unknown type: "+e);t.hidden?Re(n,"display","none"):Re(n,"display","block")}};Et.prototype.remove=function(e){var t=this._elementRegistry.getGraphics(e);Vn(t.parentNode)};function Uo(e,t,n){var i=n||t.firstChild;e!==i&&t.insertBefore(e,i)}const Hd={__depends__:[Cd],__init__:["canvas"],canvas:["type",ge],elementRegistry:["type",xt],elementFactory:["type",Bn],eventBus:["type",gt],graphicsFactory:["type",Et]};function Yd(e){var t=new Co(e);return t.init(),t}function Kd(e){e=e||{};var t={config:["value",e]},n=[t,Hd].concat(e.modules||[]);return Yd(n)}function un(e,t){this._injector=t||Kd(e),this.get("eventBus").fire("diagram.init")}un.prototype.get=function(e,t){return this._injector.get(e,t)};un.prototype.invoke=function(e,t,n){return this._injector.invoke(e,t,n)};un.prototype.destroy=function(){this.get("eventBus").fire("diagram.destroy")};un.prototype.clear=function(){this.get("eventBus").fire("diagram.clear")};function Tr(){}Tr.prototype.get=function(e){return this.$model.properties.get(this,e)};Tr.prototype.set=function(e,t){this.$model.properties.set(this,e,t)};function Fo(e,t){this.model=e,this.properties=t}Fo.prototype.createType=function(e){var t=this.model,n=this.properties,i=Object.create(Tr.prototype);ae(e.properties,function(s){!s.isMany&&s.default!==void 0&&(i[s.name]=s.default)}),n.defineModel(i,t),n.defineDescriptor(i,e);var r=e.ns.name;function a(s){n.define(this,"$type",{value:r,enumerable:!0}),n.define(this,"$attrs",{value:{}}),n.define(this,"$parent",{writable:!0}),ae(s,nn(function(u,c){this.set(c,u)},this))}return a.prototype=i,a.hasType=i.$instanceOf=this.model.hasType,n.defineModel(a,t),n.defineDescriptor(a,e),a};var Gd={String:!0,Boolean:!0,Integer:!0,Real:!0,Element:!0},qo={String:function(e){return e},Boolean:function(e){return e==="true"},Integer:function(e){return parseInt(e,10)},Real:function(e){return parseFloat(e)}};function Cr(e,t){var n=qo[e];return n?n(t):t}function cr(e){return!!Gd[e]}function jo(e){return!!qo[e]}function st(e,t){var n=e.split(/:/),i,r;if(n.length===1)i=e,r=t;else if(n.length===2)i=n[1],r=n[0];else throw new Error("expected <prefix:localName> or <localName>, got "+e);return e=(r?r+":":"")+i,{name:e,prefix:r,localName:i}}function kt(e){this.ns=e,this.name=e.name,this.allTypes=[],this.allTypesByName={},this.properties=[],this.propertiesByName={}}kt.prototype.build=function(){return ru(this,["ns","name","allTypes","allTypesByName","properties","propertiesByName","bodyProperty","idProperty"])};kt.prototype.addProperty=function(e,t,n){typeof t=="boolean"&&(n=t,t=void 0),this.addNamedProperty(e,n!==!1);var i=this.properties;t!==void 0?i.splice(t,0,e):i.push(e)};kt.prototype.replaceProperty=function(e,t,n){var i=e.ns,r=this.properties,a=this.propertiesByName,s=e.name!==t.name;if(e.isId){if(!t.isId)throw new Error("property <"+t.ns.name+"> must be id property to refine <"+e.ns.name+">");this.setIdProperty(t,!1)}if(e.isBody){if(!t.isBody)throw new Error("property <"+t.ns.name+"> must be body property to refine <"+e.ns.name+">");this.setBodyProperty(t,!1)}var u=r.indexOf(e);if(u===-1)throw new Error("property <"+i.name+"> not found in property list");r.splice(u,1),this.addProperty(t,n?void 0:u,s),a[i.name]=a[i.localName]=t};kt.prototype.redefineProperty=function(e,t,n){var i=e.ns.prefix,r=t.split("#"),a=st(r[0],i),s=st(r[1],a.prefix).name,u=this.propertiesByName[s];if(u)this.replaceProperty(u,e,n);else throw new Error("refined property <"+s+"> not found");delete e.redefines};kt.prototype.addNamedProperty=function(e,t){var n=e.ns,i=this.propertiesByName;t&&(this.assertNotDefined(e,n.name),this.assertNotDefined(e,n.localName)),i[n.name]=i[n.localName]=e};kt.prototype.removeNamedProperty=function(e){var t=e.ns,n=this.propertiesByName;delete n[t.name],delete n[t.localName]};kt.prototype.setBodyProperty=function(e,t){if(t&&this.bodyProperty)throw new Error("body property defined multiple times (<"+this.bodyProperty.ns.name+">, <"+e.ns.name+">)");this.bodyProperty=e};kt.prototype.setIdProperty=function(e,t){if(t&&this.idProperty)throw new Error("id property defined multiple times (<"+this.idProperty.ns.name+">, <"+e.ns.name+">)");this.idProperty=e};kt.prototype.assertNotTrait=function(e){if((e.extends||[]).length)throw new Error("cannot create <".concat(e.name,"> extending <").concat(e.extends,">"))};kt.prototype.assertNotDefined=function(e,t){var n=e.name,i=this.propertiesByName[n];if(i)throw new Error("property <"+n+"> already defined; override of <"+i.definedBy.ns.name+"#"+i.ns.name+"> by <"+e.definedBy.ns.name+"#"+e.ns.name+"> not allowed without redefines")};kt.prototype.hasProperty=function(e){return this.propertiesByName[e]};kt.prototype.addTrait=function(e,t){t&&this.assertNotTrait(e);var n=this.allTypesByName,i=this.allTypes,r=e.name;r in n||(ae(e.properties,nn(function(a){a=me({},a,{name:a.ns.localName,inherited:t}),Object.defineProperty(a,"definedBy",{value:e});var s=a.replaces,u=a.redefines;s||u?this.redefineProperty(a,s||u,s):(a.isBody&&this.setBodyProperty(a),a.isId&&this.setIdProperty(a),this.addProperty(a))},this)),i.push(e),n[r]=e)};function cn(e,t){this.packageMap={},this.typeMap={},this.packages=[],this.properties=t,ae(e,nn(this.registerPackage,this))}cn.prototype.getPackage=function(e){return this.packageMap[e]};cn.prototype.getPackages=function(){return this.packages};cn.prototype.registerPackage=function(e){e=me({},e);var t=this.packageMap;fa(t,e,"prefix"),fa(t,e,"uri"),ae(e.types,nn(function(n){this.registerType(n,e)},this)),t[e.uri]=t[e.prefix]=e,this.packages.push(e)};cn.prototype.registerType=function(e,t){e=me({},e,{superClass:(e.superClass||[]).slice(),extends:(e.extends||[]).slice(),properties:(e.properties||[]).slice(),meta:me(e.meta||{})});var n=st(e.name,t.prefix),i=n.name,r={};ae(e.properties,nn(function(a){var s=st(a.name,n.prefix),u=s.name;cr(a.type)||(a.type=st(a.type,s.prefix).name),me(a,{ns:s,name:u}),r[u]=a},this)),me(e,{ns:n,name:i,propertiesByName:r}),ae(e.extends,nn(function(a){var s=st(a,n.prefix),u=this.typeMap[s.name];u.traits=u.traits||[],u.traits.push(i)},this)),this.definePackage(e,t),this.typeMap[i]=e};cn.prototype.mapTypes=function(e,t,n){var i=cr(e.name)?{name:e.name}:this.typeMap[e.name],r=this;function a(c,b){var v=st(c,cr(c)?"":e.prefix);r.mapTypes(v,t,b)}function s(c){return a(c,!0)}function u(c){return a(c,!1)}if(!i)throw new Error("unknown type <"+e.name+">");ae(i.superClass,n?s:u),t(i,!n),ae(i.traits,s)};cn.prototype.getEffectiveDescriptor=function(e){var t=st(e),n=new kt(t);this.mapTypes(t,function(r,a){n.addTrait(r,a)});var i=n.build();return this.definePackage(i,i.allTypes[i.allTypes.length-1].$pkg),i};cn.prototype.definePackage=function(e,t){this.properties.define(e,"$pkg",{value:t})};function fa(e,t,n){var i=t[n];if(i in e)throw new Error("package with "+n+" <"+i+"> already defined")}function En(e){this.model=e}En.prototype.set=function(e,t,n){if(!qt(t)||!t.length)throw new TypeError("property name must be a non-empty string");var i=this.getProperty(e,t),r=i&&i.name;Qd(n)?i?delete e[r]:delete e.$attrs[dr(t)]:i?r in e?e[r]=n:zo(e,i,n):e.$attrs[dr(t)]=n};En.prototype.get=function(e,t){var n=this.getProperty(e,t);if(!n)return e.$attrs[dr(t)];var i=n.name;return!e[i]&&n.isMany&&zo(e,n,[]),e[i]};En.prototype.define=function(e,t,n){if(!n.writable){var i=n.value;n=me({},n,{get:function(){return i}}),delete n.value}Object.defineProperty(e,t,n)};En.prototype.defineDescriptor=function(e,t){this.define(e,"$descriptor",{value:t})};En.prototype.defineModel=function(e,t){this.define(e,"$model",{value:t})};En.prototype.getProperty=function(e,t){var n=this.model,i=n.getPropertyDescriptor(e,t);if(i)return i;if(t.includes(":"))return null;const r=n.config.strict;if(typeof r<"u"){const a=new TypeError("unknown property <".concat(t,"> on <").concat(e.$type,">"));if(r)throw a;typeof console<"u"&&console.warn(a)}return null};function Qd(e){return typeof e>"u"}function zo(e,t,n){Object.defineProperty(e,t.name,{enumerable:!t.isReference,writable:!0,value:n,configurable:!0})}function dr(e){return e.replace(/^:/,"")}function Rt(e,t={}){this.properties=new En(this),this.factory=new Fo(this,this.properties),this.registry=new cn(e,this.properties),this.typeCache={},this.config=t}Rt.prototype.create=function(e,t){var n=this.getType(e);if(!n)throw new Error("unknown type <"+e+">");return new n(t)};Rt.prototype.getType=function(e){var t=this.typeCache,n=qt(e)?e:e.ns.name,i=t[n];return i||(e=this.registry.getEffectiveDescriptor(n),i=t[n]=this.factory.createType(e)),i};Rt.prototype.createAny=function(e,t,n){var i=st(e),r={$type:e,$instanceOf:function(s){return s===this.$type},get:function(s){return this[s]},set:function(s,u){iu(this,[s],u)}},a={name:e,isGeneric:!0,ns:{prefix:i.prefix,localName:i.localName,uri:t}};return this.properties.defineDescriptor(r,a),this.properties.defineModel(r,this),this.properties.define(r,"get",{enumerable:!1,writable:!0}),this.properties.define(r,"set",{enumerable:!1,writable:!0}),this.properties.define(r,"$parent",{enumerable:!1,writable:!0}),this.properties.define(r,"$instanceOf",{enumerable:!1,writable:!0}),ae(n,function(s,u){hn(s)&&s.value!==void 0?r[s.name]=s.value:r[u]=s}),r};Rt.prototype.getPackage=function(e){return this.registry.getPackage(e)};Rt.prototype.getPackages=function(){return this.registry.getPackages()};Rt.prototype.getElementDescriptor=function(e){return e.$descriptor};Rt.prototype.hasType=function(e,t){t===void 0&&(t=e,e=this);var n=e.$model.getElementDescriptor(e);return t in n.allTypesByName};Rt.prototype.getPropertyDescriptor=function(e,t){return this.getElementDescriptor(e).propertiesByName[t]};Rt.prototype.getTypeDescriptor=function(e){return this.registry.typeMap[e]};var ma=String.fromCharCode,Xd=Object.prototype.hasOwnProperty,Zd=/&#(\d+);|&#x([0-9a-f]+);|&(\w+);/ig,Gn={amp:"&",apos:"'",gt:">",lt:"<",quot:'"'};Object.keys(Gn).forEach(function(e){Gn[e.toUpperCase()]=Gn[e]});function Jd(e,t,n,i){return i?Xd.call(Gn,i)?Gn[i]:"&"+i+";":ma(t||parseInt(n,16))}function pn(e){return e.length>3&&e.indexOf("&")!==-1?e.replace(Zd,Jd):e}var ep="http://www.w3.org/2001/XMLSchema-instance",tp="xsi",ha="xsi:type",ya="non-whitespace outside of root node";function Tn(e){return new Error(e)}function va(e){return"missing namespace for prefix <"+e+">"}function gi(e){return{get:e,enumerable:!0}}function np(e){var t={},n;for(n in e)t[n]=e[n];return t}function pr(e){return e+"$uri"}function ip(e){var t={},n,i;for(n in e)i=e[n],t[i]=i,t[pr(i)]=n;return t}function ga(){return{line:0,column:0}}function rp(e){throw e}function Wo(e){if(!this)return new Wo(e);var t=e&&e.proxy,n,i,r,a,s=rp,u,c,b,v,x=ga,f=!1,U=!1,X=null,J=!1,ee;function D(C){C instanceof Error||(C=Tn(C)),X=C,s(C,x)}function K(C){u&&(C instanceof Error||(C=Tn(C)),u(C,x))}this.on=function(C,A){if(typeof A!="function")throw Tn("required args <name, cb>");switch(C){case"openTag":i=A;break;case"text":n=A;break;case"closeTag":r=A;break;case"error":s=A;break;case"warn":u=A;break;case"cdata":a=A;break;case"attention":v=A;break;case"question":b=A;break;case"comment":c=A;break;default:throw Tn("unsupported event: "+C)}return this},this.ns=function(C){if(typeof C>"u"&&(C={}),typeof C!="object")throw Tn("required args <nsMap={}>");var A={},N;for(N in C)A[N]=C[N];return A[ep]=tp,U=!0,ee=A,this},this.parse=function(C){if(typeof C!="string")throw Tn("required args <xml=string>");return X=null,B(C),x=ga,J=!1,X},this.stop=function(){J=!0};function B(C){var A=U?[]:null,N=U?ip(ee):null,g,R=[],L=0,M=!1,H=!1,G=0,te=0,ue,fe,re,ye,pt,it,Oe,bt,ot,P="",q=0,ie;function Te(){if(ie!==null)return ie;var Ne,m,o,l=U&&N.xmlns,y=U&&f?[]:null,w=q,$=P,se=$.length,xe,_e,we,Be,Ee,St={},Vt={},Qe,oe,h;e:for(;w<se;w++)if(Qe=!1,oe=$.charCodeAt(w),!(oe===32||oe<14&&oe>8)){for((oe<65||oe>122||oe>90&&oe<97)&&oe!==95&&oe!==58&&(K("illegal first char attribute name"),Qe=!0),h=w+1;h<se;h++)if(oe=$.charCodeAt(h),!(oe>96&&oe<123||oe>64&&oe<91||oe>47&&oe<59||oe===46||oe===45||oe===95)){if(oe===32||oe<14&&oe>8){K("missing attribute value"),w=h;continue e}if(oe===61)break;K("illegal attribute name char"),Qe=!0}if(Ee=$.substring(w,h),Ee==="xmlns:xmlns"&&(K("illegal declaration of xmlns"),Qe=!0),oe=$.charCodeAt(h+1),oe===34)h=$.indexOf('"',w=h+2),h===-1&&(h=$.indexOf("'",w),h!==-1&&(K("attribute value quote missmatch"),Qe=!0));else if(oe===39)h=$.indexOf("'",w=h+2),h===-1&&(h=$.indexOf('"',w),h!==-1&&(K("attribute value quote missmatch"),Qe=!0));else for(K("missing attribute value quotes"),Qe=!0,h=h+1;h<se&&(oe=$.charCodeAt(h+1),!(oe===32||oe<14&&oe>8));h++);for(h===-1&&(K("missing closing quotes"),h=se,Qe=!0),Qe||(we=$.substring(w,h)),w=h;h+1<se&&(oe=$.charCodeAt(h+1),!(oe===32||oe<14&&oe>8));h++)w===h&&(K("illegal character after attribute end"),Qe=!0);if(w=h+1,Qe)continue e;if(Ee in Vt){K("attribute <"+Ee+"> already defined");continue}if(Vt[Ee]=!0,!U){St[Ee]=we;continue}if(f){if(_e=Ee==="xmlns"?"xmlns":Ee.charCodeAt(0)===120&&Ee.substr(0,6)==="xmlns:"?Ee.substr(6):null,_e!==null){if(Ne=pn(we),m=pr(_e),Be=ee[Ne],!Be){if(_e==="xmlns"||m in N&&N[m]!==Ne)do Be="ns"+L++;while(typeof N[Be]<"u");else Be=_e;ee[Ne]=Be}N[_e]!==Be&&(xe||(N=np(N),xe=!0),N[_e]=Be,_e==="xmlns"&&(N[pr(Be)]=Ne,l=Be),N[m]=Ne),St[Ee]=we;continue}y.push(Ee,we);continue}if(oe=Ee.indexOf(":"),oe===-1){St[Ee]=we;continue}if(!(o=N[Ee.substring(0,oe)])){K(va(Ee.substring(0,oe)));continue}Ee=l===o?Ee.substr(oe+1):o+Ee.substr(oe),Ee===ha&&(oe=we.indexOf(":"),oe!==-1?(o=we.substring(0,oe),o=N[o]||o,we=o+we.substring(oe)):we=l+":"+we),St[Ee]=we}if(f)for(w=0,se=y.length;w<se;w++){if(Ee=y[w++],we=y[w],oe=Ee.indexOf(":"),oe!==-1){if(!(o=N[Ee.substring(0,oe)])){K(va(Ee.substring(0,oe)));continue}Ee=l===o?Ee.substr(oe+1):o+Ee.substr(oe),Ee===ha&&(oe=we.indexOf(":"),oe!==-1?(o=we.substring(0,oe),o=N[o]||o,we=o+we.substring(oe)):we=l+":"+we)}St[Ee]=we}return ie=St}function Ae(){for(var Ne=/(\r\n|\r|\n)/g,m=0,o=0,l=0,y=te,w,$;G>=l&&(w=Ne.exec(C),!(!w||(y=w[0].length+w.index,y>G)));)m+=1,l=y;return G==-1?(o=y,$=C.substring(te)):te===0?$=C.substring(te,G):(o=G-l,$=te==-1?C.substring(G):C.substring(G,te+1)),{data:$,line:m,column:o}}for(x=Ae,t&&(ot=Object.create({},{name:gi(function(){return Oe}),originalName:gi(function(){return bt}),attrs:gi(Te),ns:gi(function(){return N})}));te!==-1;){if(C.charCodeAt(te)===60?G=te:G=C.indexOf("<",te),G===-1){if(R.length)return D("unexpected end of file");if(te===0)return D("missing start tag");te<C.length&&C.substring(te).trim()&&K(ya);return}if(te!==G){if(R.length){if(n&&(n(C.substring(te,G),pn,x),J))return}else if(C.substring(te,G).trim()&&(K(ya),J))return}if(ye=C.charCodeAt(G+1),ye===33){if(re=C.charCodeAt(G+2),re===91&&C.substr(G+3,6)==="CDATA["){if(te=C.indexOf("]]>",G),te===-1)return D("unclosed cdata");if(a&&(a(C.substring(G+9,te),x),J))return;te+=3;continue}if(re===45&&C.charCodeAt(G+3)===45){if(te=C.indexOf("-->",G),te===-1)return D("unclosed comment");if(c&&(c(C.substring(G+4,te),pn,x),J))return;te+=3;continue}}if(ye===63){if(te=C.indexOf("?>",G),te===-1)return D("unclosed question");if(b&&(b(C.substring(G,te+2),x),J))return;te+=2;continue}for(ue=G+1;;ue++){if(pt=C.charCodeAt(ue),isNaN(pt))return te=-1,D("unclosed tag");if(pt===34)re=C.indexOf('"',ue+1),ue=re!==-1?re:ue;else if(pt===39)re=C.indexOf("'",ue+1),ue=re!==-1?re:ue;else if(pt===62){te=ue;break}}if(ye===33){if(v&&(v(C.substring(G,te+1),pn,x),J))return;te+=1;continue}if(ie={},ye===47){if(M=!1,H=!0,!R.length)return D("missing open tag");if(ue=Oe=R.pop(),re=G+2+ue.length,C.substring(G+2,re)!==ue)return D("closing tag mismatch");for(;re<te;re++)if(ye=C.charCodeAt(re),!(ye===32||ye>8&&ye<14))return D("close tag")}else{if(C.charCodeAt(te-1)===47?(ue=Oe=C.substring(G+1,te-1),M=!0,H=!0):(ue=Oe=C.substring(G+1,te),M=!0,H=!1),!(ye>96&&ye<123||ye>64&&ye<91||ye===95||ye===58))return D("illegal first char nodeName");for(re=1,fe=ue.length;re<fe;re++)if(ye=ue.charCodeAt(re),!(ye>96&&ye<123||ye>64&&ye<91||ye>47&&ye<59||ye===45||ye===95||ye==46)){if(ye===32||ye<14&&ye>8){Oe=ue.substring(0,re),ie=null;break}return D("invalid nodeName")}H||R.push(Oe)}if(U){if(g=N,M&&(H||A.push(g),ie===null&&(f=ue.indexOf("xmlns",re)!==-1)&&(q=re,P=ue,Te(),f=!1)),bt=Oe,ye=Oe.indexOf(":"),ye!==-1){if(it=N[Oe.substring(0,ye)],!it)return D("missing namespace on <"+bt+">");Oe=Oe.substr(ye+1)}else it=N.xmlns;it&&(Oe=it+":"+Oe)}if(M&&(q=re,P=ue,i&&(t?i(ot,pn,H,x):i(Oe,Te,pn,H,x),J)))return;if(H){if(r&&(r(t?ot:Oe,pn,M,x),J))return;U&&(M?N=g:N=A.pop())}te+=1}}}function Ho(e){return e.xml&&e.xml.tagAlias==="lowerCase"}var ap={xsi:"http://www.w3.org/2001/XMLSchema-instance",xml:"http://www.w3.org/XML/1998/namespace"},Li="xsi:type";function Yo(e){return e.xml&&e.xml.serialize}function Ko(e){return Yo(e)===Li}function op(e){return Yo(e)==="property"}function sp(e){return e.charAt(0).toUpperCase()+e.slice(1)}function Go(e,t){return Ho(t)?e.prefix+":"+sp(e.localName):e.name}function lp(e,t){var n=e.name,i=e.localName,r=t.xml&&t.xml.typePrefix;return r&&i.indexOf(r)===0?e.prefix+":"+i.slice(r.length):n}function up(e,t){var n=st(e),i=t.getPackage(n.prefix);return lp(n,i)}function on(e){return new Error(e)}function Yt(e){return e.$descriptor}function cp(e){me(this,e),this.elementsById={},this.references=[],this.warnings=[],this.addReference=function(t){this.references.push(t)},this.addElement=function(t){if(!t)throw on("expected element");var n=this.elementsById,i=Yt(t),r=i.idProperty,a;if(r&&(a=t.get(r.name),a)){if(!/^([a-z][\w-.]*:)?[a-z_][\w-.]*$/i.test(a))throw new Error("illegal ID <"+a+">");if(n[a])throw on("duplicate ID <"+a+">");n[a]=t}},this.addWarning=function(t){this.warnings.push(t)}}function ri(){}ri.prototype.handleEnd=function(){};ri.prototype.handleText=function(){};ri.prototype.handleNode=function(){};function Rr(){}Rr.prototype=Object.create(ri.prototype);Rr.prototype.handleNode=function(){return this};function On(){}On.prototype=Object.create(ri.prototype);On.prototype.handleText=function(e){this.body=(this.body||"")+e};function ai(e,t){this.property=e,this.context=t}ai.prototype=Object.create(On.prototype);ai.prototype.handleNode=function(e){if(this.element)throw on("expected no sub nodes");return this.element=this.createReference(e),this};ai.prototype.handleEnd=function(){this.element.id=this.body};ai.prototype.createReference=function(e){return{property:this.property.ns.name,id:""}};function Dr(e,t){this.element=t,this.propertyDesc=e}Dr.prototype=Object.create(On.prototype);Dr.prototype.handleEnd=function(){var e=this.body||"",t=this.element,n=this.propertyDesc;e=Cr(n.type,e),n.isMany?t.get(n.name).push(e):t.set(n.name,e)};function Bi(){}Bi.prototype=Object.create(On.prototype);Bi.prototype.handleNode=function(e){var t=this,n=this.element;return n?t=this.handleChild(e):(n=this.element=this.createElement(e),this.context.addElement(n)),t};function lt(e,t,n){this.model=e,this.type=e.getType(t),this.context=n}lt.prototype=Object.create(Bi.prototype);lt.prototype.addReference=function(e){this.context.addReference(e)};lt.prototype.handleText=function(e){var t=this.element,n=Yt(t),i=n.bodyProperty;if(!i)throw on("unexpected body text <"+e+">");On.prototype.handleText.call(this,e)};lt.prototype.handleEnd=function(){var e=this.body,t=this.element,n=Yt(t),i=n.bodyProperty;i&&e!==void 0&&(e=Cr(i.type,e),t.set(i.name,e))};lt.prototype.createElement=function(e){var t=e.attributes,n=this.type,i=Yt(n),r=this.context,a=new n({}),s=this.model,u;return ae(t,function(c,b){var v=i.propertiesByName[b],x;v&&v.isReference?v.isMany?(x=c.split(" "),ae(x,function(f){r.addReference({element:a,property:v.ns.name,id:f})})):r.addReference({element:a,property:v.ns.name,id:c}):(v?c=Cr(v.type,c):b!=="xmlns"&&(u=st(b,i.ns.prefix),s.getPackage(u.prefix)&&r.addWarning({message:"unknown attribute <"+b+">",element:a,property:b,value:c})),a.set(b,c))}),a};lt.prototype.getPropertyForNode=function(e){var t=e.name,n=st(t),i=this.type,r=this.model,a=Yt(i),s=n.name,u=a.propertiesByName[s],c,b;if(u&&!u.isAttr)return Ko(u)&&(c=e.attributes[Li],c)?(c=up(c,r),b=r.getType(c),me({},u,{effectiveType:Yt(b).name})):u;var v=r.getPackage(n.prefix);if(v){if(c=Go(n,v),b=r.getType(c),u=Pt(a.properties,function(x){return!x.isVirtual&&!x.isReference&&!x.isAttribute&&b.hasType(x.type)}),u)return me({},u,{effectiveType:Yt(b).name})}else if(u=Pt(a.properties,function(x){return!x.isReference&&!x.isAttribute&&x.type==="Element"}),u)return u;throw on("unrecognized element <"+n.name+">")};lt.prototype.toString=function(){return"ElementDescriptor["+Yt(this.type).name+"]"};lt.prototype.valueHandler=function(e,t){return new Dr(e,t)};lt.prototype.referenceHandler=function(e){return new ai(e,this.context)};lt.prototype.handler=function(e){return e==="Element"?new Mn(this.model,e,this.context):new lt(this.model,e,this.context)};lt.prototype.handleChild=function(e){var t,n,i,r;if(t=this.getPropertyForNode(e),i=this.element,n=t.effectiveType||t.type,jo(n))return this.valueHandler(t,i);t.isReference?r=this.referenceHandler(t).handleNode(e):r=this.handler(n).handleNode(e);var a=r.element;return a!==void 0&&(t.isMany?i.get(t.name).push(a):i.set(t.name,a),t.isReference?(me(a,{element:i}),this.context.addReference(a)):a.$parent=i),r};function Ir(e,t,n){lt.call(this,e,t,n)}Ir.prototype=Object.create(lt.prototype);Ir.prototype.createElement=function(e){var t=e.name,n=st(t),i=this.model,r=this.type,a=i.getPackage(n.prefix),s=a&&Go(n,a)||t;if(!r.hasType(s))throw on("unexpected element <"+e.originalName+">");return lt.prototype.createElement.call(this,e)};function Mn(e,t,n){this.model=e,this.context=n}Mn.prototype=Object.create(Bi.prototype);Mn.prototype.createElement=function(e){var t=e.name,n=st(t),i=n.prefix,r=e.ns[i+"$uri"],a=e.attributes;return this.model.createAny(t,r,a)};Mn.prototype.handleChild=function(e){var t=new Mn(this.model,"Element",this.context).handleNode(e),n=this.element,i=t.element,r;return i!==void 0&&(r=n.$children=n.$children||[],r.push(i),i.$parent=n),t};Mn.prototype.handleEnd=function(){this.body&&(this.element.$body=this.body)};function Nr(e){e instanceof Rt&&(e={model:e}),me(this,{lax:!1},e)}Nr.prototype.fromXML=function(e,t,n){var i=t.rootHandler;t instanceof lt?(i=t,t={}):typeof t=="string"?(i=this.handler(t),t={}):typeof i=="string"&&(i=this.handler(i));var r=this.model,a=this.lax,s=new cp(me({},t,{rootHandler:i})),u=new Wo({proxy:!0}),c=dp();i.context=s,c.push(i);function b(A,N,g){var R=N(),L=R.line,M=R.column,H=R.data;H.charAt(0)==="<"&&H.indexOf(" ")!==-1&&(H=H.slice(0,H.indexOf(" "))+">");var G="unparsable content "+(H?H+" ":"")+"detected\n	line: "+L+"\n	column: "+M+"\n	nested error: "+A.message;if(g)return s.addWarning({message:G,error:A}),!0;throw on(G)}function v(A,N){return b(A,N,!0)}function x(){var A=s.elementsById,N=s.references,g,R;for(g=0;R=N[g];g++){var L=R.element,M=A[R.id],H=Yt(L).propertiesByName[R.property];if(M||s.addWarning({message:"unresolved reference <"+R.id+">",element:R.element,property:R.property,value:R.id}),H.isMany){var G=L.get(H.name),te=G.indexOf(R);te===-1&&(te=G.length),M?G[te]=M:G.splice(te,1)}else L.set(H.name,M)}}function f(){c.pop().handleEnd()}var U=/^<\?xml /i,X=/ encoding="([^"]+)"/i,J=/^utf-8$/i;function ee(A){if(U.test(A)){var N=X.exec(A),g=N&&N[1];!g||J.test(g)||s.addWarning({message:"unsupported document encoding <"+g+">, falling back to UTF-8"})}}function D(A,N){var g=c.peek();try{c.push(g.handleNode(A))}catch(R){b(R,N,a)&&c.push(new Rr)}}function K(A,N){try{c.peek().handleText(A)}catch(g){v(g,N)}}function B(A,N){A.trim()&&K(A,N)}var C=r.getPackages().reduce(function(A,N){return A[N.uri]=N.prefix,A},{"http://www.w3.org/XML/1998/namespace":"xml"});return u.ns(C).on("openTag",function(A,N,g,R){var L=A.attrs||{},M=Object.keys(L).reduce(function(G,te){var ue=N(L[te]);return G[te]=ue,G},{}),H={name:A.name,originalName:A.originalName,attributes:M,ns:A.ns};D(H,R)}).on("question",ee).on("closeTag",f).on("cdata",K).on("text",function(A,N,g){B(N(A),g)}).on("error",b).on("warn",v),new Promise(function(A,N){var g;try{u.parse(e),x()}catch(G){g=G}var R=i.element;!g&&!R&&(g=on("failed to parse document as <"+i.type.$descriptor.name+">"));var L=s.warnings,M=s.references,H=s.elementsById;return g?(g.warnings=L,N(g)):A({rootElement:R,elementsById:H,references:M,warnings:L})})};Nr.prototype.handler=function(e){return new Ir(this.model,e)};function dp(){var e=[];return Object.defineProperty(e,"peek",{value:function(){return this[this.length-1]}}),e}var pp='<?xml version="1.0" encoding="UTF-8"?>\n',fp=/<|>|'|"|&|\n\r|\n/g,Qo=/<|>|&/g;function mp(e){var t={},n={},i={},r=[],a=[];this.byUri=function(s){return n[s]||e&&e.byUri(s)},this.add=function(s,u){n[s.uri]=s,u?r.push(s):a.push(s),this.mapPrefix(s.prefix,s.uri)},this.uriByPrefix=function(s){return t[s||"xmlns"]},this.mapPrefix=function(s,u){t[s||"xmlns"]=u},this.getNSKey=function(s){return s.prefix!==void 0?s.uri+"|"+s.prefix:s.uri},this.logUsed=function(s){var u=s.uri,c=this.getNSKey(s);i[c]=this.byUri(u),e&&e.logUsed(s)},this.getUsed=function(s){function u(v){var x=c.getNSKey(v);return i[x]}var c=this,b=[].concat(r,a);return b.filter(u)}}function hp(e){return e.charAt(0).toLowerCase()+e.slice(1)}function yp(e,t){return Ho(t)?hp(e):e}function Xo(e,t){e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})}function Zo(e){return qt(e)?e:(e.prefix?e.prefix+":":"")+e.localName}function vp(e){return e.getUsed().filter(function(t){return t.prefix!=="xml"}).map(function(t){var n="xmlns"+(t.prefix?":"+t.prefix:"");return{name:n,value:t.uri}})}function gp(e,t){return t.isGeneric?me({localName:t.ns.localName},e):me({localName:yp(t.ns.localName,t.$pkg)},e)}function bp(e,t){return me({localName:t.ns.localName},e)}function _p(e){var t=e.$descriptor;return Dn(t.properties,function(n){var i=n.name;if(n.isVirtual||!$n(e,i))return!1;var r=e[i];return r===n.default||r===null?!1:n.isMany?r.length:!0})}var wp={"\n":"#10","\n\r":"#10",'"':"#34","'":"#39","<":"#60",">":"#62","&":"#38"},xp={"<":"lt",">":"gt","&":"amp"};function Jo(e,t,n){return e=qt(e)?e:""+e,e.replace(t,function(i){return"&"+n[i]+";"})}function Ep(e){return Jo(e,fp,wp)}function kp(e){return Jo(e,Qo,xp)}function Sp(e){return Dn(e,function(t){return t.isAttr})}function Ap(e){return Dn(e,function(t){return!t.isAttr})}function Mr(e){this.tagName=e}Mr.prototype.build=function(e){return this.element=e,this};Mr.prototype.serializeTo=function(e){e.appendIndent().append("<"+this.tagName+">"+this.element.id+"</"+this.tagName+">").appendNewLine()};function gn(){}gn.prototype.serializeValue=gn.prototype.serializeTo=function(e){e.append(this.escape?kp(this.value):this.value)};gn.prototype.build=function(e,t){return this.value=t,e.type==="String"&&t.search(Qo)!==-1&&(this.escape=!0),this};function Pr(e){this.tagName=e}Xo(Pr,gn);Pr.prototype.serializeTo=function(e){e.appendIndent().append("<"+this.tagName+">"),this.serializeValue(e),e.append("</"+this.tagName+">").appendNewLine()};function Fe(e,t){this.body=[],this.attrs=[],this.parent=e,this.propertyDescriptor=t}Fe.prototype.build=function(e){this.element=e;var t=e.$descriptor,n=this.propertyDescriptor,i,r,a=t.isGeneric;return a?i=this.parseGeneric(e):i=this.parseNsAttributes(e),n?this.ns=this.nsPropertyTagName(n):this.ns=this.nsTagName(t),this.tagName=this.addTagName(this.ns),a||(r=_p(e),this.parseAttributes(Sp(r)),this.parseContainments(Ap(r))),this.parseGenericAttributes(e,i),this};Fe.prototype.nsTagName=function(e){var t=this.logNamespaceUsed(e.ns);return gp(t,e)};Fe.prototype.nsPropertyTagName=function(e){var t=this.logNamespaceUsed(e.ns);return bp(t,e)};Fe.prototype.isLocalNs=function(e){return e.uri===this.ns.uri};Fe.prototype.nsAttributeName=function(e){var t;if(qt(e)?t=st(e):t=e.ns,e.inherited)return{localName:t.localName};var n=this.logNamespaceUsed(t);return this.getNamespaces().logUsed(n),this.isLocalNs(n)?{localName:t.localName}:me({localName:t.localName},n)};Fe.prototype.parseGeneric=function(e){var t=this,n=this.body,i=[];return ae(e,function(r,a){var s;a==="$body"?n.push(new gn().build({type:"String"},r)):a==="$children"?ae(r,function(u){n.push(new Fe(t).build(u))}):a.indexOf("$")!==0&&(s=t.parseNsAttribute(e,a,r),s&&i.push({name:a,value:r}))}),i};Fe.prototype.parseNsAttribute=function(e,t,n){var i=e.$model,r=st(t),a;if(r.prefix==="xmlns"&&(a={prefix:r.localName,uri:n}),!r.prefix&&r.localName==="xmlns"&&(a={uri:n}),!a)return{name:t,value:n};if(i&&i.getPackage(n))this.logNamespace(a,!0,!0);else{var s=this.logNamespaceUsed(a,!0);this.getNamespaces().logUsed(s)}};Fe.prototype.parseNsAttributes=function(e,t){var n=this,i=e.$attrs,r=[];return ae(i,function(a,s){var u=n.parseNsAttribute(e,s,a);u&&r.push(u)}),r};Fe.prototype.parseGenericAttributes=function(e,t){var n=this;ae(t,function(i){if(i.name!==Li)try{n.addAttribute(n.nsAttributeName(i.name),i.value)}catch(r){console.warn("missing namespace information for ",i.name,"=",i.value,"on",e,r)}})};Fe.prototype.parseContainments=function(e){var t=this,n=this.body,i=this.element;ae(e,function(r){var a=i.get(r.name),s=r.isReference,u=r.isMany;if(u||(a=[a]),r.isBody)n.push(new gn().build(r,a[0]));else if(jo(r.type))ae(a,function(v){n.push(new Pr(t.addTagName(t.nsPropertyTagName(r))).build(r,v))});else if(s)ae(a,function(v){n.push(new Mr(t.addTagName(t.nsPropertyTagName(r))).build(v))});else{var c=Ko(r),b=op(r);ae(a,function(v){var x;c?x=new Oi(t,r):b?x=new Fe(t,r):x=new Fe(t),n.push(x.build(v))})}})};Fe.prototype.getNamespaces=function(e){var t=this.namespaces,n=this.parent,i;return t||(i=n&&n.getNamespaces(),e||!i?this.namespaces=t=new mp(i):t=i),t};Fe.prototype.logNamespace=function(e,t,n){var i=this.getNamespaces(n),r=e.uri,a=e.prefix,s=i.byUri(r);return(!s||n)&&i.add(e,t),i.mapPrefix(a,r),e};Fe.prototype.logNamespaceUsed=function(e,t){var n=this.element,i=n.$model,r=this.getNamespaces(t),a=e.prefix,s=e.uri,u,c,b;if(!a&&!s)return{localName:e.localName};if(b=ap[a]||i&&(i.getPackage(a)||{}).uri,s=s||b||r.uriByPrefix(a),!s)throw new Error("no namespace uri given for prefix <"+a+">");if(e=r.byUri(s),!e){for(u=a,c=1;r.uriByPrefix(u);)u=a+"_"+c++;e=this.logNamespace({prefix:u,uri:s},b===s)}return a&&r.mapPrefix(a,s),e};Fe.prototype.parseAttributes=function(e){var t=this,n=this.element;ae(e,function(i){var r=n.get(i.name);if(i.isReference)if(!i.isMany)r=r.id;else{var a=[];ae(r,function(s){a.push(s.id)}),r=a.join(" ")}t.addAttribute(t.nsAttributeName(i),r)})};Fe.prototype.addTagName=function(e){var t=this.logNamespaceUsed(e);return this.getNamespaces().logUsed(t),Zo(e)};Fe.prototype.addAttribute=function(e,t){var n=this.attrs;qt(t)&&(t=Ep(t));var i=Zl(n,function(a){return a.name.localName===e.localName&&a.name.uri===e.uri&&a.name.prefix===e.prefix}),r={name:e,value:t};i!==-1?n.splice(i,1,r):n.push(r)};Fe.prototype.serializeAttributes=function(e){var t=this.attrs,n=this.namespaces;n&&(t=vp(n).concat(t)),ae(t,function(i){e.append(" ").append(Zo(i.name)).append('="').append(i.value).append('"')})};Fe.prototype.serializeTo=function(e){var t=this.body[0],n=t&&t.constructor!==gn;e.appendIndent().append("<"+this.tagName),this.serializeAttributes(e),e.append(t?">":" />"),t&&(n&&e.appendNewLine().indent(),ae(this.body,function(i){i.serializeTo(e)}),n&&e.unindent().appendIndent(),e.append("</"+this.tagName+">")),e.appendNewLine()};function Oi(e,t){Fe.call(this,e,t)}Xo(Oi,Fe);Oi.prototype.parseNsAttributes=function(e){var t=Fe.prototype.parseNsAttributes.call(this,e),n=e.$descriptor;if(n.name===this.propertyDescriptor.type)return t;var i=this.typeNs=this.nsTagName(n);this.getNamespaces().logUsed(this.typeNs);var r=e.$model.getPackage(i.uri),a=r.xml&&r.xml.typePrefix||"";return this.addAttribute(this.nsAttributeName(Li),(i.prefix?i.prefix+":":"")+a+n.ns.localName),t};Oi.prototype.isLocalNs=function(e){return e.uri===(this.typeNs||this.ns).uri};function Tp(){this.value="",this.write=function(e){this.value+=e}}function Cp(e,t){var n=[""];this.append=function(i){return e.write(i),this},this.appendNewLine=function(){return t&&e.write("\n"),this},this.appendIndent=function(){return t&&e.write(n.join("  ")),this},this.indent=function(){return n.push(""),this},this.unindent=function(){return n.pop(),this}}function Rp(e){e=me({format:!1,preamble:!0},e||{});function t(n,i){var r=i||new Tp,a=new Cp(r,e.format);if(e.preamble&&a.append(pp),new Fe().build(n).serializeTo(a),!i)return r.value}return{toXML:t}}function Ui(e,t){Rt.call(this,e,t)}Ui.prototype=Object.create(Rt.prototype);Ui.prototype.fromXML=function(e,t,n){qt(t)||(n=t,t="bpmn:Definitions");var i=new Nr(me({model:this,lax:!0},n)),r=i.handler(t);return i.fromXML(e,r)};Ui.prototype.toXML=function(e,t){var n=new Rp(t);return new Promise(function(i,r){try{var a=n.toXML(e);return i({xml:a})}catch(s){return r(s)}})};var Dp="BPMN20",Ip="http://www.omg.org/spec/BPMN/20100524/MODEL",Np="bpmn",Mp=[],Pp=[{name:"Interface",superClass:["RootElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"operations",type:"Operation",isMany:!0},{name:"implementationRef",isAttr:!0,type:"String"}]},{name:"Operation",superClass:["BaseElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"inMessageRef",type:"Message",isReference:!0},{name:"outMessageRef",type:"Message",isReference:!0},{name:"errorRef",type:"Error",isMany:!0,isReference:!0},{name:"implementationRef",isAttr:!0,type:"String"}]},{name:"EndPoint",superClass:["RootElement"]},{name:"Auditing",superClass:["BaseElement"]},{name:"GlobalTask",superClass:["CallableElement"],properties:[{name:"resources",type:"ResourceRole",isMany:!0}]},{name:"Monitoring",superClass:["BaseElement"]},{name:"Performer",superClass:["ResourceRole"]},{name:"Process",superClass:["FlowElementsContainer","CallableElement"],properties:[{name:"processType",type:"ProcessType",isAttr:!0},{name:"isClosed",isAttr:!0,type:"Boolean"},{name:"auditing",type:"Auditing"},{name:"monitoring",type:"Monitoring"},{name:"properties",type:"Property",isMany:!0},{name:"laneSets",isMany:!0,replaces:"FlowElementsContainer#laneSets",type:"LaneSet"},{name:"flowElements",isMany:!0,replaces:"FlowElementsContainer#flowElements",type:"FlowElement"},{name:"artifacts",type:"Artifact",isMany:!0},{name:"resources",type:"ResourceRole",isMany:!0},{name:"correlationSubscriptions",type:"CorrelationSubscription",isMany:!0},{name:"supports",type:"Process",isMany:!0,isReference:!0},{name:"definitionalCollaborationRef",type:"Collaboration",isAttr:!0,isReference:!0},{name:"isExecutable",isAttr:!0,type:"Boolean"}]},{name:"LaneSet",superClass:["BaseElement"],properties:[{name:"lanes",type:"Lane",isMany:!0},{name:"name",isAttr:!0,type:"String"}]},{name:"Lane",superClass:["BaseElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"partitionElementRef",type:"BaseElement",isAttr:!0,isReference:!0},{name:"partitionElement",type:"BaseElement"},{name:"flowNodeRef",type:"FlowNode",isMany:!0,isReference:!0},{name:"childLaneSet",type:"LaneSet",xml:{serialize:"xsi:type"}}]},{name:"GlobalManualTask",superClass:["GlobalTask"]},{name:"ManualTask",superClass:["Task"]},{name:"UserTask",superClass:["Task"],properties:[{name:"renderings",type:"Rendering",isMany:!0},{name:"implementation",isAttr:!0,type:"String"}]},{name:"Rendering",superClass:["BaseElement"]},{name:"HumanPerformer",superClass:["Performer"]},{name:"PotentialOwner",superClass:["HumanPerformer"]},{name:"GlobalUserTask",superClass:["GlobalTask"],properties:[{name:"implementation",isAttr:!0,type:"String"},{name:"renderings",type:"Rendering",isMany:!0}]},{name:"Gateway",isAbstract:!0,superClass:["FlowNode"],properties:[{name:"gatewayDirection",type:"GatewayDirection",default:"Unspecified",isAttr:!0}]},{name:"EventBasedGateway",superClass:["Gateway"],properties:[{name:"instantiate",default:!1,isAttr:!0,type:"Boolean"},{name:"eventGatewayType",type:"EventBasedGatewayType",isAttr:!0,default:"Exclusive"}]},{name:"ComplexGateway",superClass:["Gateway"],properties:[{name:"activationCondition",type:"Expression",xml:{serialize:"xsi:type"}},{name:"default",type:"SequenceFlow",isAttr:!0,isReference:!0}]},{name:"ExclusiveGateway",superClass:["Gateway"],properties:[{name:"default",type:"SequenceFlow",isAttr:!0,isReference:!0}]},{name:"InclusiveGateway",superClass:["Gateway"],properties:[{name:"default",type:"SequenceFlow",isAttr:!0,isReference:!0}]},{name:"ParallelGateway",superClass:["Gateway"]},{name:"RootElement",isAbstract:!0,superClass:["BaseElement"]},{name:"Relationship",superClass:["BaseElement"],properties:[{name:"type",isAttr:!0,type:"String"},{name:"direction",type:"RelationshipDirection",isAttr:!0},{name:"source",isMany:!0,isReference:!0,type:"Element"},{name:"target",isMany:!0,isReference:!0,type:"Element"}]},{name:"BaseElement",isAbstract:!0,properties:[{name:"id",isAttr:!0,type:"String",isId:!0},{name:"documentation",type:"Documentation",isMany:!0},{name:"extensionDefinitions",type:"ExtensionDefinition",isMany:!0,isReference:!0},{name:"extensionElements",type:"ExtensionElements"}]},{name:"Extension",properties:[{name:"mustUnderstand",default:!1,isAttr:!0,type:"Boolean"},{name:"definition",type:"ExtensionDefinition",isAttr:!0,isReference:!0}]},{name:"ExtensionDefinition",properties:[{name:"name",isAttr:!0,type:"String"},{name:"extensionAttributeDefinitions",type:"ExtensionAttributeDefinition",isMany:!0}]},{name:"ExtensionAttributeDefinition",properties:[{name:"name",isAttr:!0,type:"String"},{name:"type",isAttr:!0,type:"String"},{name:"isReference",default:!1,isAttr:!0,type:"Boolean"},{name:"extensionDefinition",type:"ExtensionDefinition",isAttr:!0,isReference:!0}]},{name:"ExtensionElements",properties:[{name:"valueRef",isAttr:!0,isReference:!0,type:"Element"},{name:"values",type:"Element",isMany:!0},{name:"extensionAttributeDefinition",type:"ExtensionAttributeDefinition",isAttr:!0,isReference:!0}]},{name:"Documentation",superClass:["BaseElement"],properties:[{name:"text",type:"String",isBody:!0},{name:"textFormat",default:"text/plain",isAttr:!0,type:"String"}]},{name:"Event",isAbstract:!0,superClass:["FlowNode","InteractionNode"],properties:[{name:"properties",type:"Property",isMany:!0}]},{name:"IntermediateCatchEvent",superClass:["CatchEvent"]},{name:"IntermediateThrowEvent",superClass:["ThrowEvent"]},{name:"EndEvent",superClass:["ThrowEvent"]},{name:"StartEvent",superClass:["CatchEvent"],properties:[{name:"isInterrupting",default:!0,isAttr:!0,type:"Boolean"}]},{name:"ThrowEvent",isAbstract:!0,superClass:["Event"],properties:[{name:"dataInputs",type:"DataInput",isMany:!0},{name:"dataInputAssociations",type:"DataInputAssociation",isMany:!0},{name:"inputSet",type:"InputSet"},{name:"eventDefinitions",type:"EventDefinition",isMany:!0},{name:"eventDefinitionRef",type:"EventDefinition",isMany:!0,isReference:!0}]},{name:"CatchEvent",isAbstract:!0,superClass:["Event"],properties:[{name:"parallelMultiple",isAttr:!0,type:"Boolean",default:!1},{name:"dataOutputs",type:"DataOutput",isMany:!0},{name:"dataOutputAssociations",type:"DataOutputAssociation",isMany:!0},{name:"outputSet",type:"OutputSet"},{name:"eventDefinitions",type:"EventDefinition",isMany:!0},{name:"eventDefinitionRef",type:"EventDefinition",isMany:!0,isReference:!0}]},{name:"BoundaryEvent",superClass:["CatchEvent"],properties:[{name:"cancelActivity",default:!0,isAttr:!0,type:"Boolean"},{name:"attachedToRef",type:"Activity",isAttr:!0,isReference:!0}]},{name:"EventDefinition",isAbstract:!0,superClass:["RootElement"]},{name:"CancelEventDefinition",superClass:["EventDefinition"]},{name:"ErrorEventDefinition",superClass:["EventDefinition"],properties:[{name:"errorRef",type:"Error",isAttr:!0,isReference:!0}]},{name:"TerminateEventDefinition",superClass:["EventDefinition"]},{name:"EscalationEventDefinition",superClass:["EventDefinition"],properties:[{name:"escalationRef",type:"Escalation",isAttr:!0,isReference:!0}]},{name:"Escalation",properties:[{name:"structureRef",type:"ItemDefinition",isAttr:!0,isReference:!0},{name:"name",isAttr:!0,type:"String"},{name:"escalationCode",isAttr:!0,type:"String"}],superClass:["RootElement"]},{name:"CompensateEventDefinition",superClass:["EventDefinition"],properties:[{name:"waitForCompletion",isAttr:!0,type:"Boolean",default:!0},{name:"activityRef",type:"Activity",isAttr:!0,isReference:!0}]},{name:"TimerEventDefinition",superClass:["EventDefinition"],properties:[{name:"timeDate",type:"Expression",xml:{serialize:"xsi:type"}},{name:"timeCycle",type:"Expression",xml:{serialize:"xsi:type"}},{name:"timeDuration",type:"Expression",xml:{serialize:"xsi:type"}}]},{name:"LinkEventDefinition",superClass:["EventDefinition"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"target",type:"LinkEventDefinition",isReference:!0},{name:"source",type:"LinkEventDefinition",isMany:!0,isReference:!0}]},{name:"MessageEventDefinition",superClass:["EventDefinition"],properties:[{name:"messageRef",type:"Message",isAttr:!0,isReference:!0},{name:"operationRef",type:"Operation",isAttr:!0,isReference:!0}]},{name:"ConditionalEventDefinition",superClass:["EventDefinition"],properties:[{name:"condition",type:"Expression",xml:{serialize:"xsi:type"}}]},{name:"SignalEventDefinition",superClass:["EventDefinition"],properties:[{name:"signalRef",type:"Signal",isAttr:!0,isReference:!0}]},{name:"Signal",superClass:["RootElement"],properties:[{name:"structureRef",type:"ItemDefinition",isAttr:!0,isReference:!0},{name:"name",isAttr:!0,type:"String"}]},{name:"ImplicitThrowEvent",superClass:["ThrowEvent"]},{name:"DataState",superClass:["BaseElement"],properties:[{name:"name",isAttr:!0,type:"String"}]},{name:"ItemAwareElement",superClass:["BaseElement"],properties:[{name:"itemSubjectRef",type:"ItemDefinition",isAttr:!0,isReference:!0},{name:"dataState",type:"DataState"}]},{name:"DataAssociation",superClass:["BaseElement"],properties:[{name:"sourceRef",type:"ItemAwareElement",isMany:!0,isReference:!0},{name:"targetRef",type:"ItemAwareElement",isReference:!0},{name:"transformation",type:"FormalExpression",xml:{serialize:"property"}},{name:"assignment",type:"Assignment",isMany:!0}]},{name:"DataInput",superClass:["ItemAwareElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"isCollection",default:!1,isAttr:!0,type:"Boolean"},{name:"inputSetRef",type:"InputSet",isMany:!0,isVirtual:!0,isReference:!0},{name:"inputSetWithOptional",type:"InputSet",isMany:!0,isVirtual:!0,isReference:!0},{name:"inputSetWithWhileExecuting",type:"InputSet",isMany:!0,isVirtual:!0,isReference:!0}]},{name:"DataOutput",superClass:["ItemAwareElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"isCollection",default:!1,isAttr:!0,type:"Boolean"},{name:"outputSetRef",type:"OutputSet",isMany:!0,isVirtual:!0,isReference:!0},{name:"outputSetWithOptional",type:"OutputSet",isMany:!0,isVirtual:!0,isReference:!0},{name:"outputSetWithWhileExecuting",type:"OutputSet",isMany:!0,isVirtual:!0,isReference:!0}]},{name:"InputSet",superClass:["BaseElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"dataInputRefs",type:"DataInput",isMany:!0,isReference:!0},{name:"optionalInputRefs",type:"DataInput",isMany:!0,isReference:!0},{name:"whileExecutingInputRefs",type:"DataInput",isMany:!0,isReference:!0},{name:"outputSetRefs",type:"OutputSet",isMany:!0,isReference:!0}]},{name:"OutputSet",superClass:["BaseElement"],properties:[{name:"dataOutputRefs",type:"DataOutput",isMany:!0,isReference:!0},{name:"name",isAttr:!0,type:"String"},{name:"inputSetRefs",type:"InputSet",isMany:!0,isReference:!0},{name:"optionalOutputRefs",type:"DataOutput",isMany:!0,isReference:!0},{name:"whileExecutingOutputRefs",type:"DataOutput",isMany:!0,isReference:!0}]},{name:"Property",superClass:["ItemAwareElement"],properties:[{name:"name",isAttr:!0,type:"String"}]},{name:"DataInputAssociation",superClass:["DataAssociation"]},{name:"DataOutputAssociation",superClass:["DataAssociation"]},{name:"InputOutputSpecification",superClass:["BaseElement"],properties:[{name:"dataInputs",type:"DataInput",isMany:!0},{name:"dataOutputs",type:"DataOutput",isMany:!0},{name:"inputSets",type:"InputSet",isMany:!0},{name:"outputSets",type:"OutputSet",isMany:!0}]},{name:"DataObject",superClass:["FlowElement","ItemAwareElement"],properties:[{name:"isCollection",default:!1,isAttr:!0,type:"Boolean"}]},{name:"InputOutputBinding",properties:[{name:"inputDataRef",type:"InputSet",isAttr:!0,isReference:!0},{name:"outputDataRef",type:"OutputSet",isAttr:!0,isReference:!0},{name:"operationRef",type:"Operation",isAttr:!0,isReference:!0}]},{name:"Assignment",superClass:["BaseElement"],properties:[{name:"from",type:"Expression",xml:{serialize:"xsi:type"}},{name:"to",type:"Expression",xml:{serialize:"xsi:type"}}]},{name:"DataStore",superClass:["RootElement","ItemAwareElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"capacity",isAttr:!0,type:"Integer"},{name:"isUnlimited",default:!0,isAttr:!0,type:"Boolean"}]},{name:"DataStoreReference",superClass:["ItemAwareElement","FlowElement"],properties:[{name:"dataStoreRef",type:"DataStore",isAttr:!0,isReference:!0}]},{name:"DataObjectReference",superClass:["ItemAwareElement","FlowElement"],properties:[{name:"dataObjectRef",type:"DataObject",isAttr:!0,isReference:!0}]},{name:"ConversationLink",superClass:["BaseElement"],properties:[{name:"sourceRef",type:"InteractionNode",isAttr:!0,isReference:!0},{name:"targetRef",type:"InteractionNode",isAttr:!0,isReference:!0},{name:"name",isAttr:!0,type:"String"}]},{name:"ConversationAssociation",superClass:["BaseElement"],properties:[{name:"innerConversationNodeRef",type:"ConversationNode",isAttr:!0,isReference:!0},{name:"outerConversationNodeRef",type:"ConversationNode",isAttr:!0,isReference:!0}]},{name:"CallConversation",superClass:["ConversationNode"],properties:[{name:"calledCollaborationRef",type:"Collaboration",isAttr:!0,isReference:!0},{name:"participantAssociations",type:"ParticipantAssociation",isMany:!0}]},{name:"Conversation",superClass:["ConversationNode"]},{name:"SubConversation",superClass:["ConversationNode"],properties:[{name:"conversationNodes",type:"ConversationNode",isMany:!0}]},{name:"ConversationNode",isAbstract:!0,superClass:["InteractionNode","BaseElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"participantRef",type:"Participant",isMany:!0,isReference:!0},{name:"messageFlowRefs",type:"MessageFlow",isMany:!0,isReference:!0},{name:"correlationKeys",type:"CorrelationKey",isMany:!0}]},{name:"GlobalConversation",superClass:["Collaboration"]},{name:"PartnerEntity",superClass:["RootElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"participantRef",type:"Participant",isMany:!0,isReference:!0}]},{name:"PartnerRole",superClass:["RootElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"participantRef",type:"Participant",isMany:!0,isReference:!0}]},{name:"CorrelationProperty",superClass:["RootElement"],properties:[{name:"correlationPropertyRetrievalExpression",type:"CorrelationPropertyRetrievalExpression",isMany:!0},{name:"name",isAttr:!0,type:"String"},{name:"type",type:"ItemDefinition",isAttr:!0,isReference:!0}]},{name:"Error",superClass:["RootElement"],properties:[{name:"structureRef",type:"ItemDefinition",isAttr:!0,isReference:!0},{name:"name",isAttr:!0,type:"String"},{name:"errorCode",isAttr:!0,type:"String"}]},{name:"CorrelationKey",superClass:["BaseElement"],properties:[{name:"correlationPropertyRef",type:"CorrelationProperty",isMany:!0,isReference:!0},{name:"name",isAttr:!0,type:"String"}]},{name:"Expression",superClass:["BaseElement"],isAbstract:!1,properties:[{name:"body",isBody:!0,type:"String"}]},{name:"FormalExpression",superClass:["Expression"],properties:[{name:"language",isAttr:!0,type:"String"},{name:"evaluatesToTypeRef",type:"ItemDefinition",isAttr:!0,isReference:!0}]},{name:"Message",superClass:["RootElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"itemRef",type:"ItemDefinition",isAttr:!0,isReference:!0}]},{name:"ItemDefinition",superClass:["RootElement"],properties:[{name:"itemKind",type:"ItemKind",isAttr:!0},{name:"structureRef",isAttr:!0,type:"String"},{name:"isCollection",default:!1,isAttr:!0,type:"Boolean"},{name:"import",type:"Import",isAttr:!0,isReference:!0}]},{name:"FlowElement",isAbstract:!0,superClass:["BaseElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"auditing",type:"Auditing"},{name:"monitoring",type:"Monitoring"},{name:"categoryValueRef",type:"CategoryValue",isMany:!0,isReference:!0}]},{name:"SequenceFlow",superClass:["FlowElement"],properties:[{name:"isImmediate",isAttr:!0,type:"Boolean"},{name:"conditionExpression",type:"Expression",xml:{serialize:"xsi:type"}},{name:"sourceRef",type:"FlowNode",isAttr:!0,isReference:!0},{name:"targetRef",type:"FlowNode",isAttr:!0,isReference:!0}]},{name:"FlowElementsContainer",isAbstract:!0,superClass:["BaseElement"],properties:[{name:"laneSets",type:"LaneSet",isMany:!0},{name:"flowElements",type:"FlowElement",isMany:!0}]},{name:"CallableElement",isAbstract:!0,superClass:["RootElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"ioSpecification",type:"InputOutputSpecification",xml:{serialize:"property"}},{name:"supportedInterfaceRef",type:"Interface",isMany:!0,isReference:!0},{name:"ioBinding",type:"InputOutputBinding",isMany:!0,xml:{serialize:"property"}}]},{name:"FlowNode",isAbstract:!0,superClass:["FlowElement"],properties:[{name:"incoming",type:"SequenceFlow",isMany:!0,isReference:!0},{name:"outgoing",type:"SequenceFlow",isMany:!0,isReference:!0},{name:"lanes",type:"Lane",isMany:!0,isVirtual:!0,isReference:!0}]},{name:"CorrelationPropertyRetrievalExpression",superClass:["BaseElement"],properties:[{name:"messagePath",type:"FormalExpression"},{name:"messageRef",type:"Message",isAttr:!0,isReference:!0}]},{name:"CorrelationPropertyBinding",superClass:["BaseElement"],properties:[{name:"dataPath",type:"FormalExpression"},{name:"correlationPropertyRef",type:"CorrelationProperty",isAttr:!0,isReference:!0}]},{name:"Resource",superClass:["RootElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"resourceParameters",type:"ResourceParameter",isMany:!0}]},{name:"ResourceParameter",superClass:["BaseElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"isRequired",isAttr:!0,type:"Boolean"},{name:"type",type:"ItemDefinition",isAttr:!0,isReference:!0}]},{name:"CorrelationSubscription",superClass:["BaseElement"],properties:[{name:"correlationKeyRef",type:"CorrelationKey",isAttr:!0,isReference:!0},{name:"correlationPropertyBinding",type:"CorrelationPropertyBinding",isMany:!0}]},{name:"MessageFlow",superClass:["BaseElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"sourceRef",type:"InteractionNode",isAttr:!0,isReference:!0},{name:"targetRef",type:"InteractionNode",isAttr:!0,isReference:!0},{name:"messageRef",type:"Message",isAttr:!0,isReference:!0}]},{name:"MessageFlowAssociation",superClass:["BaseElement"],properties:[{name:"innerMessageFlowRef",type:"MessageFlow",isAttr:!0,isReference:!0},{name:"outerMessageFlowRef",type:"MessageFlow",isAttr:!0,isReference:!0}]},{name:"InteractionNode",isAbstract:!0,properties:[{name:"incomingConversationLinks",type:"ConversationLink",isMany:!0,isVirtual:!0,isReference:!0},{name:"outgoingConversationLinks",type:"ConversationLink",isMany:!0,isVirtual:!0,isReference:!0}]},{name:"Participant",superClass:["InteractionNode","BaseElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"interfaceRef",type:"Interface",isMany:!0,isReference:!0},{name:"participantMultiplicity",type:"ParticipantMultiplicity"},{name:"endPointRefs",type:"EndPoint",isMany:!0,isReference:!0},{name:"processRef",type:"Process",isAttr:!0,isReference:!0}]},{name:"ParticipantAssociation",superClass:["BaseElement"],properties:[{name:"innerParticipantRef",type:"Participant",isAttr:!0,isReference:!0},{name:"outerParticipantRef",type:"Participant",isAttr:!0,isReference:!0}]},{name:"ParticipantMultiplicity",properties:[{name:"minimum",default:0,isAttr:!0,type:"Integer"},{name:"maximum",default:1,isAttr:!0,type:"Integer"}],superClass:["BaseElement"]},{name:"Collaboration",superClass:["RootElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"isClosed",isAttr:!0,type:"Boolean"},{name:"participants",type:"Participant",isMany:!0},{name:"messageFlows",type:"MessageFlow",isMany:!0},{name:"artifacts",type:"Artifact",isMany:!0},{name:"conversations",type:"ConversationNode",isMany:!0},{name:"conversationAssociations",type:"ConversationAssociation"},{name:"participantAssociations",type:"ParticipantAssociation",isMany:!0},{name:"messageFlowAssociations",type:"MessageFlowAssociation",isMany:!0},{name:"correlationKeys",type:"CorrelationKey",isMany:!0},{name:"choreographyRef",type:"Choreography",isMany:!0,isReference:!0},{name:"conversationLinks",type:"ConversationLink",isMany:!0}]},{name:"ChoreographyActivity",isAbstract:!0,superClass:["FlowNode"],properties:[{name:"participantRef",type:"Participant",isMany:!0,isReference:!0},{name:"initiatingParticipantRef",type:"Participant",isAttr:!0,isReference:!0},{name:"correlationKeys",type:"CorrelationKey",isMany:!0},{name:"loopType",type:"ChoreographyLoopType",default:"None",isAttr:!0}]},{name:"CallChoreography",superClass:["ChoreographyActivity"],properties:[{name:"calledChoreographyRef",type:"Choreography",isAttr:!0,isReference:!0},{name:"participantAssociations",type:"ParticipantAssociation",isMany:!0}]},{name:"SubChoreography",superClass:["ChoreographyActivity","FlowElementsContainer"],properties:[{name:"artifacts",type:"Artifact",isMany:!0}]},{name:"ChoreographyTask",superClass:["ChoreographyActivity"],properties:[{name:"messageFlowRef",type:"MessageFlow",isMany:!0,isReference:!0}]},{name:"Choreography",superClass:["Collaboration","FlowElementsContainer"]},{name:"GlobalChoreographyTask",superClass:["Choreography"],properties:[{name:"initiatingParticipantRef",type:"Participant",isAttr:!0,isReference:!0}]},{name:"TextAnnotation",superClass:["Artifact"],properties:[{name:"text",type:"String"},{name:"textFormat",default:"text/plain",isAttr:!0,type:"String"}]},{name:"Group",superClass:["Artifact"],properties:[{name:"categoryValueRef",type:"CategoryValue",isAttr:!0,isReference:!0}]},{name:"Association",superClass:["Artifact"],properties:[{name:"associationDirection",type:"AssociationDirection",isAttr:!0},{name:"sourceRef",type:"BaseElement",isAttr:!0,isReference:!0},{name:"targetRef",type:"BaseElement",isAttr:!0,isReference:!0}]},{name:"Category",superClass:["RootElement"],properties:[{name:"categoryValue",type:"CategoryValue",isMany:!0},{name:"name",isAttr:!0,type:"String"}]},{name:"Artifact",isAbstract:!0,superClass:["BaseElement"]},{name:"CategoryValue",superClass:["BaseElement"],properties:[{name:"categorizedFlowElements",type:"FlowElement",isMany:!0,isVirtual:!0,isReference:!0},{name:"value",isAttr:!0,type:"String"}]},{name:"Activity",isAbstract:!0,superClass:["FlowNode"],properties:[{name:"isForCompensation",default:!1,isAttr:!0,type:"Boolean"},{name:"default",type:"SequenceFlow",isAttr:!0,isReference:!0},{name:"ioSpecification",type:"InputOutputSpecification",xml:{serialize:"property"}},{name:"boundaryEventRefs",type:"BoundaryEvent",isMany:!0,isReference:!0},{name:"properties",type:"Property",isMany:!0},{name:"dataInputAssociations",type:"DataInputAssociation",isMany:!0},{name:"dataOutputAssociations",type:"DataOutputAssociation",isMany:!0},{name:"startQuantity",default:1,isAttr:!0,type:"Integer"},{name:"resources",type:"ResourceRole",isMany:!0},{name:"completionQuantity",default:1,isAttr:!0,type:"Integer"},{name:"loopCharacteristics",type:"LoopCharacteristics"}]},{name:"ServiceTask",superClass:["Task"],properties:[{name:"implementation",isAttr:!0,type:"String"},{name:"operationRef",type:"Operation",isAttr:!0,isReference:!0}]},{name:"SubProcess",superClass:["Activity","FlowElementsContainer","InteractionNode"],properties:[{name:"triggeredByEvent",default:!1,isAttr:!0,type:"Boolean"},{name:"artifacts",type:"Artifact",isMany:!0}]},{name:"LoopCharacteristics",isAbstract:!0,superClass:["BaseElement"]},{name:"MultiInstanceLoopCharacteristics",superClass:["LoopCharacteristics"],properties:[{name:"isSequential",default:!1,isAttr:!0,type:"Boolean"},{name:"behavior",type:"MultiInstanceBehavior",default:"All",isAttr:!0},{name:"loopCardinality",type:"Expression",xml:{serialize:"xsi:type"}},{name:"loopDataInputRef",type:"ItemAwareElement",isReference:!0},{name:"loopDataOutputRef",type:"ItemAwareElement",isReference:!0},{name:"inputDataItem",type:"DataInput",xml:{serialize:"property"}},{name:"outputDataItem",type:"DataOutput",xml:{serialize:"property"}},{name:"complexBehaviorDefinition",type:"ComplexBehaviorDefinition",isMany:!0},{name:"completionCondition",type:"Expression",xml:{serialize:"xsi:type"}},{name:"oneBehaviorEventRef",type:"EventDefinition",isAttr:!0,isReference:!0},{name:"noneBehaviorEventRef",type:"EventDefinition",isAttr:!0,isReference:!0}]},{name:"StandardLoopCharacteristics",superClass:["LoopCharacteristics"],properties:[{name:"testBefore",default:!1,isAttr:!0,type:"Boolean"},{name:"loopCondition",type:"Expression",xml:{serialize:"xsi:type"}},{name:"loopMaximum",type:"Integer",isAttr:!0}]},{name:"CallActivity",superClass:["Activity","InteractionNode"],properties:[{name:"calledElement",type:"String",isAttr:!0}]},{name:"Task",superClass:["Activity","InteractionNode"]},{name:"SendTask",superClass:["Task"],properties:[{name:"implementation",isAttr:!0,type:"String"},{name:"operationRef",type:"Operation",isAttr:!0,isReference:!0},{name:"messageRef",type:"Message",isAttr:!0,isReference:!0}]},{name:"ReceiveTask",superClass:["Task"],properties:[{name:"implementation",isAttr:!0,type:"String"},{name:"instantiate",default:!1,isAttr:!0,type:"Boolean"},{name:"operationRef",type:"Operation",isAttr:!0,isReference:!0},{name:"messageRef",type:"Message",isAttr:!0,isReference:!0}]},{name:"ScriptTask",superClass:["Task"],properties:[{name:"scriptFormat",isAttr:!0,type:"String"},{name:"script",type:"String"}]},{name:"BusinessRuleTask",superClass:["Task"],properties:[{name:"implementation",isAttr:!0,type:"String"}]},{name:"AdHocSubProcess",superClass:["SubProcess"],properties:[{name:"completionCondition",type:"Expression",xml:{serialize:"xsi:type"}},{name:"ordering",type:"AdHocOrdering",isAttr:!0},{name:"cancelRemainingInstances",default:!0,isAttr:!0,type:"Boolean"}]},{name:"Transaction",superClass:["SubProcess"],properties:[{name:"protocol",isAttr:!0,type:"String"},{name:"method",isAttr:!0,type:"String"}]},{name:"GlobalScriptTask",superClass:["GlobalTask"],properties:[{name:"scriptLanguage",isAttr:!0,type:"String"},{name:"script",isAttr:!0,type:"String"}]},{name:"GlobalBusinessRuleTask",superClass:["GlobalTask"],properties:[{name:"implementation",isAttr:!0,type:"String"}]},{name:"ComplexBehaviorDefinition",superClass:["BaseElement"],properties:[{name:"condition",type:"FormalExpression"},{name:"event",type:"ImplicitThrowEvent"}]},{name:"ResourceRole",superClass:["BaseElement"],properties:[{name:"resourceRef",type:"Resource",isReference:!0},{name:"resourceParameterBindings",type:"ResourceParameterBinding",isMany:!0},{name:"resourceAssignmentExpression",type:"ResourceAssignmentExpression"},{name:"name",isAttr:!0,type:"String"}]},{name:"ResourceParameterBinding",properties:[{name:"expression",type:"Expression",xml:{serialize:"xsi:type"}},{name:"parameterRef",type:"ResourceParameter",isAttr:!0,isReference:!0}],superClass:["BaseElement"]},{name:"ResourceAssignmentExpression",properties:[{name:"expression",type:"Expression",xml:{serialize:"xsi:type"}}],superClass:["BaseElement"]},{name:"Import",properties:[{name:"importType",isAttr:!0,type:"String"},{name:"location",isAttr:!0,type:"String"},{name:"namespace",isAttr:!0,type:"String"}]},{name:"Definitions",superClass:["BaseElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"targetNamespace",isAttr:!0,type:"String"},{name:"expressionLanguage",default:"http://www.w3.org/1999/XPath",isAttr:!0,type:"String"},{name:"typeLanguage",default:"http://www.w3.org/2001/XMLSchema",isAttr:!0,type:"String"},{name:"imports",type:"Import",isMany:!0},{name:"extensions",type:"Extension",isMany:!0},{name:"rootElements",type:"RootElement",isMany:!0},{name:"diagrams",isMany:!0,type:"bpmndi:BPMNDiagram"},{name:"exporter",isAttr:!0,type:"String"},{name:"relationships",type:"Relationship",isMany:!0},{name:"exporterVersion",isAttr:!0,type:"String"}]}],$p=[{name:"ProcessType",literalValues:[{name:"None"},{name:"Public"},{name:"Private"}]},{name:"GatewayDirection",literalValues:[{name:"Unspecified"},{name:"Converging"},{name:"Diverging"},{name:"Mixed"}]},{name:"EventBasedGatewayType",literalValues:[{name:"Parallel"},{name:"Exclusive"}]},{name:"RelationshipDirection",literalValues:[{name:"None"},{name:"Forward"},{name:"Backward"},{name:"Both"}]},{name:"ItemKind",literalValues:[{name:"Physical"},{name:"Information"}]},{name:"ChoreographyLoopType",literalValues:[{name:"None"},{name:"Standard"},{name:"MultiInstanceSequential"},{name:"MultiInstanceParallel"}]},{name:"AssociationDirection",literalValues:[{name:"None"},{name:"One"},{name:"Both"}]},{name:"MultiInstanceBehavior",literalValues:[{name:"None"},{name:"One"},{name:"All"},{name:"Complex"}]},{name:"AdHocOrdering",literalValues:[{name:"Parallel"},{name:"Sequential"}]}],Vp={tagAlias:"lowerCase",typePrefix:"t"},Lp={name:Dp,uri:Ip,prefix:Np,associations:Mp,types:Pp,enumerations:$p,xml:Vp},Bp="BPMNDI",Op="http://www.omg.org/spec/BPMN/20100524/DI",Up="bpmndi",Fp=[{name:"BPMNDiagram",properties:[{name:"plane",type:"BPMNPlane",redefines:"di:Diagram#rootElement"},{name:"labelStyle",type:"BPMNLabelStyle",isMany:!0}],superClass:["di:Diagram"]},{name:"BPMNPlane",properties:[{name:"bpmnElement",isAttr:!0,isReference:!0,type:"bpmn:BaseElement",redefines:"di:DiagramElement#modelElement"}],superClass:["di:Plane"]},{name:"BPMNShape",properties:[{name:"bpmnElement",isAttr:!0,isReference:!0,type:"bpmn:BaseElement",redefines:"di:DiagramElement#modelElement"},{name:"isHorizontal",isAttr:!0,type:"Boolean"},{name:"isExpanded",isAttr:!0,type:"Boolean"},{name:"isMarkerVisible",isAttr:!0,type:"Boolean"},{name:"label",type:"BPMNLabel"},{name:"isMessageVisible",isAttr:!0,type:"Boolean"},{name:"participantBandKind",type:"ParticipantBandKind",isAttr:!0},{name:"choreographyActivityShape",type:"BPMNShape",isAttr:!0,isReference:!0}],superClass:["di:LabeledShape"]},{name:"BPMNEdge",properties:[{name:"label",type:"BPMNLabel"},{name:"bpmnElement",isAttr:!0,isReference:!0,type:"bpmn:BaseElement",redefines:"di:DiagramElement#modelElement"},{name:"sourceElement",isAttr:!0,isReference:!0,type:"di:DiagramElement",redefines:"di:Edge#source"},{name:"targetElement",isAttr:!0,isReference:!0,type:"di:DiagramElement",redefines:"di:Edge#target"},{name:"messageVisibleKind",type:"MessageVisibleKind",isAttr:!0,default:"initiating"}],superClass:["di:LabeledEdge"]},{name:"BPMNLabel",properties:[{name:"labelStyle",type:"BPMNLabelStyle",isAttr:!0,isReference:!0,redefines:"di:DiagramElement#style"}],superClass:["di:Label"]},{name:"BPMNLabelStyle",properties:[{name:"font",type:"dc:Font"}],superClass:["di:Style"]}],qp=[{name:"ParticipantBandKind",literalValues:[{name:"top_initiating"},{name:"middle_initiating"},{name:"bottom_initiating"},{name:"top_non_initiating"},{name:"middle_non_initiating"},{name:"bottom_non_initiating"}]},{name:"MessageVisibleKind",literalValues:[{name:"initiating"},{name:"non_initiating"}]}],jp=[],zp={name:Bp,uri:Op,prefix:Up,types:Fp,enumerations:qp,associations:jp},Wp="DC",Hp="http://www.omg.org/spec/DD/20100524/DC",Yp="dc",Kp=[{name:"Boolean"},{name:"Integer"},{name:"Real"},{name:"String"},{name:"Font",properties:[{name:"name",type:"String",isAttr:!0},{name:"size",type:"Real",isAttr:!0},{name:"isBold",type:"Boolean",isAttr:!0},{name:"isItalic",type:"Boolean",isAttr:!0},{name:"isUnderline",type:"Boolean",isAttr:!0},{name:"isStrikeThrough",type:"Boolean",isAttr:!0}]},{name:"Point",properties:[{name:"x",type:"Real",default:"0",isAttr:!0},{name:"y",type:"Real",default:"0",isAttr:!0}]},{name:"Bounds",properties:[{name:"x",type:"Real",default:"0",isAttr:!0},{name:"y",type:"Real",default:"0",isAttr:!0},{name:"width",type:"Real",isAttr:!0},{name:"height",type:"Real",isAttr:!0}]}],Gp=[],Qp={name:Wp,uri:Hp,prefix:Yp,types:Kp,associations:Gp},Xp="DI",Zp="http://www.omg.org/spec/DD/20100524/DI",Jp="di",ef=[{name:"DiagramElement",isAbstract:!0,properties:[{name:"id",isAttr:!0,isId:!0,type:"String"},{name:"extension",type:"Extension"},{name:"owningDiagram",type:"Diagram",isReadOnly:!0,isVirtual:!0,isReference:!0},{name:"owningElement",type:"DiagramElement",isReadOnly:!0,isVirtual:!0,isReference:!0},{name:"modelElement",isReadOnly:!0,isVirtual:!0,isReference:!0,type:"Element"},{name:"style",type:"Style",isReadOnly:!0,isVirtual:!0,isReference:!0},{name:"ownedElement",type:"DiagramElement",isReadOnly:!0,isMany:!0,isVirtual:!0}]},{name:"Node",isAbstract:!0,superClass:["DiagramElement"]},{name:"Edge",isAbstract:!0,superClass:["DiagramElement"],properties:[{name:"source",type:"DiagramElement",isReadOnly:!0,isVirtual:!0,isReference:!0},{name:"target",type:"DiagramElement",isReadOnly:!0,isVirtual:!0,isReference:!0},{name:"waypoint",isUnique:!1,isMany:!0,type:"dc:Point",xml:{serialize:"xsi:type"}}]},{name:"Diagram",isAbstract:!0,properties:[{name:"id",isAttr:!0,isId:!0,type:"String"},{name:"rootElement",type:"DiagramElement",isReadOnly:!0,isVirtual:!0},{name:"name",isAttr:!0,type:"String"},{name:"documentation",isAttr:!0,type:"String"},{name:"resolution",isAttr:!0,type:"Real"},{name:"ownedStyle",type:"Style",isReadOnly:!0,isMany:!0,isVirtual:!0}]},{name:"Shape",isAbstract:!0,superClass:["Node"],properties:[{name:"bounds",type:"dc:Bounds"}]},{name:"Plane",isAbstract:!0,superClass:["Node"],properties:[{name:"planeElement",type:"DiagramElement",subsettedProperty:"DiagramElement-ownedElement",isMany:!0}]},{name:"LabeledEdge",isAbstract:!0,superClass:["Edge"],properties:[{name:"ownedLabel",type:"Label",isReadOnly:!0,subsettedProperty:"DiagramElement-ownedElement",isMany:!0,isVirtual:!0}]},{name:"LabeledShape",isAbstract:!0,superClass:["Shape"],properties:[{name:"ownedLabel",type:"Label",isReadOnly:!0,subsettedProperty:"DiagramElement-ownedElement",isMany:!0,isVirtual:!0}]},{name:"Label",isAbstract:!0,superClass:["Node"],properties:[{name:"bounds",type:"dc:Bounds"}]},{name:"Style",isAbstract:!0,properties:[{name:"id",isAttr:!0,isId:!0,type:"String"}]},{name:"Extension",properties:[{name:"values",isMany:!0,type:"Element"}]}],tf=[],nf={tagAlias:"lowerCase"},rf={name:Xp,uri:Zp,prefix:Jp,types:ef,associations:tf,xml:nf},af="bpmn.io colors for BPMN",of="http://bpmn.io/schema/bpmn/biocolor/1.0",sf="bioc",lf=[{name:"ColoredShape",extends:["bpmndi:BPMNShape"],properties:[{name:"stroke",isAttr:!0,type:"String"},{name:"fill",isAttr:!0,type:"String"}]},{name:"ColoredEdge",extends:["bpmndi:BPMNEdge"],properties:[{name:"stroke",isAttr:!0,type:"String"},{name:"fill",isAttr:!0,type:"String"}]}],uf=[],cf=[],df={name:af,uri:of,prefix:sf,types:lf,enumerations:uf,associations:cf},pf="BPMN in Color",ff="http://www.omg.org/spec/BPMN/non-normative/color/1.0",mf="color",hf=[{name:"ColoredLabel",extends:["bpmndi:BPMNLabel"],properties:[{name:"color",isAttr:!0,type:"String"}]},{name:"ColoredShape",extends:["bpmndi:BPMNShape"],properties:[{name:"background-color",isAttr:!0,type:"String"},{name:"border-color",isAttr:!0,type:"String"}]},{name:"ColoredEdge",extends:["bpmndi:BPMNEdge"],properties:[{name:"border-color",isAttr:!0,type:"String"}]}],yf=[],vf=[],gf={name:pf,uri:ff,prefix:mf,types:hf,enumerations:yf,associations:vf},bf={bpmn:Lp,bpmndi:zp,dc:Qp,di:rf,bioc:df,color:gf};function _f(e,t){var n=me({},bf,e);return new Ui(n,t)}var wf="Tried to access di from the businessObject. The di is available through the diagram element only. For more information, see https://github.com/bpmn-io/bpmn-js/issues/1472";function xf(e){$n(e,"di")||Object.defineProperty(e,"di",{enumerable:!1,get:function(){throw new Error(wf)}})}function ut(e,t){return e.$instanceOf(t)}function Ef(e){return Pt(e.rootElements,function(t){return ut(t,"bpmn:Process")||ut(t,"bpmn:Collaboration")})}function kf(e,t){var n={},i=[],r={};function a(P,q){return function(ie){P(ie,q)}}function s(P){n[P.id]=P}function u(P){return n[P.id]}function c(P,q){var ie=P.gfx;if(ie)throw new Error(t("already rendered {element}",{element:at(P)}));return e.element(P,r[P.id],q)}function b(P,q){return e.root(P,r[P.id],q)}function v(P,q){try{var ie=r[P.id]&&c(P,q);return s(P),ie}catch(Te){x(Te.message,{element:P,error:Te}),console.error(t("failed to import {element}",{element:at(P)})),console.error(Te)}}function x(P,q){e.error(P,q)}var f=this.registerDi=function(q){var ie=q.bpmnElement;ie?r[ie.id]?x(t("multiple DI elements defined for {element}",{element:at(ie)}),{element:ie}):(r[ie.id]=q,xf(ie)):x(t("no bpmnElement referenced in {element}",{element:at(q)}),{element:q})};function U(P){X(P.plane)}function X(P){f(P),ae(P.planeElement,J)}function J(P){f(P)}this.handleDefinitions=function(q,ie){var Te=q.diagrams;if(ie&&Te.indexOf(ie)===-1)throw new Error(t("diagram not part of bpmn:Definitions"));if(!ie&&Te&&Te.length&&(ie=Te[0]),!ie)throw new Error(t("no diagram to display"));r={},U(ie);var Ae=ie.plane;if(!Ae)throw new Error(t("no plane for {element}",{element:at(ie)}));var Ne=Ae.bpmnElement;if(!Ne)if(Ne=Ef(q),Ne)x(t("correcting missing bpmnElement on {plane} to {rootElement}",{plane:at(Ae),rootElement:at(Ne)})),Ae.bpmnElement=Ne,f(Ae);else throw new Error(t("no process or collaboration to display"));var m=b(Ne,Ae);if(ut(Ne,"bpmn:Process")||ut(Ne,"bpmn:SubProcess"))D(Ne,m);else if(ut(Ne,"bpmn:Collaboration"))bt(Ne,m),K(q.rootElements,m);else throw new Error(t("unsupported bpmnElement for {plane}: {rootElement}",{plane:at(Ae),rootElement:at(Ne)}));ee(i)};var ee=this.handleDeferred=function(){for(var q;i.length;)q=i.shift(),q()};function D(P,q){pt(P,q),M(P.ioSpecification,q),L(P.artifacts,q),s(P)}function K(P,q){var ie=Dn(P,function(Te){return!u(Te)&&ut(Te,"bpmn:Process")&&Te.laneSets});ie.forEach(a(D,q))}function B(P,q){v(P,q)}function C(P,q){ae(P,a(B,q))}function A(P,q){v(P,q)}function N(P,q){v(P,q)}function g(P,q){v(P,q)}function R(P,q){v(P,q)}function L(P,q){ae(P,function(ie){ut(ie,"bpmn:Association")?i.push(function(){R(ie,q)}):R(ie,q)})}function M(P,q){P&&(ae(P.dataInputs,a(N,q)),ae(P.dataOutputs,a(g,q)))}var H=this.handleSubProcess=function(q,ie){pt(q,ie),L(q.artifacts,ie)};function G(P,q){var ie=v(P,q);ut(P,"bpmn:SubProcess")&&H(P,ie||q),ut(P,"bpmn:Activity")&&M(P.ioSpecification,q),i.push(function(){ae(P.dataInputAssociations,a(A,q)),ae(P.dataOutputAssociations,a(A,q))})}function te(P,q){v(P,q)}function ue(P,q){v(P,q)}function fe(P,q){i.push(function(){var ie=v(P,q);P.childLaneSet&&re(P.childLaneSet,ie||q),ot(P)})}function re(P,q){ae(P.lanes,a(fe,q))}function ye(P,q){ae(P,a(re,q))}function pt(P,q){it(P.flowElements,q),P.laneSets&&ye(P.laneSets,q)}function it(P,q){ae(P,function(ie){ut(ie,"bpmn:SequenceFlow")?i.push(function(){te(ie,q)}):ut(ie,"bpmn:BoundaryEvent")?i.unshift(function(){G(ie,q)}):ut(ie,"bpmn:FlowNode")?G(ie,q):ut(ie,"bpmn:DataObject")||(ut(ie,"bpmn:DataStoreReference")||ut(ie,"bpmn:DataObjectReference")?ue(ie,q):x(t("unrecognized flowElement {element} in context {context}",{element:at(ie),context:q?at(q.businessObject):"null"}),{element:ie,context:q}))})}function Oe(P,q){var ie=v(P,q),Te=P.processRef;Te&&D(Te,ie||q)}function bt(P,q){ae(P.participants,a(Oe,q)),L(P.artifacts,q),i.push(function(){C(P.messageFlows,q)})}function ot(P){ae(P.flowNodeRef,function(q){var ie=q.get("lanes");ie&&ie.push(P)})}}function Sf(e,t,n){var i,r,a,s,u,c=[];function b(v,x){var f={root:function(ee,D){return i.add(ee,D)},element:function(ee,D,K){return i.add(ee,D,K)},error:function(ee,D){c.push({message:ee,context:D})}},U=new kf(f,a);x=x||v.diagrams&&v.diagrams[0];var X=Af(v,x);if(!X)throw new Error(a("no diagram to display"));ae(X,function(ee){U.handleDefinitions(v,ee)});var J=x.plane.bpmnElement.id;s.setRootElement(s.findRoot(J+"_plane")||s.findRoot(J))}return new Promise(function(v,x){try{return i=e.get("bpmnImporter"),r=e.get("eventBus"),a=e.get("translate"),s=e.get("canvas"),r.fire("import.render.start",{definitions:t}),b(t,n),r.fire("import.render.complete",{error:u,warnings:c}),v({warnings:c})}catch(f){return f.warnings=c,x(f)}})}function Af(e,t){if(t){var n=t.plane.bpmnElement,i=n;!ce(n,"bpmn:Process")&&!ce(n,"bpmn:Collaboration")&&(i=Tf(n));var r;ce(i,"bpmn:Collaboration")?r=i:r=Pt(e.rootElements,function(b){if(ce(b,"bpmn:Collaboration"))return Pt(b.participants,function(v){return v.processRef===i})});var a=[i];r&&(a=Jl(r.participants,function(b){return b.processRef}),a.push(r));var s=es(a),u=[t],c=[n];return ae(e.diagrams,function(b){var v=b.plane.bpmnElement;s.indexOf(v)!==-1&&c.indexOf(v)===-1&&(u.push(b),c.push(v))}),u}}function es(e){var t=[];return ae(e,function(n){n&&(t.push(n),t=t.concat(es(n.flowElements)))}),t}function Tf(e){for(var t=e;t;){if(ce(t,"bpmn:Process"))return t;t=t.$parent}}var Cf='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 14.02 5.57" width="53" height="21"><path fill="currentColor" d="M1.88.92v.14c0 .41-.13.68-.4.8.33.14.46.44.46.86v.33c0 .61-.33.95-.95.95H0V0h.95c.65 0 .93.3.93.92zM.63.57v1.06h.24c.24 0 .38-.1.38-.43V.98c0-.28-.1-.4-.32-.4zm0 1.63v1.22h.36c.2 0 .32-.1.32-.39v-.35c0-.37-.12-.48-.4-.48H.63zM4.18.99v.52c0 .64-.31.98-.94.98h-.3V4h-.62V0h.92c.63 0 .94.35.94.99zM2.94.57v1.35h.3c.2 0 .3-.09.3-.37v-.6c0-.29-.1-.38-.3-.38h-.3zm2.89 2.27L6.25 0h.88v4h-.6V1.12L6.1 3.99h-.6l-.46-2.82v2.82h-.55V0h.87zM8.14 1.1V4h-.56V0h.79L9 2.4V0h.56v4h-.64zm2.49 2.29v.6h-.6v-.6zM12.12 1c0-.63.33-1 .95-1 .61 0 .95.37.95 1v2.04c0 .64-.34 1-.95 1-.62 0-.95-.37-.95-1zm.62 2.08c0 .28.13.39.33.39s.32-.1.32-.4V.98c0-.29-.12-.4-.32-.4s-.33.11-.33.4z"/><path fill="currentColor" d="M0 4.53h14.02v1.04H0zM11.08 0h.63v.62h-.63zm.63 4V1h-.63v2.98z"/></svg>',ts=Cf,ns={verticalAlign:"middle"},is={color:"#404040"},Rf={zIndex:"1001",position:"fixed",top:"0",left:"0",right:"0",bottom:"0"},Df={width:"100%",height:"100%",background:"rgba(40,40,40,0.2)"},If={position:"absolute",left:"50%",top:"40%",transform:"translate(-50%)",width:"260px",padding:"10px",background:"white",boxShadow:"0 1px 4px rgba(0,0,0,0.3)",fontFamily:"Helvetica, Arial, sans-serif",fontSize:"14px",display:"flex",lineHeight:"1.3"},Nf='<div class="bjs-powered-by-lightbox"><div class="backdrop"></div><div class="notice"><a href="https://bpmn.io" target="_blank" rel="noopener" class="link">'+ts+'</a><span>Web-based tooling for BPMN, DMN and forms powered by <a href="https://bpmn.io" target="_blank" rel="noopener">bpmn.io</a>.</span></div></div>',Ot;function Mf(){Ot=jt(Nf),vt(Ot,Rf),vt(It("svg",Ot),ns),vt(It(".backdrop",Ot),Df),vt(It(".notice",Ot),If),vt(It(".link",Ot),is,{margin:"15px 20px 15px 10px",alignSelf:"center"})}function Pf(){Ot||(Mf(),sr.bind(Ot,".backdrop","click",function(e){document.body.removeChild(Ot)})),document.body.appendChild(Ot)}function Ye(e){e=me({},Vf,e),this._moddle=this._createModdle(e),this._container=this._createContainer(e),Bf(this._container),this._init(this._container,this._moddle,e)}zt(Ye,un);Ye.prototype.importXML=async function(t,n){const i=this;function r(s){return i.get("eventBus").createEvent(s)}let a=[];try{t=this._emit("import.parse.start",{xml:t})||t;let s;try{s=await this._moddle.fromXML(t,"bpmn:Definitions")}catch(f){throw this._emit("import.parse.complete",{error:f}),f}let u=s.rootElement;const c=s.references,b=s.warnings,v=s.elementsById;a=a.concat(b),u=this._emit("import.parse.complete",r({error:null,definitions:u,elementsById:v,references:c,warnings:a}))||u;const x=await this.importDefinitions(u,n);return a=a.concat(x.warnings),this._emit("import.done",{error:null,warnings:a}),{warnings:a}}catch(s){let u=s;throw a=a.concat(u.warnings||[]),ki(u,a),u=$f(u),this._emit("import.done",{error:u,warnings:u.warnings}),u}};Ye.prototype.importDefinitions=async function(t,n){return this._setDefinitions(t),{warnings:(await this.open(n)).warnings}};Ye.prototype.open=async function(t){const n=this._definitions;let i=t;if(!n){const a=new Error("no XML imported");throw ki(a,[]),a}if(typeof t=="string"&&(i=Lf(n,t),!i)){const a=new Error("BPMNDiagram <"+t+"> not found");throw ki(a,[]),a}try{this.clear()}catch(a){throw ki(a,[]),a}const{warnings:r}=await Sf(this,n,i);return{warnings:r}};Ye.prototype.saveXML=async function(t){t=t||{};let n=this._definitions,i,r;try{if(!n)throw new Error("no definitions loaded");n=this._emit("saveXML.start",{definitions:n})||n,r=(await this._moddle.toXML(n,t)).xml,r=this._emit("saveXML.serialized",{xml:r})||r}catch(s){i=s}const a=i?{error:i}:{xml:r};if(this._emit("saveXML.done",a),i)throw i;return a};Ye.prototype.saveSVG=async function(){this._emit("saveSVG.start");let t,n;try{const i=this.get("canvas"),r=i.getActiveLayer(),a=It("defs",i._svg),s=ia(r),u=a?"<defs>"+ia(a)+"</defs>":"",c=r.getBBox();t='<?xml version="1.0" encoding="utf-8"?>\n<!-- created with bpmn-js / http://bpmn.io -->\n<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">\n<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="'+c.width+'" height="'+c.height+'" viewBox="'+c.x+" "+c.y+" "+c.width+" "+c.height+'" version="1.1">'+u+s+"</svg>"}catch(i){n=i}if(this._emit("saveSVG.done",{error:n,svg:t}),n)throw n;return{svg:t}};Ye.prototype._setDefinitions=function(e){this._definitions=e};Ye.prototype.getModules=function(){return this._modules};Ye.prototype.clear=function(){this.getDefinitions()&&un.prototype.clear.call(this)};Ye.prototype.destroy=function(){un.prototype.destroy.call(this),Di(this._container)};Ye.prototype.on=function(e,t,n,i){return this.get("eventBus").on(e,t,n,i)};Ye.prototype.off=function(e,t){this.get("eventBus").off(e,t)};Ye.prototype.attachTo=function(e){if(!e)throw new Error("parentNode required");this.detach(),e.get&&e.constructor.prototype.jquery&&(e=e.get(0)),typeof e=="string"&&(e=It(e)),e.appendChild(this._container),this._emit("attach",{}),this.get("canvas").resized()};Ye.prototype.getDefinitions=function(){return this._definitions};Ye.prototype.detach=function(){const e=this._container,t=e.parentNode;t&&(this._emit("detach",{}),t.removeChild(e))};Ye.prototype._init=function(e,t,n){const i=n.modules||this.getModules(n),r=n.additionalModules||[],a=[{bpmnjs:["value",this],moddle:["value",t]}],s=[].concat(a,i,r),u=me(au(n,["additionalModules"]),{canvas:me({},n.canvas,{container:e}),modules:s});un.call(this,u),n&&n.container&&this.attachTo(n.container)};Ye.prototype._emit=function(e,t){return this.get("eventBus").fire(e,t)};Ye.prototype._createContainer=function(e){const t=jt('<div class="bjs-container"></div>');return vt(t,{width:ba(e.width),height:ba(e.height),position:e.position}),t};Ye.prototype._createModdle=function(e){const t=me({},this._moddleExtensions,e.moddleExtensions);return new _f(t)};Ye.prototype._modules=[];function ki(e,t){return e.warnings=t,e}function $f(e){const n=/unparsable content <([^>]+)> detected([\s\S]*)$/.exec(e.message);return n&&(e.message="unparsable content <"+n[1]+"> detected; this may indicate an invalid BPMN 2.0 diagram file"+n[2]),e}const Vf={width:"100%",height:"100%",position:"relative"};function ba(e){return e+(tn(e)?"px":"")}function Lf(e,t){return t&&Pt(e.diagrams,function(n){return n.id===t})||null}function Bf(e){const n='<a href="http://bpmn.io" target="_blank" class="bjs-powered-by" title="Powered by bpmn.io" >'+ts+"</a>",i=jt(n);vt(It("svg",i),ns),vt(i,is,{position:"absolute",bottom:"15px",right:"15px",zIndex:"100"}),e.appendChild(i),wr.bind(i,"click",function(r){Pf(),r.preventDefault()})}function Fi(e){Ye.call(this,e)}zt(Fi,Ye);Fi.prototype._modules=[jc,po,Jc,Eo,gd];Fi.prototype._moddleExtensions={};function Of(e,t,n){return'<?xml version="1.0" encoding="UTF-8"?>\n  <definitions xmlns="http://www.omg.org/spec/BPMN/20100524/MODEL"\n               xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema"\n               xmlns:flowable="http://flowable.org/bpmn" xmlns:bpmndi="http://www.omg.org/spec/BPMN/20100524/DI"\n               xmlns:omgdc="http://www.omg.org/spec/DD/20100524/DC" xmlns:omgdi="http://www.omg.org/spec/DD/20100524/DI"\n               typeLanguage="http://www.w3.org/2001/XMLSchema" expressionLanguage="http://www.w3.org/1999/XPath"\n               targetNamespace="'.concat(n,'">\n    <process id="').concat(e,'" name="').concat(t,'" isExecutable="true"></process>\n    <bpmndi:BPMNDiagram id="BPMNDiagram_1">\n      <bpmndi:BPMNPlane id="BPMNPlane_1" bpmnElement="').concat(e,'">\n      </bpmndi:BPMNPlane>\n    </bpmndi:BPMNDiagram>\n  </definitions>')}const Uf={class:"w-full m-1 border-collapse table-auto"},Ff={class:"p-2 font-bold border-b text-secondary"},qf={class:"p-2 font-bold border-b text-secondary"},jf={class:"p-2 font-bold border-b text-secondary"},zf={class:"p-2 font-bold border-b text-secondary"},Wf={class:"p-2 font-bold border-b text-secondary"},Hf={class:"p-2 font-bold border-b text-secondary"},Yf={class:"p-2 font-bold border-b text-secondary"},Kf={class:"p-2 font-bold border-b text-secondary"},Gf={class:"hover:bg-gray-50"},Qf=["rowspan"],Xf=["rowspan"],Zf=["rowspan"],Jf=["rowspan"],em={class:"p-2 border-b"},tm={class:"p-2 border-b"},nm={class:"p-2 border-b"},im={class:"p-2 border-b"},rm={key:0,class:"hover:bg-gray-50"},am={class:"p-2 border-b"},om={class:"p-2 border-b"},sm={class:"p-2 border-b"},lm={class:"p-2 border-b"},um={class:"mt-4 text-lg"},cm=$t({__name:"ProcessTaskList",props:mn({modelValue:{type:Boolean,required:!0},instanceId:{type:String,default:null}},{modelValue:{type:Boolean},modelModifiers:{}}),emits:["update:modelValue"],setup(e){const t=Pn(e,"modelValue"),n=e,{instanceId:i}=Zn(n);yt.extend(fl),yt.extend(Kl);const r=z([]),a=z([]),s=z(!1),u=z();let c;const b=async()=>{s.value=!0;try{if(!(i!=null&&i.value))return;const{xml:v,activities:x,tasks:f,processes:U}=await ml(i.value);r.value=f!=null?f:[],a.value=U!=null?U:[],c||(c=us(new Fi({container:u.value,height:200}))),await c.importXML(v!=null?v:Of("none","none","none"));const X=c.get("canvas");X.zoom("fit-viewport"),x==null||x.forEach(({activityId:J,endTime:ee,deleteReason:D})=>{let K="highlight-curr";D&&(D.includes(":reject")||D.includes(":cancel"))?K="highlight-reject":ee&&(K="highlight"),X.addMarker(J,K)})}finally{s.value=!1}};return Nt(t,()=>{t.value?b():c.clear()}),(v,x)=>{const f=j("el-tag"),U=j("el-table-column"),X=j("el-table"),J=j("el-dialog"),ee=Ea("loading");return S(),V(J,{modelValue:t.value,"onUpdate:modelValue":x[0]||(x[0]=D=>t.value=D),title:v.$t("processInstance.op.task"),width:"98%",top:"5vh"},{default:d(()=>[de("div",{ref_key:"bpmnContainer",ref:u,class:"w-full"},null,512),Si((S(),Se("table",Uf,[de("thead",null,[de("tr",null,[de("td",Ff,I(v.$t("processModel.name")),1),de("td",qf,I(v.$t("processTask.assignee")),1),de("td",jf,I(v.$t("processTask.created")),1),de("td",zf,I(v.$t("processTask.duration")),1),de("td",Wf,I(v.$t("processTask.time")),1),de("td",Hf,I(v.$t("processTask.user")),1),de("td",Yf,I(v.$t("processTask.type")),1),de("td",Kf,I(v.$t("processTask.opinion")),1)])]),de("tbody",null,[(S(!0),Se(Ue,null,Ze(r.value,D=>{var K,B,C,A;return S(),Se(Ue,{key:D.id},[de("tr",Gf,[de("td",{class:"p-2 border-b",rowspan:D.commentList.length>0?D.commentList.length:1},I(D.name),9,Qf),de("td",{class:"p-2 border-b",rowspan:D.commentList.length>0?D.commentList.length:1},I(D.assigneeName),9,Xf),de("td",{class:"p-2 border-b",rowspan:D.commentList.length>0?D.commentList.length:1},I(D.created?T(yt)(D.created).format("YYYY-MM-DD HH:mm"):void 0),9,Zf),de("td",{class:"p-2 border-b",rowspan:D.commentList.length>0?D.commentList.length:1},I(D.duration?T(yt).duration(D.duration).locale("zh-cn").humanize():void 0),9,Jf),de("td",em,I(D.commentList[0]?T(yt)(D.commentList[0].time).format("YYYY-MM-DD HH:mm"):void 0),1),de("td",tm,I((K=D.commentList[0])==null?void 0:K.userName),1),de("td",nm,[((B=D.commentList[0])==null?void 0:B.type)==="pass"?(S(),V(f,{key:0,type:"success",size:"small"},{default:d(()=>[O(I(v.$t("processTask.type.".concat(D.commentList[0].type))),1)]),_:2},1024)):((C=D.commentList[0])==null?void 0:C.type)==="reject"?(S(),V(f,{key:1,type:"danger",size:"small"},{default:d(()=>[O(I(v.$t("processTask.type.".concat(D.commentList[0].type))),1)]),_:2},1024)):D.commentList[0]?(S(),V(f,{key:2,size:"small"},{default:d(()=>[O(I(v.$t("processTask.type.".concat(D.commentList[0].type))),1)]),_:2},1024)):ne("",!0)]),de("td",im,I((A=D.commentList[0])==null?void 0:A.fullMessage),1)]),(S(!0),Se(Ue,null,Ze(D.commentList,(N,g)=>(S(),Se(Ue,{key:N.id},[g>0?(S(),Se("tr",rm,[de("td",am,I(T(yt)(N.time).format("YYYY-MM-DD HH:mm")),1),de("td",om,I(N.userName),1),de("td",sm,[N.type==="pass"?(S(),V(f,{key:0,type:"success",size:"small"},{default:d(()=>[O(I(v.$t("processTask.type.".concat(N.type))),1)]),_:2},1024)):N.type==="reject"?(S(),V(f,{key:1,type:"danger",size:"small"},{default:d(()=>[O(I(v.$t("processTask.type.".concat(N.type))),1)]),_:2},1024)):(S(),V(f,{key:2,size:"small"},{default:d(()=>[O(I(v.$t("processTask.type.".concat(N.type))),1)]),_:2},1024))]),de("td",lm,I(N.fullMessage),1)])):ne("",!0)],64))),128))],64)}),128))])])),[[ee,s.value]]),de("p",um,I(v.$t("processInstance.history")),1),Si((S(),V(X,{data:a.value,class:"mt-1"},{default:d(()=>[p(U,{prop:"assignee",label:v.$t("processInstance.assignee")},null,8,["label"]),p(U,{prop:"status",label:v.$t("processInstance.status")},{default:d(({row:D})=>[D.status==="complete"?(S(),V(f,{key:0,type:"success",size:"small"},{default:d(()=>[O(I(v.$t("processInstance.status.".concat(D.status))),1)]),_:2},1024)):D.status==="reject"?(S(),V(f,{key:1,type:"danger",size:"small"},{default:d(()=>[O(I(v.$t("processInstance.status.".concat(D.status))),1)]),_:2},1024)):D.status==="cancel"?(S(),V(f,{key:2,type:"info",size:"small"},{default:d(()=>[O(I(v.$t("processInstance.status.".concat(D.status))),1)]),_:2},1024)):(S(),V(f,{key:3,type:"warning",size:"small"},{default:d(()=>[O(I(v.$t("processInstance.status.".concat(D.status))),1)]),_:2},1024))]),_:1},8,["label"]),p(U,{prop:"opinion",label:v.$t("processInstance.opinion")},null,8,["label"]),p(U,{property:"started",label:v.$t("processInstance.started")},{default:d(({row:D})=>[O(I(T(yt)(D.started).format("YYYY-MM-DD HH:mm")),1)]),_:1},8,["label"]),p(U,{property:"ended",label:v.$t("processInstance.ended")},{default:d(({row:D})=>[O(I(D.ended?T(yt)(D.ended).format("YYYY-MM-DD HH:mm"):void 0),1)]),_:1},8,["label"])]),_:1},8,["data"])),[[ee,s.value]])]),_:1},8,["modelValue","title"])}}}),dm=Ni(cm,[["__scopeId","data-v-f9850bbd"]]),pm={class:"el-upload-list__item is-success"},fm=["src"],mm={key:0,class:"ml-2"},hm={key:1,class:"el-upload--picture-card"},ym=["src"],_a=300,wa=300,vm=$t({__name:"ImageListUpload",props:{modelValue:{type:Array,default:()=>[]},fileAccept:{type:String,default:null},fileMaxSize:{type:Number,default:null},maxWidth:{type:Number,default:null},maxHeight:{type:Number,default:null},listType:{type:String,default:"pictureCard"},disabled:{type:Boolean,default:!1}},emits:{"update:modelValue":null},setup(e,{emit:t}){const n=e,i=t,{modelValue:r,maxWidth:a,maxHeight:s,fileAccept:u,fileMaxSize:c}=Zn(n),{t:b}=Jn(),v=fr(),x=z(!1),f=z({}),U=z({}),X=z(!1),J=z(!1),ee=z({src:"data:;base64,="}),D=ct({get:()=>r.value,set:L=>i("update:modelValue",L)}),{formItem:K}=ka();Nt(D,()=>{var L;(L=K==null?void 0:K.validate)==null||L.call(K,"change").catch(M=>{})},{deep:!0});const B=L=>{ee.value=L,X.value=!0},C=()=>{const L={isWatermark:!0,thumbnailWidth:_a,thumbnailHeight:wa};return(a==null?void 0:a.value)!=null&&(L.maxWidth=a.value),(s==null?void 0:s.value)!=null&&(L.maxHeight=s.value),L},A=ct(()=>{var L;return(L=u==null?void 0:u.value)!=null?L:v.upload.imageInputAccept}),N=ct(()=>{var L;return(L=c==null?void 0:c.value)!=null?L:v.upload.imageLimitByte}),g=L=>N.value>0&&L.size>N.value?(Ut.error(b("error.fileMaxSize",{size:"".concat(N.value/1024/1024," MB")})),!1):!0,R=L=>{Da(JSON.parse(L.message))};return(L,M)=>{const H=j("el-icon"),G=j("el-input"),te=j("el-progress"),ue=j("el-upload"),fe=j("el-dialog");return S(),Se("div",null,[p(T(Cl),{list:D.value,tag:"ul","item-key":"url",animation:250,class:Yn(["el-upload-list",[e.listType==="picture"?"el-upload-list--picture":"el-upload-list--picture-card",{"is-disabled":e.disabled}]]),onStart:M[1]||(M[1]=()=>x.value=!0),onEnd:M[2]||(M[2]=()=>x.value=!1)},{item:d(({element:re})=>[de("li",pm,[de("div",{class:Yn([e.listType==="picture"?["w-32","h-32"]:["w-full","h-full"],"relative flex items-center justify-center bg-gray-50"])},[de("img",{class:"block max-w-full max-h-full",src:re.url,alt:""},null,8,fm),de("div",{class:Yn(["absolute space-x-4 bg-black bg-opacity-50 rounded-md opacity-0 cursor-move full-flex-center",x.value?void 0:"hover:opacity-100"]),onClick:M[0]||(M[0]=Rn(()=>{},["stop"]))},[p(H,{class:"image-action",title:L.$t("cropImage"),onClick:()=>(J.value=!0,U.value=re)},{default:d(()=>[p(T(cs))]),_:2},1032,["title","onClick"]),p(H,{class:"image-action",title:L.$t("previewImage"),onClick:()=>B(re)},{default:d(()=>[p(T(Sa))]),_:2},1032,["title","onClick"]),p(H,{class:"image-action",title:L.$t("deleteImage"),onClick:()=>D.value.splice(D.value.indexOf(re),1)},{default:d(()=>[p(T(Aa))]),_:2},1032,["title","onClick"])],2)],2),e.listType==="picture"?(S(),Se("div",mm,[p(G,{modelValue:re.url,"onUpdate:modelValue":ye=>re.url=ye,placeholder:"URL",maxlength:"255"},{prepend:d(()=>[O("URL")]),_:2},1032,["modelValue","onUpdate:modelValue"]),p(G,{modelValue:re.name,"onUpdate:modelValue":ye=>re.name=ye,placeholder:L.$t("article.imageList.name"),class:"mt-1"},{prepend:d(()=>[O(I(L.$t("article.imageList.name")),1)]),_:2},1032,["modelValue","onUpdate:modelValue","placeholder"]),p(G,{modelValue:re.description,"onUpdate:modelValue":ye=>re.description=ye,type:"textarea",rows:2,placeholder:L.$t("article.imageList.description"),class:"mt-1"},null,8,["modelValue","onUpdate:modelValue","placeholder"])])):ne("",!0)])]),footer:d(()=>[p(ue,{action:T(Fs),headers:{...T(Ta)(),...T(Ca)()},data:C(),accept:A.value,"before-upload":g,"on-success":(re,ye)=>D.value.push({name:re.name,url:re.url}),"on-progress":(re,ye)=>f.value=ye,"on-error":R,"show-file-list":!1,disabled:e.disabled,multiple:"",drag:""},{default:d(()=>[f.value.status==="uploading"?(S(),V(te,{key:0,type:"circle",percentage:parseInt(f.value.percentage,10)},null,8,["percentage"])):(S(),Se("div",hm,[p(H,null,{default:d(()=>[p(T(Ra))]),_:1})]))]),_:1},8,["action","headers","data","accept","on-success","on-progress","disabled"])]),_:1},8,["list","class"]),de("div",null,[p(fe,{modelValue:X.value,"onUpdate:modelValue":M[6]||(M[6]=re=>X.value=re),top:"5vh",width:768},{default:d(()=>[p(G,{modelValue:ee.value.url,"onUpdate:modelValue":M[3]||(M[3]=re=>ee.value.url=re),maxlength:"255"},{prepend:d(()=>[O("URL")]),_:1},8,["modelValue"]),e.listType!=="picture"?(S(),V(G,{key:0,modelValue:ee.value.name,"onUpdate:modelValue":M[4]||(M[4]=re=>ee.value.name=re),placeholder:L.$t("article.imageList.name"),class:"mt-1"},{prepend:d(()=>[O(I(L.$t("article.imageList.name")),1)]),_:1},8,["modelValue","placeholder"])):ne("",!0),e.listType!=="picture"?(S(),V(G,{key:1,modelValue:ee.value.description,"onUpdate:modelValue":M[5]||(M[5]=re=>ee.value.description=re),type:"textarea",rows:2,placeholder:L.$t("article.imageList.description"),class:"mt-1"},null,8,["modelValue","placeholder"])):ne("",!0),de("img",{src:ee.value.url,alt:"",class:"mt-1 border border-gray-300"},null,8,ym)]),_:1},8,["modelValue"])]),p(Al,{modelValue:J.value,"onUpdate:modelValue":M[7]||(M[7]=re=>J.value=re),src:U.value.url,"thumbnail-width":_a,"thumbnail-height":wa,onSuccess:M[8]||(M[8]=re=>U.value.url=re)},null,8,["modelValue","src"])])}}}),gm=Ni(vm,[["__scopeId","data-v-ebaf49e7"]]),bm={class:"w-full"},_m=["onClick"],wm={class:"el-upload-list__item-status-label"},xm=$t({__name:"FileListUpload",props:{modelValue:{type:Array,default:()=>[]},fileAccept:{type:String,default:null},fileMaxSize:{type:Number,default:null},disabled:{type:Boolean,default:!1}},emits:{"update:modelValue":null},setup(e,{emit:t}){const n=e,i=t,{fileAccept:r,fileMaxSize:a,modelValue:s}=Zn(n),{t:u}=Jn(),c=fr(),b=z({}),v=ct({get:()=>s.value,set:A=>i("update:modelValue",A)}),{formItem:x}=ka();Nt(v,()=>{var A;(A=x==null?void 0:x.validate)==null||A.call(x,"change").catch(N=>{})},{deep:!0});const f=z(!1),U=z({}),X=z(),J=A=>{U.value=A,f.value=!0},ee=()=>{X.value.validate(async A=>{A&&(f.value=!1)})},D=ct(()=>{var A;return(A=r==null?void 0:r.value)!=null?A:c.upload.fileInputAccept}),K=ct(()=>{var A;return(A=a==null?void 0:a.value)!=null?A:c.upload.fileLimitByte}),B=A=>K.value>0&&A.size>K.value?(Ut.error(u("error.fileMaxSize",{size:"".concat(K.value/1024/1024," MB")})),!1):!0,C=A=>{Da(JSON.parse(A.message))};return(A,N)=>{const g=j("el-upload"),R=j("el-progress"),L=j("el-icon"),M=j("el-input"),H=j("el-form-item"),G=j("el-button"),te=j("el-form"),ue=j("el-dialog");return S(),Se("div",bm,[p(g,{action:T(qs),headers:{...T(Ta)(),...T(Ca)()},accept:D.value,"before-upload":B,"on-success":fe=>v.value.push({name:fe.name,url:fe.url,length:fe.size}),"on-progress":(fe,re)=>b.value=re,"on-error":C,"show-file-list":!1,disabled:e.disabled,multiple:"",drag:""},{default:d(()=>[O(I(A.$t("clickOrDragToUpload")),1)]),_:1},8,["action","headers","accept","on-success","on-progress","disabled"]),b.value.status==="uploading"?(S(),V(R,{key:0,percentage:parseInt(b.value.percentage,10)},null,8,["percentage"])):ne("",!0),p(ds,{tag:"ul",class:Yn(["el-upload-list","el-upload-list--text",{"is-disabled":e.disabled}]),name:"el-list"},{default:d(()=>[(S(!0),Se(Ue,null,Ze(v.value,fe=>(S(),Se("li",{key:fe.url,class:"el-upload-list__item is-success"},[de("a",{class:"el-upload-list__item-name",onClick:()=>J(fe)},[p(L,{class:"el-icon--document"},{default:d(()=>[p(T(ps))]),_:1}),O(I(fe.name),1)],8,_m),de("label",wm,[p(L,{class:"el-icon--upload-success el-icon--circle-check"},{default:d(()=>[p(T(Ia))]),_:1})]),e.disabled?ne("",!0):(S(),V(L,{key:0,class:"el-icon--close",onClick:()=>v.value.splice(v.value.indexOf(fe),1)},{default:d(()=>[p(T(fs))]),_:2},1032,["onClick"]))]))),128))]),_:1},8,["class"]),p(ue,{modelValue:f.value,"onUpdate:modelValue":N[4]||(N[4]=fe=>f.value=fe),title:A.$t("article.fileList.attribute"),top:"5vh",width:768,"append-to-body":""},{default:d(()=>[p(te,{ref_key:"form",ref:X,model:U.value,"label-width":"150px"},{default:d(()=>[p(H,{prop:"name",label:A.$t("name"),rules:{required:!0,message:()=>A.$t("v.required")}},{default:d(()=>[p(M,{modelValue:U.value.name,"onUpdate:modelValue":N[0]||(N[0]=fe=>U.value.name=fe),maxlength:"100"},null,8,["modelValue"])]),_:1},8,["label","rules"]),p(H,{prop:"length",label:A.$t("size"),rules:{required:!0,message:()=>A.$t("v.required")}},{default:d(()=>[p(M,{modelValue:U.value.length,"onUpdate:modelValue":N[1]||(N[1]=fe=>U.value.length=fe),maxlength:"19"},{append:d(()=>[O("Byte")]),_:1},8,["modelValue"])]),_:1},8,["label","rules"]),p(H,{prop:"url",label:"URL",rules:{required:!0,message:()=>A.$t("v.required")}},{default:d(()=>[p(M,{modelValue:U.value.url,"onUpdate:modelValue":N[2]||(N[2]=fe=>U.value.url=fe),maxlength:"255"},null,8,["modelValue"])]),_:1},8,["rules"]),p(G,{type:"primary","native-type":"submit",onClick:N[3]||(N[3]=Rn(()=>ee(),["prevent"]))},{default:d(()=>[O(I(A.$t("save")),1)]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue","title"])])}}}),Em=Ni(xm,[["__scopeId","data-v-8f839ee5"]]),rs=(e,t,n)=>{if(e===0||e===1)window.open(t);else{n=n+"?preview=true";const i=n.lastIndexOf("/",n.lastIndexOf("/")-1),r="".concat(n.substring(0,i),"/auth/jwt/login?code=").concat(ms(),"&redirectUri=").concat(encodeURIComponent(n));window.open(r)}},km={class:"flex justify-end mt-2"},Sm=$t({__name:"ReviewFormProperties",props:mn({formProperties:{}},{modelValue:{type:Boolean},modelModifiers:{}}),emits:mn(["finished"],["update:modelValue"]),setup(e,{emit:t}){const n=Pn(e,"modelValue"),i=e,r=t,a=z(),s=()=>{n.value=!1;const u=i.formProperties.reduce((c,{id:b,value:v})=>({...c,[b]:v}),{});r("finished",{properties:u,comment:a.value})};return Nt(n,()=>{n.value&&(a.value=void 0)}),(u,c)=>{const b=j("el-input"),v=j("el-switch"),x=j("el-option"),f=j("el-select"),U=j("el-form-item"),X=j("el-button"),J=j("el-form"),ee=j("el-dialog");return S(),V(ee,{modelValue:n.value,"onUpdate:modelValue":c[1]||(c[1]=D=>n.value=D),title:u.$t("flowable.pass"),width:"800","append-to-body":""},{default:d(()=>[p(J,{"label-width":"120px"},{default:d(()=>[(S(!0),Se(Ue,null,Ze(u.formProperties,D=>(S(),V(U,{key:D.id},{label:d(()=>[p(nt,{label:D.name},null,8,["label"])]),default:d(()=>[D.type.name==="string"?(S(),V(b,{key:0,modelValue:D.value,"onUpdate:modelValue":K=>D.value=K},null,8,["modelValue","onUpdate:modelValue"])):ne("",!0),D.type.name==="long"?(S(),V(b,{key:1,modelValue:D.value,"onUpdate:modelValue":K=>D.value=K},null,8,["modelValue","onUpdate:modelValue"])):ne("",!0),D.type.name==="boolean"?(S(),V(v,{key:2,modelValue:D.value,"onUpdate:modelValue":K=>D.value=K},null,8,["modelValue","onUpdate:modelValue"])):ne("",!0),D.type.name==="enum"?(S(),V(f,{key:3,modelValue:D.value,"onUpdate:modelValue":K=>D.value=K},{default:d(()=>[(S(!0),Se(Ue,null,Ze(D.type.values,K=>(S(),V(x,{key:K.id,label:K.name,value:K.value},null,8,["label","value"]))),128))]),_:2},1032,["modelValue","onUpdate:modelValue"])):ne("",!0)]),_:2},1024))),128)),p(U,null,{label:d(()=>[p(nt,{message:"flowable.opinion"})]),default:d(()=>[p(b,{modelValue:a.value,"onUpdate:modelValue":c[0]||(c[0]=D=>a.value=D)},null,8,["modelValue"])]),_:1}),de("div",km,[p(X,{type:"primary","native-type":"submit",onClick:Rn(s,["prevent"])},{default:d(()=>[O(I(u.$t("ok")),1)]),_:1})])]),_:1})]),_:1},8,["modelValue","title"])}}}),as=$t({__name:"UserSelect",props:{modelValue:{},modelModifiers:{}},emits:["update:modelValue"],setup(e){const t=Pn(e,"modelValue"),n=z({}),i=z(),r=z(!1),a=z(1),s=z(10),u=z(0),c=z([]),b=async()=>{r.value=!0;try{const{content:f,totalElements:U}=await wl({Q_Contains_1_username:i.value,Q_Contains_1_realName:i.value,current:!0,page:a.value,pageSize:s.value});c.value=f,u.value=Number(U)}finally{r.value=!1}};Na(async()=>{t.value!=null&&(n.value=await _l(t.value))});const v=async f=>{i.value=f,b()},x=f=>{t.value=f};return(f,U)=>{const X=j("el-option"),J=j("el-pagination"),ee=j("el-select");return S(),V(ee,{modelValue:n.value,"onUpdate:modelValue":U[4]||(U[4]=D=>n.value=D),filterable:"",remote:"","default-first-option":"","remote-method":v,loading:r.value,onChange:x},{footer:d(()=>[p(J,{"current-page":a.value,"onUpdate:currentPage":U[0]||(U[0]=D=>a.value=D),pageSize:s.value,"onUpdate:pageSize":U[1]||(U[1]=D=>s.value=D),total:u.value,layout:"total, prev, pager, next",small:"",class:"px-3 py-2",onSizeChange:U[2]||(U[2]=()=>b()),onCurrentChange:U[3]||(U[3]=()=>b())},null,8,["current-page","pageSize","total"])]),default:d(()=>[(S(!0),Se(Ue,null,Ze(c.value,D=>(S(),V(X,{key:D.id,label:"".concat(D.username).concat(D.realName?"(".concat(D.realName,")"):""," - [").concat(D.org.name,"]"),value:D.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue","loading"])}}}),Am={class:"flex justify-end mt-2"},Tm=$t({__name:"ReviewDelegate",props:{modelValue:{type:Boolean},modelModifiers:{}},emits:mn(["finished"],["update:modelValue"]),setup(e,{emit:t}){const n=Pn(e,"modelValue"),i=t,r=z(),a=z({}),s=()=>{r.value.validate(async u=>{u&&(n.value=!1,i("finished",a.value))})};return Nt(n,()=>{n.value&&(a.value={})}),(u,c)=>{const b=j("el-form-item"),v=j("el-input"),x=j("el-form"),f=j("el-button"),U=j("el-dialog");return S(),V(U,{modelValue:n.value,"onUpdate:modelValue":c[2]||(c[2]=X=>n.value=X),title:u.$t("flowable.delegate"),width:"800","append-to-body":""},{default:d(()=>[p(x,{ref_key:"form",ref:r,model:a.value,"label-width":"120px"},{default:d(()=>[p(b,{prop:"toUserId",rules:{required:!0,message:()=>u.$t("v.required")}},{label:d(()=>[p(nt,{message:"flowable.delegateUser"})]),default:d(()=>[p(as,{modelValue:a.value.toUserId,"onUpdate:modelValue":c[0]||(c[0]=X=>a.value.toUserId=X)},null,8,["modelValue"])]),_:1},8,["rules"]),p(b,{prop:"comment",rules:{required:!0,message:()=>u.$t("v.required")}},{label:d(()=>[p(nt,{message:"flowable.delegateReason"})]),default:d(()=>[p(v,{modelValue:a.value.comment,"onUpdate:modelValue":c[1]||(c[1]=X=>a.value.comment=X)},null,8,["modelValue"])]),_:1},8,["rules"])]),_:1},8,["model"]),de("div",Am,[p(f,{type:"primary",onClick:s},{default:d(()=>[O(I(u.$t("ok")),1)]),_:1})])]),_:1},8,["modelValue","title"])}}}),Cm={class:"flex justify-end mt-2"},Rm=$t({__name:"ReviewTransfer",props:{modelValue:{type:Boolean},modelModifiers:{}},emits:mn(["finished"],["update:modelValue"]),setup(e,{emit:t}){const n=Pn(e,"modelValue"),i=t,r=z(),a=z({}),s=()=>{r.value.validate(async u=>{u&&(n.value=!1,i("finished",a.value))})};return Nt(n,()=>{n.value&&(a.value={})}),(u,c)=>{const b=j("el-form-item"),v=j("el-input"),x=j("el-form"),f=j("el-button"),U=j("el-dialog");return S(),V(U,{modelValue:n.value,"onUpdate:modelValue":c[2]||(c[2]=X=>n.value=X),title:u.$t("flowable.transfer"),width:"800","append-to-body":""},{default:d(()=>[p(x,{ref_key:"form",ref:r,model:a.value,"label-width":"120px"},{default:d(()=>[p(b,{prop:"toUserId",rules:{required:!0,message:()=>u.$t("v.required")}},{label:d(()=>[p(nt,{message:"flowable.transferUser"})]),default:d(()=>[p(as,{modelValue:a.value.toUserId,"onUpdate:modelValue":c[0]||(c[0]=X=>a.value.toUserId=X)},null,8,["modelValue"])]),_:1},8,["rules"]),p(b,{prop:"comment",rules:{required:!0,message:()=>u.$t("v.required")}},{label:d(()=>[p(nt,{message:"flowable.transferReason"})]),default:d(()=>[p(v,{modelValue:a.value.comment,"onUpdate:modelValue":c[1]||(c[1]=X=>a.value.comment=X)},null,8,["modelValue"])]),_:1},8,["rules"])]),_:1},8,["model"]),de("div",Cm,[p(f,{type:"primary",onClick:s},{default:d(()=>[O(I(u.$t("ok")),1)]),_:1})])]),_:1},8,["modelValue","title"])}}}),Dm={class:"flex justify-end mt-2"},Im=$t({__name:"ReviewBack",props:mn({taskId:{}},{modelValue:{type:Boolean},modelModifiers:{}}),emits:mn(["finished"],["update:modelValue"]),setup(e,{emit:t}){const n=Pn(e,"modelValue"),i=e,r=t,a=z([]),s=z(),u=z({}),c=()=>{s.value.validate(async v=>{v&&(n.value=!1,r("finished",u.value))})},b=async()=>{a.value=await hl(i.taskId)};return Nt(n,()=>{n.value?(b(),u.value={}):a.value=[]}),(v,x)=>{const f=j("el-radio"),U=j("el-radio-group"),X=j("el-tag"),J=j("el-form-item"),ee=j("el-input"),D=j("el-button"),K=j("el-form"),B=j("el-dialog");return S(),V(B,{modelValue:n.value,"onUpdate:modelValue":x[2]||(x[2]=C=>n.value=C),title:v.$t("flowable.back"),width:"800","append-to-body":""},{default:d(()=>[p(K,{ref_key:"form",ref:s,model:u.value,"label-width":"120px"},{default:d(()=>[p(J,{prop:"activityId",rules:{required:!0,message:()=>v.$t("v.required")}},{label:d(()=>[p(nt,{message:"flowable.backActivity"})]),default:d(()=>[a.value.length>0?(S(),V(U,{key:0,modelValue:u.value.activityId,"onUpdate:modelValue":x[0]||(x[0]=C=>u.value.activityId=C)},{default:d(()=>[(S(!0),Se(Ue,null,Ze(a.value,C=>(S(),V(f,{key:C.id,label:C.activityName,value:C.activityId},{default:d(()=>[O(I(C.activityName),1)]),_:2},1032,["label","value"]))),128))]),_:1},8,["modelValue"])):(S(),V(X,{key:1,type:"warning"},{default:d(()=>[O(I(v.$t("preview.noBackStep")),1)]),_:1}))]),_:1},8,["rules"]),p(J,{prop:"comment",rules:{required:!0,message:()=>v.$t("v.required")}},{label:d(()=>[p(nt,{message:"flowable.backReason"})]),default:d(()=>[p(ee,{modelValue:u.value.comment,"onUpdate:modelValue":x[1]||(x[1]=C=>u.value.comment=C)},null,8,["modelValue"])]),_:1},8,["rules"]),de("div",Dm,[p(D,{type:"primary","native-type":"submit",disabled:a.value.length<=0,onClick:Rn(c,["prevent"])},{default:d(()=>[O(I(v.$t("ok")),1)]),_:1},8,["disabled"])])]),_:1},8,["model"])]),_:1},8,["modelValue","title"])}}}),Nm={key:0},Mm={class:"w-full"},Pm={class:"w-full"},$m={key:1,class:"inline-flex mb-1"},Vm={key:2,class:"inline-flex mb-1"},Lm=$t({name:"ArticleForm",__name:"ArticleForm",props:{modelValue:{type:Boolean,required:!0},beanId:{type:String,default:null},beanIds:{type:Array,required:!0},action:{type:String,default:"edit"},channel:{type:Object,default:null},isReview:{type:Boolean,default:!1}},emits:{"update:modelValue":null,finished:null},setup(e){const t=e,{modelValue:n,channel:i}=Zn(t),{t:r}=Jn(),a=fr(),s=hs(),u=z(),c=z(!1),b=z(!1),v=z(!1),x=z(),f=z({}),U=z(),X=z(!1),J=z([]),ee=z([]),D=z([]),K=z([]),B=z([]),C=z([]),A=z(),N=ct(()=>B.value.find(h=>h.id===A.value)),g=ct(()=>{var h;return Fr(qr(jr().article.mains,(h=N.value)==null?void 0:h.mains,"article"))}),R=ct(()=>{var h;return Fr(qr(jr().article.asides,(h=N.value)==null?void 0:h.asides,"article"))}),L=ct(()=>{var h;return JSON.parse(((h=N.value)==null?void 0:h.customs)||"[]").filter(_=>_.type!=="tinyEditor")}),M=ct(()=>{var h;return JSON.parse(((h=N.value)==null?void 0:h.customs)||"[]").filter(_=>_.type==="tinyEditor")}),H=z(!1),G=z([]),te=async h=>{H.value=!0,G.value=await Ks({Q_Contains_name:h,Q_OrderBy:"refers_desc,id_desc",limit:20}),H.value=!1};Nt(n,()=>{var h;n.value&&(A.value=(h=i==null?void 0:i.value)==null?void 0:h.articleModelId,re(),ye(),pt(),it(),ue())}),Nt(L,()=>{Oe(f.value.customs)});const ue=async()=>{je.epRank>0&&(X.value=await Gs())},fe=h=>Qs("sys_article_source",h),re=async()=>{const h=await xl({current:!0});ee.value=h.map(_=>_.id),J.value=Qn(h),je.dataScope!==1&&Os(J.value,await El())},ye=async()=>{K.value=await mr({isArticlePermission:!0}),D.value=Qn(K.value)},pt=async()=>{B.value=await Ma({type:"article"}),A.value==null&&B.value.length>0&&(A.value=B.value[0].id)},it=async()=>{C.value=await Xs()},Oe=h=>(L.value.forEach(_=>{h[_.code]==null&&(h[_.code]=_.defaultValue,_.defaultValueKey!=null&&(h[_.code+"Key"]=_.defaultValueKey))}),h),bt=async h=>{if(je.epRank<=1)return!1;const _=await yl({text:h.text});if(_.status===-1){if(h.editorType===1){const Ke=U.value.editor.plugins.searchreplace;Ke.find(_.result.name),Ke.done(),ci.confirm(r("article.error.errorWord.confirm",{name:_.result.name,correct:_.result.correct}),{cancelButtonText:r("cancel"),confirmButtonText:r("ok"),type:"warning",callback:ft=>{ft==="confirm"&&(Ke.find(_.result.name),Ke.replace(_.result.correct,!1,!0),Ke.done(),f.value.text=U.value.editor.getContent())}})}else h.editorType===2&&ci.alert(r("article.error.errorWord.alert.message",{name:_.result.name}),r("article.error.errorWord.alert.title"),{confirmButtonText:r("ok")});return!0}const De=await vl({text:h.text});if(De.status===-1){if(h.editorType===1){const Ke=U.value.editor.plugins.searchreplace;Ke.find(De.result.name),Ke.done()}return ci.alert(r("article.error.sensitiveWord.alert.message",{name:De.result.name}),r("article.error.sensitiveWord.alert.title"),{confirmButtonText:r("ok")}),!0}return!1},ot=()=>{u.value.submit(async(h,{focus:_,emit:De,props:Ke,form:ft})=>{var Xe;h.status=10,await Or(h),(Xe=_==null?void 0:_.focus)==null||Xe.call(_),De("update:values",Ke.initValues(h.value)),ft.resetFields(),Ut.success(r("success"))})},P=z(""),q=z([]),ie=z(!1),Te=z(!1),Ae=z(!1),Ne=z(!1),m=async h=>{P.value=h.taskId,q.value=await gl(h.taskId),ie.value=!0},o=async h=>{u.value.remove(async()=>{await Zs(P.value,h.properties,h.comment)})},l=async h=>{P.value=h.taskId,Ae.value=!0},y=async h=>{u.value.remove(async()=>{await Js(P.value,h.toUserId,h.comment)})},w=async h=>{P.value=h.taskId,Ne.value=!0},$=async h=>{u.value.remove(async()=>{await el(P.value,h.toUserId,h.comment)})},se=h=>{P.value=h.taskId,Te.value=!0},xe=h=>{u.value.remove(async()=>{await tl(P.value,h.activityId,h.comment)})},_e=async h=>{try{const{value:_}=await ci.prompt(r("review.rejectReason"),r("review.reject"),{confirmButtonText:r("submit"),cancelButtonText:r("cancel"),inputPattern:/\S+/,inputErrorMessage:r("v.required")});u.value.remove(async()=>{await nl([h.taskId],_)})}catch(_){}},we=(h,_)=>{u.value.submit(async(De,{loadBean:Ke})=>{if(h==="delete")await Va([_]);else if(h==="submit")await La([_]);else if(h==="archive")await Ba([_]);else if(h==="offline")await Oa([_]);else throw new Error("not support action: ".concat(h));Ke()})},Be=z(!1),Ee=z([]),St=()=>{var Ke,ft;Be.value=!0;const h=Ka(f.value.text),De=Ya("img",h).map(Xe=>Ha(Xe,"src")).filter(Xe=>Xe==null?void 0:Xe.startsWith(a.base.uploadUrlPrefix));Ee.value=[...(ft=(Ke=f.value.imageList)==null?void 0:Ke.map(Xe=>Xe.url))!=null?ft:[],...De]},Vt=z(!1),Qe=z([]),oe=async(h,_)=>{Qe.value=await il(.6,h,_),Qe.value.length>0?Vt.value=!0:Ut.success(r("article.success.titleSimilarity"))};return(h,_)=>{const De=j("el-button"),Ke=j("el-button-group"),ft=j("el-popconfirm"),Xe=j("el-tag"),E=j("el-input"),F=j("el-form-item"),he=j("el-col"),mt=j("el-checkbox"),kn=j("el-option"),dn=j("el-select"),Dt=j("el-row"),Wt=j("el-alert"),Un=j("el-radio"),At=j("el-radio-group"),oi=j("el-tree-select"),Me=j("el-date-picker"),Fn=j("el-autocomplete"),qi=j("el-tooltip"),Lt=j("el-tab-pane"),qn=j("el-tabs"),_t=j("el-table-column"),ji=j("el-table"),zi=j("el-dialog");return S(),Se("div",null,[p(kl,{ref_key:"dialog",ref:u,values:f.value,"onUpdate:values":_[52]||(_[52]=le=>f.value=le),name:h.$t("menu.content.article"),"query-bean":e.isReview?T(Hs):T(Pa),"create-bean":T(Or),"update-bean":T(Ys),"delete-bean":T($a),"bean-id":e.beanId,"bean-ids":e.beanIds,action:e.action,focus:x.value,"init-values":()=>{var le,Pe;return A.value=(le=T(i))==null?void 0:le.articleModelId,{editorType:g.value.text.editorType,channelId:(Pe=T(i))==null?void 0:Pe.id,allowComment:!0,customs:{},fileList:[],imageList:[]}},"to-values":le=>({...le,tagNames:le.tags.map(Pe=>Pe.name)}),perms:"article","model-value":e.modelValue,addable:!e.isReview,"disable-edit":le=>le.id!=null&&!le.editable&&!T(je).allStatusPermission&&!e.isReview,"prevent-submit":bt,"label-width":"140px",large:"","onUpdate:modelValue":_[53]||(_[53]=le=>h.$emit("update:modelValue",le)),onFinished:_[54]||(_[54]=()=>h.$emit("finished")),onBeanChange:_[55]||(_[55]=le=>{var Pe,ze,Q;c.value=!!le.subtitle,b.value=!!le.fullTitle,v.value=!!le.linkUrl,A.value=(Q=(Pe=le.channel)==null?void 0:Pe.articleModelId)!=null?Q:(ze=T(i))==null?void 0:ze.articleModelId})},{"header-action":d(({isEdit:le,bean:Pe,unsaved:ze,handleDelete:Q})=>[e.isReview?(S(),V(Ke,{key:0},{default:d(()=>[le&&e.isReview?(S(),V(De,{key:0,disabled:T(Ce)("articleReview:pass")||ze,type:"primary",icon:T(Ia),onClick:()=>m(Pe)},{default:d(()=>[O(I(h.$t("review.pass")),1)]),_:2},1032,["disabled","icon","onClick"])):ne("",!0),p(De,{disabled:T(Ce)("articleReview:reject")||ze,icon:T($r),onClick:()=>_e(Pe)},{default:d(()=>[O(I(h.$t("review.reject")),1)]),_:2},1032,["disabled","icon","onClick"]),T(je).epRank>=3?(S(),V(De,{key:1,disabled:T(Ce)("articleReview:back")||ze,icon:T(ys),onClick:()=>se(Pe)},{default:d(()=>[O(I(h.$t("review.back")),1)]),_:2},1032,["disabled","icon","onClick"])):ne("",!0),T(je).epRank>=3?(S(),V(De,{key:2,disabled:T(Ce)("articleReview:delegate")||ze,icon:T(vs),onClick:()=>l(Pe)},{default:d(()=>[O(I(h.$t("review.delegate")),1)]),_:2},1032,["disabled","icon","onClick"])):ne("",!0),T(je).epRank>=3?(S(),V(De,{key:3,disabled:T(Ce)("articleReview:transfer")||ze,icon:T(gs),onClick:()=>w(Pe)},{default:d(()=>[O(I(h.$t("review.transfer")),1)]),_:2},1032,["disabled","icon","onClick"])):ne("",!0)]),_:2},1024)):ne("",!0),e.isReview?ne("",!0):(S(),V(Ke,{key:1},{default:d(()=>[le?(S(),V(ft,{key:0,title:h.$t("confirmExecute"),onConfirm:()=>we("submit",Pe.id)},{reference:d(()=>[p(De,{disabled:[0,12].includes(Pe.status)||T(Ce)("article:submit")||ze,icon:T(bs)},{default:d(()=>[O(I(h.$t("article.op.submit")),1)]),_:2},1032,["disabled","icon"])]),_:2},1032,["title","onConfirm"])):ne("",!0),le?(S(),V(ft,{key:1,title:h.$t("confirmExecute"),onConfirm:()=>we("archive",Pe.id)},{reference:d(()=>[p(De,{disabled:![0].includes(Pe.status)||T(Ce)("article:archive")||ze,icon:T(_s)},{default:d(()=>[O(I(h.$t("article.op.archive")),1)]),_:2},1032,["disabled","icon"])]),_:2},1032,["title","onConfirm"])):ne("",!0),le?(S(),V(ft,{key:2,title:h.$t("confirmExecute"),onConfirm:()=>we("offline",Pe.id)},{reference:d(()=>[p(De,{disabled:![0,1,5,11,12].includes(Pe.status)||T(Ce)("article:offline")||ze,icon:T($r)},{default:d(()=>[O(I(h.$t("article.op.offline")),1)]),_:2},1032,["disabled","icon"])]),_:2},1032,["title","onConfirm"])):ne("",!0)]),_:2},1024)),le?(S(),V(De,{key:2,icon:T(Sa),onClick:_[0]||(_[0]=()=>T(rs)(f.value.status,f.value.url,f.value.dynamicUrl))},{default:d(()=>[O(I(h.$t("article.op.preview")),1)]),_:1},8,["icon"])):ne("",!0),p(Ke,null,{default:d(()=>[le&&!e.isReview?(S(),V(ft,{key:0,title:h.$t("confirmDelete"),onConfirm:()=>we("delete",Pe.id)},{reference:d(()=>[p(De,{disabled:T(Ce)("article:delete")||ze,icon:T(ws)},{default:d(()=>[O(I(h.$t("delete")),1)]),_:2},1032,["disabled","icon"])]),_:2},1032,["title","onConfirm"])):ne("",!0),le?(S(),V(ft,{key:1,title:h.$t("confirmCompletelyDelete"),onConfirm:()=>Q()},{reference:d(()=>[p(De,{disabled:T(Ce)("article:completelyDelete"),icon:T(Aa)},{default:d(()=>[O(I(h.$t("article.op.completelyDelete")),1)]),_:1},8,["disabled","icon"])]),_:2},1032,["title","onConfirm"])):ne("",!0)]),_:2},1024)]),"header-status":d(({isEdit:le})=>[le?(S(),Se(Ue,{key:0},[f.value.status!=null?(S(),Se("span",Nm,[f.value.status===0?(S(),V(Xe,{key:0,type:"success",size:"small","disable-transitions":""},{default:d(()=>[O(I(h.$t("article.status.".concat(f.value.status))),1)]),_:1})):f.value.status===1?(S(),V(Xe,{key:1,size:"small","disable-transitions":""},{default:d(()=>[O(I(h.$t("article.status.".concat(f.value.status))),1)]),_:1})):f.value.status===20?(S(),V(Xe,{key:2,type:"danger",size:"small","disable-transitions":""},{default:d(()=>[O(I(h.$t("article.status.".concat(f.value.status))),1)]),_:1})):[21,22].includes(f.value.status)?(S(),V(Xe,{key:3,type:"warning",size:"small","disable-transitions":""},{default:d(()=>[O(I(h.$t("article.status.".concat(f.value.status))),1)]),_:1})):(S(),V(Xe,{key:4,type:"info",size:"small","disable-transitions":""},{default:d(()=>[O(I(h.$t("article.status.".concat(f.value.status))),1)]),_:1}))])):ne("",!0)],64)):ne("",!0)]),default:d(({bean:le,isEdit:Pe,disabled:ze})=>[p(Dt,null,{default:d(()=>[p(he,{span:18},{default:d(()=>[p(Dt,null,{default:d(()=>[f.value.src!=null?(S(),V(he,{key:0,span:g.value.title.double?12:24},{default:d(()=>[p(F,{label:h.$t("article.src")},{default:d(()=>[p(E,{"model-value":f.value.src.title,disabled:""},{prepend:d(()=>[O(I(T(r)("article.type.".concat(f.value.type))),1)]),append:d(()=>[O(I(f.value.src.channel.paths.map(Q=>Q.name).join("/")),1)]),_:1},8,["model-value"])]),_:1},8,["label"])]),_:1},8,["span"])):ne("",!0),p(he,{span:g.value.title.double?12:24},{default:d(()=>{var Q;return[p(F,{prop:"title",label:(Q=g.value.title.name)!=null?Q:h.$t("article.title"),rules:{required:!0,message:()=>h.$t("v.required")}},{default:d(()=>[p(E,{ref_key:"focus",ref:x,modelValue:f.value.title,"onUpdate:modelValue":_[1]||(_[1]=Y=>f.value.title=Y),maxlength:"150"},null,8,["modelValue"]),p(De,{disabled:!f.value.title,class:"mr-5",onClick:_[2]||(_[2]=()=>oe(f.value.title,f.value.id))},{default:d(()=>[O(I(h.$t("article.op.titleSimilarity")),1)]),_:1},8,["disabled"]),g.value.subtitle.show&&!g.value.subtitle.required?(S(),V(mt,{key:0,modelValue:c.value,"onUpdate:modelValue":_[3]||(_[3]=Y=>c.value=Y),onClick:_[4]||(_[4]=()=>f.value.subtitle=void 0)},{default:d(()=>{var Y;return[O(I((Y=g.value.subtitle.name)!=null?Y:h.$t("article.subtitle")),1)]}),_:1},8,["modelValue"])):ne("",!0),g.value.fullTitle.show&&!g.value.fullTitle.required?(S(),V(mt,{key:1,modelValue:b.value,"onUpdate:modelValue":_[5]||(_[5]=Y=>b.value=Y),onClick:_[6]||(_[6]=()=>f.value.fullTitle=void 0)},{default:d(()=>{var Y;return[O(I((Y=g.value.fullTitle.name)!=null?Y:h.$t("article.fullTitle")),1)]}),_:1},8,["modelValue"])):ne("",!0),g.value.linkUrl.show&&!g.value.linkUrl.required?(S(),V(mt,{key:2,modelValue:v.value,"onUpdate:modelValue":_[7]||(_[7]=Y=>v.value=Y),onClick:_[8]||(_[8]=()=>(f.value.linkUrl=void 0,f.value.targetBlank=!1))},{default:d(()=>{var Y;return[O(I((Y=g.value.linkUrl.name)!=null?Y:h.$t("article.linkUrl")),1)]}),_:1},8,["modelValue"])):ne("",!0)]),_:1},8,["label","rules"])]}),_:1},8,["span"]),(f.value.subtitle||c.value)&&g.value.subtitle.show||g.value.subtitle.show&&g.value.subtitle.required?(S(),V(he,{key:1,span:g.value.subtitle.double?12:24},{default:d(()=>{var Q;return[p(F,{prop:"subtitle",label:(Q=g.value.subtitle.name)!=null?Q:h.$t("article.subtitle"),rules:g.value.subtitle.required?{required:!0,message:()=>h.$t("v.required")}:void 0},{default:d(()=>[p(E,{modelValue:f.value.subtitle,"onUpdate:modelValue":_[9]||(_[9]=Y=>f.value.subtitle=Y),maxlength:"150"},null,8,["modelValue"])]),_:1},8,["label","rules"])]}),_:1},8,["span"])):ne("",!0),(f.value.fullTitle||b.value)&&g.value.fullTitle.show||g.value.fullTitle.show&&g.value.fullTitle.required?(S(),V(he,{key:2,span:g.value.fullTitle.double?12:24},{default:d(()=>{var Q;return[p(F,{prop:"fullTitle",label:(Q=g.value.fullTitle.name)!=null?Q:h.$t("article.fullTitle"),rules:g.value.fullTitle.required?{required:!0,message:()=>h.$t("v.required")}:void 0},{default:d(()=>[p(E,{modelValue:f.value.fullTitle,"onUpdate:modelValue":_[10]||(_[10]=Y=>f.value.fullTitle=Y),type:"textarea",rows:2,maxlength:"150"},null,8,["modelValue"])]),_:1},8,["label","rules"])]}),_:1},8,["span"])):ne("",!0),(f.value.linkUrl||v.value)&&g.value.linkUrl.show||g.value.linkUrl.show&&g.value.linkUrl.required?(S(),V(he,{key:3,span:g.value.linkUrl.double?12:24},{default:d(()=>[p(F,{prop:"linkUrl",rules:g.value.linkUrl.required?[{required:!0,message:()=>h.$t("v.required")},{pattern:/^(http|\/).*$/,message:()=>h.$t("article.error.linkUrl")}]:{pattern:/^(http|\/).*$/,message:()=>h.$t("article.error.linkUrl")}},{label:d(()=>{var Q;return[p(nt,{label:(Q=g.value.linkUrl.name)!=null?Q:h.$t("article.linkUrl"),message:"article.linkUrl",help:""},null,8,["label"])]}),default:d(()=>[p(E,{modelValue:f.value.linkUrl,"onUpdate:modelValue":_[12]||(_[12]=Q=>f.value.linkUrl=Q),maxlength:"255",disabled:f.value.src!=null&&f.value.type===3},{append:d(()=>[p(mt,{modelValue:f.value.targetBlank,"onUpdate:modelValue":_[11]||(_[11]=Q=>f.value.targetBlank=Q)},{default:d(()=>[O(I(h.$t("article.targetBlank")),1)]),_:1},8,["modelValue"])]),_:1},8,["modelValue","disabled"])]),_:1},8,["rules"])]),_:1},8,["span"])):ne("",!0),g.value.tags.show?(S(),V(he,{key:4,span:g.value.tags.double?12:24},{default:d(()=>{var Q;return[p(F,{prop:"tagNames",label:(Q=g.value.tags.name)!=null?Q:h.$t("article.tags"),rules:g.value.tags.required?{required:!0,message:()=>h.$t("v.required")}:void 0},{default:d(()=>[p(dn,{modelValue:f.value.tagNames,"onUpdate:modelValue":_[13]||(_[13]=Y=>f.value.tagNames=Y),multiple:"",filterable:"",remote:"",clearable:"","allow-create":"","default-first-option":"","reserve-keyword":!1,"remote-method":te,loading:H.value,class:"w-full",onFocusOnce:_[14]||(_[14]=()=>te())},{default:d(()=>[(S(!0),Se(Ue,null,Ze(G.value.map(Y=>Y.name),Y=>(S(),V(kn,{key:Y,label:Y,value:Y},null,8,["label","value"]))),128))]),_:1},8,["modelValue","loading"])]),_:1},8,["label","rules"])]}),_:1},8,["span"])):ne("",!0),g.value.seoKeywords.show?(S(),V(he,{key:5,span:g.value.seoKeywords.double?12:24},{default:d(()=>[p(F,{prop:"seoKeywords",rules:g.value.seoKeywords.required?{required:!0,message:()=>h.$t("v.required")}:void 0},{label:d(()=>{var Q;return[p(nt,{label:(Q=g.value.seoKeywords.name)!=null?Q:h.$t("article.seoKeywords"),message:"article.seoKeywords",help:""},null,8,["label"])]}),default:d(()=>[p(E,{modelValue:f.value.seoKeywords,"onUpdate:modelValue":_[15]||(_[15]=Q=>f.value.seoKeywords=Q),maxlength:"150"},null,8,["modelValue"])]),_:1},8,["rules"])]),_:1},8,["span"])):ne("",!0),g.value.seoDescription.show?(S(),V(he,{key:6,span:g.value.seoDescription.double?12:24},{default:d(()=>{var Q;return[p(F,{prop:"seoDescription",label:(Q=g.value.seoDescription.name)!=null?Q:h.$t("article.seoDescription"),rules:g.value.seoDescription.required?{required:!0,message:()=>h.$t("v.required")}:void 0},{default:d(()=>[p(E,{modelValue:f.value.seoDescription,"onUpdate:modelValue":_[16]||(_[16]=Y=>f.value.seoDescription=Y),type:"textarea",rows:3,maxlength:"1000"},null,8,["modelValue"])]),_:1},8,["label","rules"])]}),_:1},8,["span"])):ne("",!0),g.value.author.show?(S(),V(he,{key:7,span:g.value.author.double?12:24},{default:d(()=>{var Q;return[p(F,{prop:"author",label:(Q=g.value.author.name)!=null?Q:h.$t("article.author"),rules:g.value.author.required?{required:!0,message:()=>h.$t("v.required")}:void 0},{default:d(()=>[p(E,{modelValue:f.value.author,"onUpdate:modelValue":_[17]||(_[17]=Y=>f.value.author=Y),maxlength:"50"},null,8,["modelValue"])]),_:1},8,["label","rules"])]}),_:1},8,["span"])):ne("",!0),g.value.editor.show?(S(),V(he,{key:8,span:g.value.editor.double?12:24},{default:d(()=>{var Q;return[p(F,{prop:"editor",label:(Q=g.value.editor.name)!=null?Q:h.$t("article.editor"),rules:g.value.editor.required?{required:!0,message:()=>h.$t("v.required")}:void 0},{default:d(()=>[p(E,{modelValue:f.value.editor,"onUpdate:modelValue":_[18]||(_[18]=Y=>f.value.editor=Y),maxlength:"50"},null,8,["modelValue"])]),_:1},8,["label","rules"])]}),_:1},8,["span"])):ne("",!0),g.value.image.show?(S(),V(he,{key:9,span:g.value.image.double?12:24},{default:d(()=>{var Q;return[p(F,{prop:"image",label:(Q=g.value.image.name)!=null?Q:h.$t("article.image"),rules:g.value.image.required?{required:!0,message:()=>h.$t("v.required")}:void 0},{default:d(()=>[p(T(Tl),{modelValue:f.value.image,"onUpdate:modelValue":_[19]||(_[19]=Y=>f.value.image=Y),height:g.value.image.imageHeight,width:g.value.image.imageWidth,mode:g.value.image.imageMode,disabled:ze},null,8,["modelValue","height","width","mode","disabled"]),p(De,{class:"self-start ml-2",onClick:_[20]||(_[20]=()=>St())},{default:d(()=>[O(I(h.$t("article.extractImage")),1)]),_:1})]),_:2},1032,["label","rules"])]}),_:2},1032,["span"])):ne("",!0),(S(!0),Se(Ue,null,Ze(L.value,Q=>(S(),V(he,{key:Q.code,span:Q.double?12:24},{default:d(()=>[p(F,{prop:"customs.".concat(Q.code),rules:Q.required?{required:!0,message:()=>h.$t("v.required")}:void 0},{label:d(()=>[p(nt,{label:Q.name},null,8,["label"])]),default:d(()=>[p(zr,{modelValue:f.value.customs[Q.code],"onUpdate:modelValue":Y=>f.value.customs[Q.code]=Y,"model-key":f.value.customs[Q.code+"Key"],"onUpdate:modelKey":Y=>f.value.customs[Q.code+"Key"]=Y,field:Q},null,8,["modelValue","onUpdate:modelValue","model-key","onUpdate:modelKey","field"])]),_:2},1032,["prop","rules"])]),_:2},1032,["span"]))),128)),g.value.file.show?(S(),V(he,{key:10,span:g.value.file.double?12:24},{default:d(()=>{var Q;return[p(F,{prop:"file",label:(Q=g.value.file.name)!=null?Q:h.$t("article.file"),rules:g.value.file.required?{required:!0,message:()=>h.$t("v.required")}:void 0},{default:d(()=>[p(Dt,{class:"w-full"},{default:d(()=>[p(he,{span:16},{default:d(()=>[p(E,{modelValue:f.value.fileName,"onUpdate:modelValue":_[21]||(_[21]=Y=>f.value.fileName=Y)},{prepend:d(()=>[O(I(h.$t("name")),1)]),_:1},8,["modelValue"])]),_:1}),p(he,{span:8},{default:d(()=>[p(E,{modelValue:f.value.fileLength,"onUpdate:modelValue":_[22]||(_[22]=Y=>f.value.fileLength=Y)},{prepend:d(()=>[O(I(h.$t("size")),1)]),append:d(()=>[O("Byte")]),_:1},8,["modelValue"])]),_:1})]),_:1}),p(E,{modelValue:f.value.file,"onUpdate:modelValue":_[23]||(_[23]=Y=>f.value.file=Y)},{prepend:d(()=>[O("URL")]),_:1},8,["modelValue"]),p(T(zn),{type:"file","on-success":Y=>(f.value.file=Y.url,f.value.fileName=Y.name,f.value.fileLength=Y.size),disabled:ze},null,8,["on-success","disabled"])]),_:2},1032,["label","rules"])]}),_:2},1032,["span"])):ne("",!0),g.value.video.show?(S(),V(he,{key:11,span:g.value.video.double?12:24},{default:d(()=>{var Q;return[p(F,{prop:"video",label:(Q=g.value.video.name)!=null?Q:h.$t("article.video"),rules:g.value.video.required?{required:!0,message:()=>h.$t("v.required")}:void 0},{default:d(()=>[p(Dt,{class:"w-full"},{default:d(()=>[p(he,{span:16},{default:d(()=>[p(E,{modelValue:f.value.video,"onUpdate:modelValue":_[24]||(_[24]=Y=>f.value.video=Y),maxlength:"255"},{prepend:d(()=>[O("URL")]),_:1},8,["modelValue"])]),_:1}),p(he,{span:8},{default:d(()=>[p(E,{modelValue:f.value.videoDuration,"onUpdate:modelValue":_[25]||(_[25]=Y=>f.value.videoDuration=Y),maxlength:"10"},{prepend:d(()=>[O(I(h.$t("article.videoDuration")),1)]),append:d(()=>[O(I(T(Vr)(f.value.videoDuration)),1)]),_:1},8,["modelValue"])]),_:1})]),_:1}),p(T(zn),{type:"video","on-success":Y=>{f.value.video=Y.url,f.value.videoDuration=Y.duration,f.value.image||(f.value.image=Y.image)},disabled:ze},null,8,["on-success","disabled"])]),_:2},1032,["label","rules"])]}),_:2},1032,["span"])):ne("",!0),g.value.audio.show?(S(),V(he,{key:12,span:g.value.audio.double?12:24},{default:d(()=>{var Q;return[p(F,{prop:"audio",label:(Q=g.value.audio.name)!=null?Q:h.$t("article.audio"),rules:g.value.audio.required?{required:!0,message:()=>h.$t("v.required")}:void 0},{default:d(()=>[p(Dt,{class:"w-full"},{default:d(()=>[p(he,{span:16},{default:d(()=>[p(E,{modelValue:f.value.audio,"onUpdate:modelValue":_[26]||(_[26]=Y=>f.value.audio=Y),maxlength:"255"},{prepend:d(()=>[O("URL")]),_:1},8,["modelValue"])]),_:1}),p(he,{span:8},{default:d(()=>[p(E,{modelValue:f.value.audioDuration,"onUpdate:modelValue":_[27]||(_[27]=Y=>f.value.audioDuration=Y),maxlength:"10"},{prepend:d(()=>[O(I(h.$t("article.audioDuration")),1)]),append:d(()=>[O(I(T(Vr)(f.value.audioDuration)),1)]),_:1},8,["modelValue"])]),_:1})]),_:1}),p(T(zn),{type:"audio","on-success":Y=>{f.value.audio=Y.url,f.value.audioDuration=Y.duration},disabled:ze},null,8,["on-success","disabled"])]),_:2},1032,["label","rules"])]}),_:2},1032,["span"])):ne("",!0),g.value.doc.show?(S(),V(he,{key:13,span:g.value.doc.double?12:24},{default:d(()=>{var Q;return[p(F,{prop:"doc",label:(Q=g.value.doc.name)!=null?Q:h.$t("article.doc"),rules:g.value.doc.required?{required:!0,message:()=>h.$t("v.required")}:void 0},{default:d(()=>[de("div",Mm,[p(Dt,null,{default:d(()=>[p(he,{span:12},{default:d(()=>[p(E,{modelValue:f.value.docName,"onUpdate:modelValue":_[28]||(_[28]=Y=>f.value.docName=Y)},{prepend:d(()=>[O(I(h.$t("name")),1)]),_:1},8,["modelValue"])]),_:1}),p(he,{span:12},{default:d(()=>[p(E,{modelValue:f.value.docLength,"onUpdate:modelValue":_[29]||(_[29]=Y=>f.value.docLength=Y)},{prepend:d(()=>[O(I(h.$t("size")),1)]),append:d(()=>[O("Byte")]),_:1},8,["modelValue"])]),_:1})]),_:1}),p(E,{modelValue:f.value.doc,"onUpdate:modelValue":_[30]||(_[30]=Y=>f.value.doc=Y)},{prepend:d(()=>[O("URL")]),_:1},8,["modelValue"]),p(E,{modelValue:f.value.docOrig,"onUpdate:modelValue":_[31]||(_[31]=Y=>f.value.docOrig=Y)},{prepend:d(()=>[O(I(h.$t("article.docOrig")),1)]),_:1},8,["modelValue"]),X.value&&T(je).epRank>0?(S(),V(T(zn),{key:0,type:"library",disabled:T(Ce)("jodConvert:library")||ze,"upload-action":T(zs),"on-success":Y=>{f.value.doc=Y.doc,f.value.docOrig=Y.docOrig,f.value.docName=Y.docName,f.value.docLength=Y.docLength,f.value.image=Y.docImage}},null,8,["disabled","upload-action","on-success"])):ne("",!0),!X.value&&T(je).epRank>0?(S(),V(Wt,{key:1,title:h.$t("error.jodConverterNotEnabled"),type:"error",closable:!1},null,8,["title"])):ne("",!0),T(je).epRank===0?(S(),V(De,{key:2,type:"primary",onClick:_[32]||(_[32]=()=>h.$alert(h.$t("error.enterprise"),{dangerouslyUseHTMLString:!0}))},{default:d(()=>[O(I(h.$t("article.op.clickToUpload")),1)]),_:1})):ne("",!0)])]),_:2},1032,["label","rules"])]}),_:2},1032,["span"])):ne("",!0),g.value.imageList.show?(S(),V(he,{key:14,span:g.value.imageList.double?12:24},{default:d(()=>{var Q;return[p(F,{prop:"imageList",label:(Q=g.value.imageList.name)!=null?Q:h.$t("article.imageList"),rules:g.value.imageList.required?{required:!0,message:()=>h.$t("v.required")}:void 0},{default:d(()=>[p(T(gm),{modelValue:f.value.imageList,"onUpdate:modelValue":_[33]||(_[33]=Y=>f.value.imageList=Y),"max-height":g.value.imageList.imageMaxHeight,"max-width":g.value.imageList.imageMaxWidth,"list-type":g.value.imageList.imageListType,disabled:ze},null,8,["modelValue","max-height","max-width","list-type","disabled"])]),_:2},1032,["label","rules"])]}),_:2},1032,["span"])):ne("",!0),g.value.fileList.show?(S(),V(he,{key:15,span:g.value.fileList.double?12:24},{default:d(()=>{var Q;return[p(F,{prop:"fileList",label:(Q=g.value.fileList.name)!=null?Q:h.$t("article.fileList"),rules:g.value.fileList.required?{required:!0,message:()=>h.$t("v.required")}:void 0},{default:d(()=>[p(T(Em),{modelValue:f.value.fileList,"onUpdate:modelValue":_[34]||(_[34]=Y=>f.value.fileList=Y),disabled:ze},null,8,["modelValue","disabled"])]),_:2},1032,["label","rules"])]}),_:2},1032,["span"])):ne("",!0),g.value.text.show?(S(),V(he,{key:16,span:g.value.text.double?12:24},{default:d(()=>{var Q;return[p(F,{prop:"text",label:(Q=g.value.text.name)!=null?Q:h.$t("article.text"),rules:g.value.text.required?{required:!0,message:()=>h.$t("v.required")}:void 0},{default:d(()=>{var Y;return[de("div",Pm,[g.value.text.editorSwitch?(S(),V(At,{key:0,modelValue:f.value.editorType,"onUpdate:modelValue":_[35]||(_[35]=et=>f.value.editorType=et),class:"mr-6",onChange:_[36]||(_[36]=()=>f.value.markdown="")},{default:d(()=>[(S(),Se(Ue,null,Ze([1,2],et=>p(Un,{key:et,value:et},{default:d(()=>[O(I(h.$t("model.field.editorType.".concat(et))),1)]),_:2},1032,["value"])),64))]),_:1},8,["modelValue"])):ne("",!0),f.value.editorType===1&&X.value&&T(je).epRank>0?(S(),Se("div",$m,[p(T(zn),{type:"doc",disabled:T(Ce)("jodConvert:doc"),"upload-action":T(Ws),"on-success":et=>f.value.text=et,button:h.$t("article.op.docImport")},null,8,["disabled","upload-action","on-success","button"])])):ne("",!0),T(je).epRank===0&&T(je).epDisplay?(S(),Se("div",Vm,[p(De,{type:"primary",onClick:_[37]||(_[37]=()=>h.$alert(h.$t("error.enterprise"),{dangerouslyUseHTMLString:!0}))},{default:d(()=>[O(I(h.$t("article.op.docImport")),1)]),_:1})])):ne("",!0),f.value.editorType===2?(S(),V(T(Bs),{key:3,modelValue:f.value.markdown,"onUpdate:modelValue":_[38]||(_[38]=et=>f.value.markdown=et),html:f.value.text,"onUpdate:html":_[39]||(_[39]=et=>f.value.text=et),class:"leading-6"},null,8,["modelValue","html"])):(S(),V(T(Sl),{key:4,ref_key:"tinyText",ref:U,modelValue:f.value.text,"onUpdate:modelValue":_[40]||(_[40]=et=>f.value.text=et),disabled:ze,init:{typesetting_options:(Y=T(s).currentSite.editor)==null?void 0:Y.typesetting}},null,8,["modelValue","disabled","init"]))])]}),_:2},1032,["label","rules"])]}),_:2},1032,["span"])):ne("",!0),(S(!0),Se(Ue,null,Ze(M.value,Q=>(S(),V(he,{key:Q.code,span:Q.double?12:24},{default:d(()=>[p(F,{prop:"customs.".concat(Q.code),rules:Q.required?{required:!0,message:()=>h.$t("v.required")}:void 0},{label:d(()=>[p(nt,{label:Q.name},null,8,["label"])]),default:d(()=>[p(zr,{modelValue:f.value.customs[Q.code],"onUpdate:modelValue":Y=>f.value.customs[Q.code]=Y,field:Q},null,8,["modelValue","onUpdate:modelValue","field"])]),_:2},1032,["prop","rules"])]),_:2},1032,["span"]))),128))]),_:2},1024)]),_:2},1024),p(he,{span:6,class:"el-form--label-top label-top"},{default:d(()=>[p(qn,{type:"border-card",class:"ml-5"},{default:d(()=>[p(Lt,{label:h.$t("article.tabs.setting")},{default:d(()=>{var Q,Y,et,si,li,ui,jn,k,Le;return[p(F,{prop:"channelId",label:(Q=R.value.channel.name)!=null?Q:h.$t("article.channel"),rules:[{required:!0,message:()=>h.$t("v.required")},{validator:(pe,tt,Zt)=>{var Jt;if(((Jt=D.value.find(os=>os.id===tt))==null?void 0:Jt.children.length)>0){Zt(h.$t("article.error.leafChannelOnly"));return}Zt()}}]},{default:d(()=>{var pe;return[p(oi,{modelValue:f.value.channelId,"onUpdate:modelValue":_[41]||(_[41]=tt=>f.value.channelId=tt),data:D.value,"node-key":"id",props:{label:"name"},"render-after-expand":!1,"default-expanded-keys":(pe=le.channel)==null?void 0:pe.paths.map(tt=>tt.id),class:"w-full",onChange:_[42]||(_[42]=tt=>{var Zt;A.value=(Zt=K.value.find(Jt=>Jt.id===tt))==null?void 0:Zt.articleModelId})},null,8,["modelValue","data","default-expanded-keys"])]}),_:2},1032,["label","rules"]),R.value.org.show?(S(),V(F,{key:0,label:(Y=R.value.org.name)!=null?Y:h.$t("article.org"),required:Pe},{default:d(()=>{var pe,tt,Zt;return[p(oi,{modelValue:f.value.orgId,"onUpdate:modelValue":_[43]||(_[43]=Jt=>f.value.orgId=Jt),data:((pe=le.org)==null?void 0:pe.id)!=null&&ee.value.indexOf(le.org.id)===-1?[le.org,...J.value]:J.value,"node-key":"id",props:{label:"name"},"render-after-expand":!1,"default-expanded-keys":((Zt=(tt=le.org)==null?void 0:tt.paths)!=null?Zt:J.value).map(Jt=>Jt.id),class:"w-full"},null,8,["modelValue","data","default-expanded-keys"])]}),_:2},1032,["label","required"])):ne("",!0),R.value.publishDate.show?(S(),V(F,{key:1,prop:"publishDate",rules:Pe?{required:!0,message:()=>h.$t("v.required")}:void 0},{label:d(()=>{var pe;return[p(nt,{label:(pe=R.value.publishDate.name)!=null?pe:h.$t("article.publishDate"),message:"article.publishDate",help:""},null,8,["label"])]}),default:d(()=>[p(Me,{modelValue:f.value.publishDate,"onUpdate:modelValue":_[44]||(_[44]=pe=>f.value.publishDate=pe),type:"datetime",class:"w-full",onChange:_[45]||(_[45]=pe=>{pe===null&&(f.value.publishDate=void 0)})},null,8,["modelValue"])]),_:2},1032,["rules"])):ne("",!0),R.value.onlineDate.show?(S(),V(F,{key:2,prop:"onlineDate",rules:R.value.onlineDate.required?{required:!0,message:()=>h.$t("v.required")}:void 0},{label:d(()=>{var pe;return[p(nt,{label:(pe=R.value.onlineDate.name)!=null?pe:h.$t("article.onlineDate"),message:"article.onlineDate",help:""},null,8,["label"])]}),default:d(()=>[p(Me,{modelValue:f.value.onlineDate,"onUpdate:modelValue":_[46]||(_[46]=pe=>f.value.onlineDate=pe),type:"datetime",class:"w-full"},null,8,["modelValue"])]),_:1},8,["rules"])):ne("",!0),R.value.offlineDate.show?(S(),V(F,{key:3,prop:"offlineDate",rules:R.value.offlineDate.required?{required:!0,message:()=>h.$t("v.required")}:void 0},{label:d(()=>{var pe;return[p(nt,{label:(pe=R.value.offlineDate.name)!=null?pe:h.$t("article.offlineDate"),message:"article.offlineDate",help:""},null,8,["label"])]}),default:d(()=>[p(Me,{modelValue:f.value.offlineDate,"onUpdate:modelValue":_[47]||(_[47]=pe=>f.value.offlineDate=pe),type:"datetime",class:"w-full"},null,8,["modelValue"])]),_:1},8,["rules"])):ne("",!0),R.value.source.show?(S(),V(F,{key:4,prop:"source",label:(et=R.value.source.name)!=null?et:h.$t("article.source"),rules:R.value.source.required?{required:!0,message:()=>h.$t("v.required")}:void 0},{default:d(()=>[p(Fn,{modelValue:f.value.source,"onUpdate:modelValue":_[48]||(_[48]=pe=>f.value.source=pe),"value-key":"name","fetch-suggestions":async(pe,tt)=>tt(await fe(pe)),class:"w-full","highlight-first-item":"","hide-loading":"",clearable:"",onKeydown:_[49]||(_[49]=xs(Rn(()=>{},["prevent"]),["enter"]))},null,8,["modelValue","fetch-suggestions"])]),_:1},8,["label","rules"])):ne("",!0),R.value.articleTemplate.show?(S(),V(F,{key:5,prop:"articleTemplate",label:(si=R.value.articleTemplate.name)!=null?si:h.$t("article.articleTemplate"),rules:R.value.articleTemplate.required?{required:!0,message:()=>h.$t("v.required")}:void 0},{label:d(()=>{var pe;return[p(nt,{label:(pe=R.value.articleTemplate.name)!=null?pe:h.$t("article.articleTemplate"),message:"article.articleTemplate",help:""},null,8,["label"])]}),default:d(()=>[p(dn,{modelValue:f.value.articleTemplate,"onUpdate:modelValue":_[50]||(_[50]=pe=>f.value.articleTemplate=pe),clearable:"",class:"w-full"},{default:d(()=>[(S(!0),Se(Ue,null,Ze(C.value,pe=>(S(),V(kn,{key:pe,label:pe+".html",value:pe},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1},8,["label","rules"])):ne("",!0),R.value.user.show?(S(),V(F,{key:6,label:(li=R.value.user.name)!=null?li:h.$t("article.user")},{default:d(()=>{var pe;return[p(E,{"model-value":(pe=f.value.user)==null?void 0:pe.username,disabled:""},null,8,["model-value"])]}),_:1},8,["label"])):ne("",!0),R.value.created.show?(S(),V(F,{key:7,label:(ui=R.value.created.name)!=null?ui:h.$t("article.created")},{default:d(()=>[p(Me,{"model-value":f.value.created,type:"datetime",class:"w-full",disabled:""},null,8,["model-value"])]),_:1},8,["label"])):ne("",!0),R.value.modifiedUser.show?(S(),V(F,{key:8,label:(jn=R.value.modifiedUser.name)!=null?jn:h.$t("article.modifiedUser")},{default:d(()=>{var pe;return[p(E,{"model-value":(pe=f.value.modifiedUser)==null?void 0:pe.username,disabled:""},null,8,["model-value"])]}),_:1},8,["label"])):ne("",!0),R.value.modified.show?(S(),V(F,{key:9,label:(k=R.value.modified.name)!=null?k:h.$t("article.modified")},{default:d(()=>[p(Me,{"model-value":f.value.modified,type:"datetime",class:"w-full",disabled:""},null,8,["model-value"])]),_:1},8,["label"])):ne("",!0),((Le=f.value.destList)==null?void 0:Le.length)>0?(S(),V(F,{key:10,label:h.$t("article.destList")},{default:d(()=>[(S(!0),Se(Ue,null,Ze(f.value.destList,pe=>(S(),V(qi,{key:pe.id,content:(pe.siteId!=f.value.siteId?"[".concat(pe.site.name,"] "):"")+pe.channel.paths.map(tt=>tt.name).join("/"),placement:"top-start"},{default:d(()=>[p(E,{"model-value":(pe.siteId!=f.value.siteId?"[".concat(pe.site.name,"] "):"")+pe.channel.paths.map(tt=>tt.name).join("/"),disabled:""},{append:d(()=>[O(I(T(r)("article.type.".concat(pe.type))),1)]),_:2},1032,["model-value"])]),_:2},1032,["content"]))),128))]),_:1},8,["label"])):ne("",!0)]}),_:2},1032,["label"])]),_:2},1024)]),_:2},1024)]),_:2},1024)]),"footer-action":d(({isEdit:le,handleSubmit:Pe})=>[p(De,{disabled:T(Ce)(le?"article:update":"article:create"),type:"primary","native-type":"submit",onClick:Rn(()=>Pe(),["prevent"])},{default:d(()=>[O(I(h.$t(le?"save":"submit")),1)]),_:2},1032,["disabled","onClick"]),le?ne("",!0):(S(),V(De,{key:0,onClick:_[51]||(_[51]=()=>ot())},{default:d(()=>[O(I(h.$t("article.op.saveAsDraft")),1)]),_:1}))]),_:1},8,["values","name","query-bean","create-bean","update-bean","delete-bean","bean-id","bean-ids","action","focus","init-values","to-values","model-value","addable","disable-edit"]),p(Rl,{modelValue:Be.value,"onUpdate:modelValue":_[56]||(_[56]=le=>Be.value=le),urls:Ee.value,"append-to-body":!0,onFinished:_[57]||(_[57]=le=>f.value.image=le[0])},null,8,["modelValue","urls"]),p(zi,{modelValue:Vt.value,"onUpdate:modelValue":_[58]||(_[58]=le=>Vt.value=le),title:h.$t("article.op.titleSimilarity"),width:"820px"},{default:d(()=>[p(ji,{data:Qe.value},{default:d(()=>[p(_t,{property:"id",label:"ID",width:"170px"}),p(_t,{property:"title",label:h.$t("article.similarity.title"),"show-overflow-tooltip":""},null,8,["label"]),p(_t,{property:"channel.name",label:h.$t("article.channel"),formatter:le=>le.channel.paths.map(Pe=>Pe.name).join(" / "),width:"180px","show-overflow-tooltip":""},null,8,["label","formatter"]),p(_t,{property:"score",label:h.$t("article.similarity.score"),formatter:le=>h.$n(le.score,"percent",{minimumFractionDigits:0}),width:"100px"},null,8,["label","formatter"])]),_:1},8,["data"])]),_:1},8,["modelValue","title"]),p(Sm,{modelValue:ie.value,"onUpdate:modelValue":_[59]||(_[59]=le=>ie.value=le),"form-properties":q.value,"onUpdate:formProperties":_[60]||(_[60]=le=>q.value=le),onFinished:o},null,8,["modelValue","form-properties"]),p(Tm,{modelValue:Ae.value,"onUpdate:modelValue":_[61]||(_[61]=le=>Ae.value=le),onFinished:y},null,8,["modelValue"]),p(Rm,{modelValue:Ne.value,"onUpdate:modelValue":_[62]||(_[62]=le=>Ne.value=le),onFinished:$},null,8,["modelValue"]),p(Im,{modelValue:Te.value,"onUpdate:modelValue":_[63]||(_[63]=le=>Te.value=le),"task-id":P.value,onFinished:xe},null,8,["modelValue","task-id"])])}}}),Bm=Ni(Lm,[["__scopeId","data-v-ed4417fb"]]),Om={class:"flex items-center justify-between"},Um=de("div",null,null,-1),Fm=$t({name:"ArticleInternalPushForm",__name:"ArticlePushForm",props:{modelValue:{type:Boolean,required:!0},beanId:{type:String,default:null},type:{type:String,default:"external"}},emits:{"update:modelValue":null,finished:null},setup(e,{emit:t}){const n=e,i=t,{beanId:r,type:a,modelValue:s}=Zn(n),{t:u}=Jn(),c=z(),b=z({}),v=z({}),x=z(!1),f=z([]),U=z([]),X=z(),J=async()=>{(r==null?void 0:r.value)!=null&&(b.value=await Pa(r.value))},ee=async C=>{const A=a.value==="internal"?{isArticlePermission:!0}:{siteId:C};U.value=Us(Qn(await mr(A))),U.value=Br(U.value,[...b.value.destList.map(N=>N.channel.id),b.value.channel.id])},D=async()=>{f.value=await bl(),f.value=Qn(f.value),f.value=Br(f.value,[b.value.siteId])};Nt(s,async()=>{s.value&&(await J(),a.value==="external"?D():ee(),v.value={ids:[b.value.id],type:3})});const K=()=>{X.value!=null&&(v.value.channelIds=[...X.value.getCheckedNodes(),...X.value.getHalfCheckedNodes()].map(C=>C.id),c.value.validate())},B=()=>{c.value.validate(async C=>{if(C){x.value=!0;try{a.value==="internal"?await rl(v.value):await al(v.value),i("finished"),i("update:modelValue",!1),Ut.success(u("success"))}finally{x.value=!1}}})};return(C,A)=>{const N=j("el-input"),g=j("el-form-item"),R=j("el-radio-button"),L=j("el-radio-group"),M=j("el-tree-select"),H=j("el-tree"),G=j("el-form"),te=j("el-button"),ue=j("el-drawer");return S(),V(ue,{title:C.$t("article.op.".concat(T(a),"Push")),"model-value":e.modelValue,size:414,"onUpdate:modelValue":A[6]||(A[6]=fe=>C.$emit("update:modelValue",fe))},{default:d(()=>[p(G,{ref_key:"form",ref:c,model:v.value,"label-position":"top"},{default:d(()=>[p(g,null,{default:d(()=>[p(N,{"model-value":b.value.title,disabled:""},null,8,["model-value"])]),_:1}),p(g,{prop:"type"},{default:d(()=>[p(L,{modelValue:v.value.type,"onUpdate:modelValue":A[0]||(A[0]=fe=>v.value.type=fe)},{default:d(()=>[(S(),Se(Ue,null,Ze([1,3],fe=>p(R,{key:fe,value:fe},{default:d(()=>[O(I(T(u)("article.type.".concat(fe))),1)]),_:2},1032,["value"])),64))]),_:1},8,["modelValue"])]),_:1}),T(a)==="external"?(S(),V(g,{key:0,prop:"siteId",rules:[{required:!0,message:()=>C.$t("v.required")}]},{default:d(()=>[p(M,{modelValue:v.value.siteId,"onUpdate:modelValue":A[1]||(A[1]=fe=>v.value.siteId=fe),data:f.value,"node-key":"id",props:{label:"name",disabled:"disabled"},"render-after-expand":!1,"check-strictly":"",class:"w-full",onChange:A[2]||(A[2]=fe=>ee(fe))},null,8,["modelValue","data"])]),_:1},8,["rules"])):ne("",!0),p(g,{prop:"channelIds",rules:[{required:!0,message:()=>C.$t("v.required")}]},{default:d(()=>[p(H,{ref_key:"channelTree",ref:X,data:U.value,"node-key":"id",props:{label:"name"},class:"w-full border rounded","check-strictly":"","default-expand-all":"","show-checkbox":"","check-on-click-node":"",onCheck:A[3]||(A[3]=()=>K())},null,8,["data"])]),_:1},8,["rules"])]),_:1},8,["model"])]),footer:d(()=>[de("div",Om,[Um,de("div",null,[p(te,{onClick:A[4]||(A[4]=()=>C.$emit("update:modelValue",!1))},{default:d(()=>[O(I(C.$t("cancel")),1)]),_:1}),p(te,{type:"primary",loading:x.value,onClick:A[5]||(A[5]=()=>B())},{default:d(()=>[O(I(C.$t("save")),1)]),_:1},8,["loading"])])])]),_:1},8,["title","model-value"])}}}),qm={class:"mb-1 ml-2"},jm={class:"mb-3"},zm={class:"app-block"},Wm={key:0},Hm={key:0},Ym=["title"],Km={class:"text-xs"},Gm={class:"text-xs"},Qm={class:"text-xs"},Xm={class:"text-xs"},Zm={class:"text-xs"},Jm={class:"text-xs"},eh={class:"text-xs"},th={class:"text-xs"},kh=$t({name:"ArticleList",__name:"ArticleList",setup(e){var Xe;const{t}=Jn(),n=z({}),i=z(),r=z(1),a=z(10),s=z(0),u=z(),c=z([]),b=z([]),v=z(!1),x=z(!1),f=z(),U=ct(()=>c.value.map(E=>E.id)),X=z(!1),J=z("edit"),ee=z([]),D=z(!1),K=z(),B=z(),C=z(),A=z(),N=z(),g=z(),R=z(),L=z([]),M=z(!1),H=z(),G=z(),te=z(!1),ue=["completelyDelete","delete","submit","archive","offline"],fe=z(ue[0]),re=z(!1),ye=z("internal"),pt=Es(),it=z(Number((Xe=pt.query.status)!=null?Xe:"-1")),Oe=z([]),bt=ct(()=>Oe.value.find(E=>{var F;return E.id===((F=H.value)==null?void 0:F.articleModelId)})),ot=ct(()=>{var E;return JSON.parse(((E=bt.value)==null?void 0:E.customs)||"[]")}),P=z({});Nt(ot,async()=>{P.value={},ot.value.filter(E=>["radio","select","checkbox","multipleSelect"].indexOf(E.type)>=0).map(E=>E.dictTypeId).forEach(async E=>{P.value[E]=(await ol({typeId:E})).map(F=>({label:F.name,value:F.value}))})});const q=E=>fe.value==="delete"?![20].includes(E.status):fe.value==="submit"?![0,12].includes(E.status):fe.value==="archive"?[0].includes(E.status):fe.value==="offline"?[0,1,5,11,12].includes(E.status):(fe.value==="completelyDelete",!0),ie=ct(()=>b.value.filter(E=>q(E)).map(E=>E.id)),Te=async(E,F)=>{if(E==="delete")await Va(F);else if(E==="submit")await La(F);else if(E==="archive")await Ba(F);else if(E==="offline")await Oa(F);else if(E==="completelyDelete")await $a(F);else throw new Error("not support action: ".concat(E));Ae(),Ut.success(t("success"))},Ae=async()=>{var E;v.value=!0;try{const{content:F,totalElements:he}=await sl({...Is(n.value),Q_EQ_status:it.value!==-1?it.value:void 0,subChannelId:(E=H.value)==null?void 0:E.id,Q_OrderBy:i.value,page:r.value,pageSize:a.value});X.value=i.value!==void 0,c.value=F,s.value=Number(he)}finally{v.value=!1}},Ne=async()=>{M.value=!0;try{L.value=Qn(await mr({isArticlePermission:!0}))}finally{M.value=!1}},m=async()=>{ee.value=await js()},o=async()=>{Oe.value=await Ma({type:"article"})};let l;const y=()=>{const E=document.querySelector("#dataTable .el-table__body-wrapper tbody");l=Ps.create(E,{handle:".drag-handle",animation:200,chosenClass:"sortable-chosen",onEnd:async function(F){const{oldIndex:he,newIndex:mt}=F;he!==mt&&(await ll(c.value[he].id,c.value[mt].id),c.value.splice(mt,0,c.value.splice(he,1)[0]),Ut.success(t("success")))}})};Na(()=>{Ae(),Ne(),m(),o(),y()}),ks(()=>{l!==void 0&&l.destroy()});const w=({column:E,prop:F,order:he})=>{var mt;F&&he?i.value=((mt=E.sortBy)!=null?mt:F)+(he==="descending"?"_desc":""):i.value=void 0,Ae()},$=()=>{r.value=1,Ae()},se=()=>{u.value.clearSort(),Ns(n.value),i.value=void 0,r.value=1,Ae()},xe=()=>{J.value="add",f.value=void 0,x.value=!0},_e=E=>{J.value="copy",f.value=E,x.value=!0},we=E=>{Ce("article:update")||(J.value="edit",f.value=E,x.value=!0)},Be=E=>{f.value=E,ye.value="internal",re.value=!0},Ee=E=>{f.value=E,ye.value="external",re.value=!0},St=(E,F)=>{var dn,Dt;D.value=!0,K.value=E,B.value=F.id,C.value=F.title,A.value=F.description,N.value=F.video;const he=Ka(F.text),kn=Ya("img",he).map(Wt=>Ha(Wt,"src")).filter(Wt=>Wt!=null);g.value=[...(Dt=(dn=F.imageList)==null?void 0:dn.map(Wt=>Wt.url))!=null?Dt:[],...kn],F.image&&g.value.push(F.image)},Vt=async E=>{await ul([E]),Ae(),Ut.success(t("success"))},Qe=E=>{G.value=E,te.value=!0},oe=z(!1),h=z(),_=z({id:0,sticky:0,stickyDate:null}),De=(E,F,he)=>{oe.value=!0,_.value={id:E,sticky:F<1?1:F,stickyDate:he}},Ke=async()=>{h.value.validate(async E=>{E&&(await Ur([_.value.id],_.value.sticky,_.value.stickyDate),Ae(),oe.value=!1,Ut.success(t("success")))})},ft=async E=>{await Ur([E],0,void 0),Ae(),Ut.success(t("success"))};return(E,F)=>{const he=j("el-button"),mt=j("el-tree"),kn=j("el-scrollbar"),dn=j("el-aside"),Dt=j("el-option"),Wt=j("el-select"),Un=j("el-popconfirm"),At=j("el-radio-button"),oi=j("el-radio-group"),Me=j("el-table-column"),Fn=j("el-icon"),qi=j("el-link"),Lt=j("el-tag"),qn=j("el-tooltip"),_t=j("el-dropdown-item"),ji=j("el-dropdown-menu"),zi=j("el-dropdown"),le=j("el-table"),Pe=j("el-pagination"),ze=j("el-input-number"),Q=j("el-form-item"),Y=j("el-date-picker"),et=j("el-form"),si=j("el-dialog"),li=j("el-main"),ui=j("el-container"),jn=Ea("loading");return S(),V(ui,null,{default:d(()=>[p(dn,{width:"220px",class:"pr-3"},{default:d(()=>[p(kn,{class:"p-2 bg-white rounded-sm"},{default:d(()=>[de("div",qm,[p(he,{type:H.value==null?"primary":void 0,link:"",onClick:F[0]||(F[0]=()=>{R.value.setCurrentKey(null),H.value=void 0,$()})},{default:d(()=>[O(I(E.$t("article.allChannel")),1)]),_:1},8,["type"])]),Si(p(mt,{ref_key:"channelTree",ref:R,data:L.value,props:{label:"name"},"expand-on-click-node":!1,"node-key":"id","highlight-current":"",onNodeClick:F[1]||(F[1]=k=>{H.value=k,$()})},null,8,["data"]),[[jn,M.value]])]),_:1})]),_:1}),p(li,{class:"p-0"},{default:d(()=>[de("div",jm,[p(T(cl),{params:n.value,onSearch:$,onReset:se},{default:d(()=>[p(T(qe),{label:E.$t("article.title"),name:"Q_Contains_@articleExt-title"},null,8,["label"]),p(T(qe),{label:E.$t("article.text"),name:"Q_Contains_@articleExt-text"},null,8,["label"]),(S(!0),Se(Ue,null,Ze(ot.value.filter(k=>["imageUpload","videoUpload","audioUpload","fileUpload"].indexOf(k.type)===-1),k=>(S(),Se(Ue,{key:k.code},[["number","slider"].indexOf(k.type)>=0?(S(),V(T(qe),{key:0,label:k.name,name:"Q_GE_@articleExt-mainsJson$".concat(k.code,"_Int,Q_LE_@articleExt-mainsJson$").concat(k.code,"_Int"),type:"number"},null,8,["label","name"])):k.type==="date"&&k.dateType==="datetime"?(S(),V(T(qe),{key:1,label:k.name,name:"Q_GE_@articleExt-mainsJson$".concat(k.code,"_DateTime,Q_LE_@articleExt-mainsJson$").concat(k.code,"_DateTime"),type:"datetime"},null,8,["label","name"])):k.type==="date"?(S(),V(T(qe),{key:2,label:k.name,name:"Q_GE_@articleExt-mainsJson$".concat(k.code,"_Date,Q_LE_@articleExt-mainsJson$").concat(k.code,"_Date"),type:"date"},null,8,["label","name"])):k.type==="switch"?(S(),V(T(qe),{key:3,label:k.name,name:"Q_EQ_@articleExt-mainsJson$".concat(k.code,"_Boolean"),options:[{label:E.$t("yes"),value:"true"},{label:E.$t("no"),value:"false"}],multiple:!1},null,8,["label","name","options"])):["radio","select"].indexOf(k.type)>=0?(S(),V(T(qe),{key:4,label:k.name,name:"Q_In_@articleExt-mainsJson$".concat(k.code,"Key").concat(k.dataType==="number"?"_Int":""),options:P.value[k.dictTypeId]},null,8,["label","name","options"])):["checkbox","multipleSelect"].indexOf(k.type)>=0?(S(),V(T(qe),{key:5,label:k.name,name:"Q_ArrayIn_@articleExt-mainsJson$".concat(k.code,"Key").concat(k.dataType==="number"?"_Int":""),options:P.value[k.dictTypeId]},null,8,["label","name","options"])):k.clob?(S(),V(T(qe),{key:6,label:k.name,name:"Q_Contains_@articleExt-clobsJson$".concat(k.code)},null,8,["label","name"])):(S(),V(T(qe),{key:7,label:k.name,name:"Q_Contains_@articleExt-mainsJson$".concat(k.code)},null,8,["label","name"]))],64))),128)),p(T(qe),{label:E.$t("article.publishDate"),name:"Q_GE_publishDate_DateTime,Q_LE_publishDate_DateTime",type:"datetime"},null,8,["label"]),p(T(qe),{label:E.$t("article.block"),name:"Q_In_@BlockItem-blockId_Long",options:ee.value.filter(k=>k.recommendable).map(k=>({label:k.name,value:k.id}))},null,8,["label","options"]),p(T(qe),{label:E.$t("article.org"),name:"Q_Like_org-name"},null,8,["label"]),p(T(qe),{label:E.$t("article.user"),name:"Q_Like_user-username"},null,8,["label"]),p(T(qe),{label:E.$t("article.created"),name:"Q_GE_created_DateTime,Q_LE_created_DateTime",type:"datetime"},null,8,["label"]),p(T(qe),{label:E.$t("article.modifiedUser"),name:"Q_Like_modifiedUser@user-username"},null,8,["label"]),p(T(qe),{label:E.$t("article.modified"),name:"Q_GE_modified_DateTime,Q_LE_modified_DateTime",type:"datetime"},null,8,["label"]),p(T(qe),{label:E.$t("article.author"),name:"Q_Contains_@articleExt-author"},null,8,["label"]),p(T(qe),{label:E.$t("article.editor"),name:"Q_Contains_@articleExt-editor"},null,8,["label"]),p(T(qe),{label:E.$t("article.source"),name:"Q_Contains_@articleExt-source"},null,8,["label"]),p(T(qe),{label:E.$t("article.subtitle"),name:"Q_Contains_@articleExt-subtitle"},null,8,["label"]),p(T(qe),{label:E.$t("article.fullTitle"),name:"Q_Contains_@articleExt-fullTitle"},null,8,["label"]),p(T(qe),{label:E.$t("article.seoKeywords"),name:"Q_Contains_@articleExt-seoKeywords"},null,8,["label"]),p(T(qe),{label:E.$t("article.seoDescription"),name:"Q_Contains_@articleExt-seoDescription"},null,8,["label"])]),_:1},8,["params"])]),de("div",null,[p(he,{type:"primary",disabled:T(Ce)("article:create"),icon:T(Ra),onClick:F[2]||(F[2]=()=>xe())},{default:d(()=>[O(I(E.$t("add")),1)]),_:1},8,["disabled","icon"]),p(Wt,{modelValue:fe.value,"onUpdate:modelValue":F[3]||(F[3]=k=>fe.value=k),class:"w-64 ml-2"},{prefix:d(()=>[O(I(E.$t("batchAction")+":"),1)]),default:d(()=>[(S(),Se(Ue,null,Ze(ue,k=>p(Dt,{key:k,disabled:T(Ce)("article:".concat(k)),value:k,label:E.$t("article.op.".concat(k))},null,8,["disabled","value","label"])),64))]),_:1},8,["modelValue"]),p(Un,{title:E.$t("confirmExecute"),onConfirm:F[4]||(F[4]=()=>Te(fe.value,ie.value))},{reference:d(()=>[p(he,{disabled:ie.value.length<=0||T(Ce)("article:".concat(fe.value)),icon:T(Ss)},{default:d(()=>[O(I(E.$t("execute")),1)]),_:1},8,["disabled","icon"])]),_:1},8,["title"]),p(T(dl),{name:"article",class:"ml-2"})]),p(oi,{modelValue:it.value,"onUpdate:modelValue":F[5]||(F[5]=k=>it.value=k),class:"mt-3",onChange:F[6]||(F[6]=()=>Ae())},{default:d(()=>[p(At,{value:-1},{default:d(()=>[O(I(E.$t("all")),1)]),_:1}),p(At,{value:0},{default:d(()=>[O(I(E.$t("article.status.0")),1)]),_:1}),p(At,{value:1},{default:d(()=>[O(I(E.$t("article.status.1")),1)]),_:1}),p(At,{value:5},{default:d(()=>[O(I(E.$t("article.status.5")),1)]),_:1}),p(At,{value:10},{default:d(()=>[O(I(E.$t("article.status.10")),1)]),_:1}),p(At,{value:11},{default:d(()=>[O(I(E.$t("article.status.11")),1)]),_:1}),p(At,{value:12},{default:d(()=>[O(I(E.$t("article.status.12")),1)]),_:1}),p(At,{value:20},{default:d(()=>[O(I(E.$t("article.status.20")),1)]),_:1}),p(At,{value:21},{default:d(()=>[O(I(E.$t("article.status.21")),1)]),_:1}),p(At,{value:22},{default:d(()=>[O(I(E.$t("article.status.22")),1)]),_:1})]),_:1},8,["modelValue"]),de("div",zm,[Si((S(),V(le,{id:"dataTable",ref_key:"table",ref:u,"row-key":"id",data:c.value,onSelectionChange:F[7]||(F[7]=k=>b.value=k),onRowDblclick:F[8]||(F[8]=k=>we(k.id)),onSortChange:w},{default:d(()=>[p(T(pl),{name:"article"},{default:d(()=>[p(Me,{type:"selection",selectable:q,width:"38"}),p(Me,{width:"42"},{default:d(()=>[p(Fn,{class:Yn(["text-lg align-middle",X.value||T(Ce)("article:updateOrder")?["cursor-not-allowed","text-gray-disabled"]:["cursor-move","text-gray-secondary","drag-handle"]]),disalbed:""},{default:d(()=>[p(T(As))]),_:1},8,["class"])]),_:1}),p(Me,{property:"id",label:"ID",width:"170",sortable:"custom"}),p(Me,{property:"title",label:E.$t("article.title"),"min-width":"280","sort-by":"@articleExt-title",sortable:"custom"},{default:d(({row:k})=>[p(qi,{href:"javascript:",underline:!1,onClick:()=>T(rs)(k.status,k.url,k.dynamicUrl)},{default:d(()=>[O(I(k.title),1)]),_:2},1032,["onClick"]),(S(!0),Se(Ue,null,Ze(k.blockItemList,Le=>(S(),V(Lt,{key:Le.id,type:Le.enabled?void 0:"info",size:"small",class:"ml-1",closable:T(Ms)("blockItem:delete"),onClose:()=>Vt(Le.id)},{default:d(()=>[O(I(Le.block.name),1)]),_:2},1032,["type","closable","onClose"]))),128)),k.sticky>0?(S(),V(qn,{key:0,placement:"top"},{content:d(()=>[O(I(E.$t("article.sticky"))+" ",1),k.stickyDate!=null?(S(),Se("span",Wm,I(T(yt)(k.stickyDate).format(" YYYY-MM-DD HH:mm:ss")),1)):ne("",!0)]),default:d(()=>[p(Lt,{type:"danger",class:"mx-1",effect:"light",size:"small",round:"",closable:!T(Ce)("article:sticky"),onClose:()=>ft(k.id)},{default:d(()=>[O(I(k.sticky),1)]),_:2},1032,["closable","onClose"])]),_:2},1024)):ne("",!0),k.srcId!=null?(S(),V(qn,{key:1,placement:"top"},{content:d(()=>[O(I(T(t)("article.type.".concat(k.type)))+": ",1),k.siteId!==k.src.siteId?(S(),Se("span",Hm,"["+I(k.src.site.name)+"]",1)):ne("",!0),O(" "+I(k.src.channel.paths.map(Le=>Le.name).join(" / ")),1)]),default:d(()=>[p(Fn,{class:"ml-1 align-middle"},{default:d(()=>[p(T(Ts))]),_:1})]),_:2},1024)):ne("",!0)]),_:1},8,["label"]),(S(!0),Se(Ue,null,Ze(ot.value.filter(k=>["text","textarea","number","date","color","slider","switch","radio","checkbox","select","multipleSelect"].includes(k.type)),k=>(S(),V(Me,{key:k.code,property:"customs.".concat(k.code),label:k.name,"sort-by":"mainsJson$".concat(k.code).concat(k.dataType==="number"?"_Int":""),sortable:["checkbox","multipleSelect"].indexOf(k.type)===-1?"custom":void 0,display:k.showInList?void 0:"none","show-overflow-tooltip":""},{default:d(({row:Le})=>[k.type==="date"&&k.dateType==="date"?(S(),Se(Ue,{key:0},[O(I(T(yt)(Le.customs[k.code]).format("YYYY-MM-DD")),1)],64)):k.type==="date"&&k.dateType==="datetime"?(S(),Se(Ue,{key:1},[O(I(T(yt)(Le.customs[k.code]).format("YYYY-MM-DD HH:mm:ss")),1)],64)):k.type==="switch"?(S(),V(Lt,{key:2,type:Le.customs[k.code]?"success":"info",size:"small"},{default:d(()=>[O(I(E.$t(Le.customs[k.code]?"yes":"no")),1)]),_:2},1032,["type"])):ne("",!0)]),_:2},1032,["property","label","sort-by","sortable","display"]))),128)),p(Me,{property:"channel.name",label:E.$t("article.channel"),"sort-by":"channel-name",sortable:"custom","show-overflow-tooltip":""},{default:d(({row:k})=>[de("span",{title:k.channel.paths.map(Le=>Le.name).join(" / ")},I(k.channel.name),9,Ym)]),_:1},8,["label"]),p(Me,{property:"org.name",label:E.$t("article.org"),"sort-by":"org-name",sortable:"custom",display:"none","show-overflow-tooltip":""},null,8,["label"]),p(Me,{property:"author",label:E.$t("article.author"),"sort-by":"@articleExt-author",sortable:"custom",display:"none","show-overflow-tooltip":""},null,8,["label"]),p(Me,{property:"editor",label:E.$t("article.editor"),"sort-by":"@articleExt-editor",sortable:"custom",display:"none","show-overflow-tooltip":""},null,8,["label"]),p(Me,{property:"source",label:E.$t("article.source"),"sort-by":"@articleExt-source",sortable:"custom",display:"none","show-overflow-tooltip":""},null,8,["label"]),p(Me,{property:"user.username",label:E.$t("article.user"),"sort-by":"user-username",sortable:"custom",display:"none","show-overflow-tooltip":""},null,8,["label"]),p(Me,{property:"created",label:E.$t("article.created"),"min-width":"120",sortable:"custom",display:"none","show-overflow-tooltip":""},{default:d(({row:k})=>[O(I(T(yt)(k.created).format("YYYY-MM-DD HH:mm")),1)]),_:1},8,["label"]),p(Me,{property:"modifiedUser.username",label:E.$t("article.modifiedUser"),"sort-by":"modifiedUser@user-username",sortable:"custom",display:"none","show-overflow-tooltip":""},null,8,["label"]),p(Me,{property:"modified",label:E.$t("article.modified"),"min-width":"120",sortable:"custom",display:"none","show-overflow-tooltip":""},{default:d(({row:k})=>[O(I(T(yt)(k.modified).format("YYYY-MM-DD HH:mm")),1)]),_:1},8,["label"]),p(Me,{property:"publishDate",label:E.$t("article.publishDate"),"min-width":"120",sortable:"custom","show-overflow-tooltip":""},{default:d(({row:k})=>[O(I(T(yt)(k.publishDate).format("YYYY-MM-DD HH:mm")),1)]),_:1},8,["label"]),p(Me,{property:"views",label:E.$t("article.views"),"sort-by":"@articleExt-views",sortable:"custom",display:"none","show-overflow-tooltip":""},null,8,["label"]),p(Me,{property:"dayViews",label:E.$t("article.dayViews"),"sort-by":"@articleExt-dayViews",sortable:"custom",display:"none","show-overflow-tooltip":""},null,8,["label"]),p(Me,{property:"weekViews",label:E.$t("article.weekViews"),"sort-by":"@articleExt-weekViews",sortable:"custom",display:"none","show-overflow-tooltip":""},null,8,["label"]),p(Me,{property:"monthViews",label:E.$t("article.monthViews"),"sort-by":"@articleExt-monthViews",sortable:"custom",display:"none","show-overflow-tooltip":""},null,8,["label"]),p(Me,{property:"quarterViews",label:E.$t("article.quarterViews"),"sort-by":"@articleExt-quarterViews",sortable:"custom",display:"none","show-overflow-tooltip":""},null,8,["label"]),p(Me,{property:"yearViews",label:E.$t("article.yearViews"),"sort-by":"@articleExt-yearViews",sortable:"custom",display:"none","show-overflow-tooltip":""},null,8,["label"]),p(Me,{property:"status",label:E.$t("article.status"),sortable:"custom","show-overflow-tooltip":""},{default:d(({row:k})=>[k.status===0?(S(),V(Lt,{key:0,type:"success",size:"small"},{default:d(()=>[O(I(E.$t("article.status.".concat(k.status))),1)]),_:2},1024)):k.status===1?(S(),V(Lt,{key:1,size:"small"},{default:d(()=>[O(I(E.$t("article.status.".concat(k.status))),1)]),_:2},1024)):k.status===20||k.status===21?(S(),V(Lt,{key:2,type:"warning",size:"small"},{default:d(()=>[O(I(E.$t("article.status.".concat(k.status))),1)]),_:2},1024)):k.status===22?(S(),V(qn,{key:3,content:k.rejectReason,placement:"top"},{default:d(()=>[p(Lt,{type:"danger",size:"small"},{default:d(()=>[O(I(E.$t("article.status.".concat(k.status))),1)]),_:2},1024)]),_:2},1032,["content"])):(S(),V(Lt,{key:4,type:"info",size:"small"},{default:d(()=>[O(I(E.$t("article.status.".concat(k.status))),1)]),_:2},1024))]),_:1},8,["label"]),p(Me,{label:E.$t("table.action"),width:"260"},{default:d(({row:k})=>[p(he,{type:"primary",disabled:T(Ce)("article:update"),size:"small",link:"",onClick:()=>we(k.id)},{default:d(()=>[O(I(E.$t("edit")),1)]),_:2},1032,["disabled","onClick"]),T(je).epRank>0||T(je).epDisplay?(S(),V(he,{key:0,type:"primary",disabled:!k.processInstanceId||T(Ce)("processInstance:task")||T(je).epRank<1,size:"small",link:"",onClick:()=>Qe(k.processInstanceId)},{default:d(()=>[O(I(E.$t("processInstance.op.task")),1)]),_:2},1032,["disabled","onClick"])):ne("",!0),p(Un,{title:E.$t("confirmDelete"),onConfirm:()=>Te("delete",[k.id])},{reference:d(()=>[p(he,{type:"primary",disabled:T(Ce)("article:delete")||[20].includes(k.status),size:"small",link:""},{default:d(()=>[O(I(E.$t("delete")),1)]),_:2},1032,["disabled"])]),_:2},1032,["title","onConfirm"]),p(Un,{title:E.$t("confirmCompletelyDelete"),onConfirm:()=>Te("completelyDelete",[k.id])},{reference:d(()=>[p(he,{type:"primary",disabled:T(Ce)("article:completelyDelete"),size:"small",link:""},{default:d(()=>[O(I(E.$t("completelyDelete")),1)]),_:1},8,["disabled"])]),_:2},1032,["title","onConfirm"]),p(zi,{class:"ml-2 align-middle"},{dropdown:d(()=>[de("div",null,[p(ji,null,{default:d(()=>[p(_t,{disabled:T(Ce)("article:submit")||[0,12].includes(k.status),onClick:()=>Te("submit",[k.id])},{default:d(()=>[de("span",Km,I(E.$t("article.op.submit")),1)]),_:2},1032,["disabled","onClick"]),p(_t,{disabled:T(Ce)("article:archive")||![0].includes(k.status),onClick:()=>Te("archive",[k.id])},{default:d(()=>[de("span",Gm,I(E.$t("article.op.archive")),1)]),_:2},1032,["disabled","onClick"]),p(_t,{disabled:T(Ce)("article:offline")||![0,1,5,11,12].includes(k.status),onClick:()=>Te("offline",[k.id])},{default:d(()=>[de("span",Qm,I(E.$t("article.op.offline")),1)]),_:2},1032,["disabled","onClick"]),p(_t,{disabled:T(Ce)("article:create"),divided:"",onClick:()=>_e(k.id)},{default:d(()=>[de("span",Xm,I(E.$t("copy")),1)]),_:2},1032,["disabled","onClick"]),T(je).epRank>=2||T(je).epDisplay?(S(),V(_t,{key:0,disabled:T(Ce)("article:internalPush")||k.status!==0||k.srcId!=null||T(je).epRank<2,title:T(je).epRank<2?E.$t("error.enterprise.short"):void 0,onClick:()=>Be(k.id)},{default:d(()=>[de("span",Zm,I(E.$t("article.op.internalPush")),1)]),_:2},1032,["disabled","title","onClick"])):ne("",!0),T(je).epRank>=3||T(je).epDisplay?(S(),V(_t,{key:1,disabled:T(Ce)("article:externalPush")||k.status!==0||k.srcId!=null||T(je).epRank<3,title:T(je).epRank<3?E.$t("error.enterprise.short"):void 0,onClick:()=>Ee(k.id)},{default:d(()=>[de("span",Jm,I(E.$t("article.op.externalPush")),1)]),_:2},1032,["disabled","title","onClick"])):ne("",!0),p(_t,{disabled:T(Ce)("article:sticky"),divided:"",onClick:()=>De(k.id,k.sticky,k.stickyDate)},{default:d(()=>[de("span",eh,I(E.$t("article.op.sticky")),1)]),_:2},1032,["disabled","onClick"]),(S(!0),Se(Ue,null,Ze(ee.value.filter(Le=>Le.enabled&&Le.recommendable),(Le,pe)=>(S(),V(_t,{key:Le.id,disabled:T(Ce)("blockItem:create")||k.blocks.findIndex(tt=>tt.id===Le.id)>=0,divided:pe===0,onClick:()=>St(Le.id,k)},{default:d(()=>[de("span",th,I("".concat(E.$t("article.op.recommendTo"),": ").concat(Le.name)),1)]),_:2},1032,["disabled","divided","onClick"]))),128))]),_:2},1024)])]),default:d(()=>[p(he,{type:"primary",size:"small",link:""},{default:d(()=>[p(Fn,{class:"text-primary"},{default:d(()=>[p(T(Cs))]),_:1})]),_:1})]),_:2},1024)]),_:1},8,["label"])]),_:1})]),_:1},8,["data"])),[[jn,v.value]]),p(Pe,{"current-page":r.value,"onUpdate:currentPage":F[9]||(F[9]=k=>r.value=k),pageSize:a.value,"onUpdate:pageSize":F[10]||(F[10]=k=>a.value=k),total:s.value,"page-sizes":T(Rs),layout:T(Ds),small:"",background:"",class:"justify-end px-3 py-2",onSizeChange:F[11]||(F[11]=()=>Ae()),onCurrentChange:F[12]||(F[12]=()=>Ae())},null,8,["current-page","pageSize","total","page-sizes","layout"])]),p(Bm,{modelValue:x.value,"onUpdate:modelValue":F[13]||(F[13]=k=>x.value=k),action:J.value,"bean-id":f.value,"bean-ids":U.value,channel:H.value,onFinished:Ae},null,8,["modelValue","action","bean-id","bean-ids","channel"]),p(Fm,{modelValue:re.value,"onUpdate:modelValue":F[14]||(F[14]=k=>re.value=k),"bean-id":f.value,type:ye.value,onFinished:Ae},null,8,["modelValue","bean-id","type"]),p(Dl,{modelValue:D.value,"onUpdate:modelValue":F[15]||(F[15]=k=>D.value=k),"bean-id":void 0,"bean-ids":[],"block-id":K.value,"article-id":B.value,title:C.value,description:A.value,video:N.value,images:g.value,onFinished:Ae},null,8,["modelValue","block-id","article-id","title","description","video","images"]),p(dm,{modelValue:te.value,"onUpdate:modelValue":F[16]||(F[16]=k=>te.value=k),"instance-id":G.value},null,8,["modelValue","instance-id"]),p(si,{modelValue:oe.value,"onUpdate:modelValue":F[20]||(F[20]=k=>oe.value=k),title:E.$t("article.sticky"),width:768},{default:d(()=>[p(et,{ref_key:"stickyForm",ref:h,model:_.value,"label-width":"150px"},{default:d(()=>[p(Q,{prop:"sticky"},{label:d(()=>[p(nt,{message:"article.sticky",help:""})]),default:d(()=>[p(ze,{modelValue:_.value.sticky,"onUpdate:modelValue":F[17]||(F[17]=k=>_.value.sticky=k),min:0,max:999},null,8,["modelValue"])]),_:1}),p(Q,{prop:"stickyDate",rules:{validator:(k,Le,pe)=>{if(Le!=null&&Date.now()>Le.getTime()){pe(E.$t("article.error.stickyDate.beforeCurrent"));return}pe()}}},{label:d(()=>[p(nt,{message:"article.stickyDate",help:""})]),default:d(()=>[p(Y,{modelValue:_.value.stickyDate,"onUpdate:modelValue":F[18]||(F[18]=k=>_.value.stickyDate=k),type:"datetime"},null,8,["modelValue"])]),_:1},8,["rules"]),p(he,{type:"primary",onClick:F[19]||(F[19]=()=>Ke())},{default:d(()=>[O(I(E.$t("submit")),1)]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue","title"])]),_:1})]),_:1})}}});export{kh as default};
